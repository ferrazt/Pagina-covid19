!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).canvg={})}(this,function(t){"use strict";var n=Math.tan,y=Math.atan2,d=Math.PI,r=Math.round,e=String.prototype,S=Math.max,P=Math.min,o=Math.ceil,p=Math.sin,v=Math.cos,A=Math.floor,m=Math.sqrt,x=Math.pow;function i(t,e){return t(e={exports:{}},e.exports),e.exports}function a(t,e){return RegExp(t,e)}function w(t){return t.replace(/(?!\u3000)\s+/gm," ")}function s(t){return t.replace(/^[\n \t]+/,"")}function u(t){return t.replace(/[\n \t]+$/,"")}function b(t){return((t||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[]).map(parseFloat)}function l(t){return En.test(t)?t.toLowerCase():t}function c(t){t=t.match(/url\(('([^']+)'|"([^"]+)"|([^'"\)]+))\)/)||[];return t[2]||t[3]||t[4]}function h(t,e){var n=t.match(e);return n?[t.replace(e," "),n.length]:[t,0]}function f(t){var e=[0,0,0],t=h(n=t.replace(/:not\(([^\)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),jn),t=In(t,2),n=t[0],r=t[1];e[1]+=r;t=h(n,Dn),t=In(t,2);n=t[0],r=t[1],e[0]+=r;t=h(n,zn),t=In(t,2);n=t[0],r=t[1],e[1]+=r;t=h(n,Mn),t=In(t,2);n=t[0],r=t[1],e[2]+=r;t=h(n,Bn),t=In(t,2);n=t[0],r=t[1],e[1]+=r;t=h(n,Fn),t=In(t,2);n=t[0],r=t[1],e[1]+=r;t=h(n=n.replace(/[\*\s\+>~]/g," ").replace(/[#\.]/g," "),_n),t=In(t,2);return n=t[0],r=t[1],e[2]+=r,e.join("")}function g(t){return m(x(t[0],2)+x(t[1],2))}function k(t,e){return(t[0]*e[0]+t[1]*e[1])/(g(t)*g(e))}function E(t,e){var n=Math.acos;return(t[0]*e[1]<t[1]*e[0]?-1:1)*n(k(t,e))}function C(t){return t*t*t}function T(t){return 3*t*t*(1-t)}function O(t){return 3*t*(1-t)*(1-t)}function V(t){return(1-t)*(1-t)*(1-t)}function L(t){return t*t}function N(t){return 2*t*(1-t)}function R(t){return(1-t)*(1-t)}function I(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(t){return n(t),0}s.done?e(u):Promise.resolve(u).then(r,i)}function j(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function D(){throw new Error("setTimeout has not been defined")}function z(){throw new Error("clearTimeout has not been defined")}function M(e){if(Ta===setTimeout)return setTimeout(e,0);if((Ta===D||!Ta)&&setTimeout)return Ta=setTimeout,setTimeout(e,0);try{return Ta(e,0)}catch(t){try{return Ta.call(null,e,0)}catch(t){return Ta.call(this,e,0)}}}function B(){Na&&Va&&(Na=!1,Va.length?La=Va.concat(La):Ra=-1,La.length&&F())}function F(){if(!Na){var t=M(B);Na=!0;for(var e=La.length;e;){for(Va=La,La=[];++Ra<e;)Va&&Va[Ra].run();Ra=-1,e=La.length}Va=null,Na=!1,function(e){if(Oa===clearTimeout)return clearTimeout(e);if((Oa===z||!Oa)&&clearTimeout)return Oa=clearTimeout,clearTimeout(e);try{Oa(e)}catch(t){try{return Oa.call(null,e)}catch(t){return Oa.call(this,e)}}}(t)}}function _(t,e){this.fun=t,this.array=e}function $(){}function G(t){t=t.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}function q(t,e,n,r,i,a){return t[n*r*4+4*e+a]}function W(t,e,n,r,i,a,o){t[n*r*4+4*e+a]=o}function H(t,e,n){e=t[e];return e*(e<0?n-255:n)}function X(t,e,n,r){return e+v(t)*n+p(t)*r}function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e,n,r,i,a){var o;isNaN(a)||a<1||(a|=0,o=function(t,e,n,r){var i,a,o,s,u,l,c,h,f,g,d,p,y,v,m,x,b,w,k,S,P,A,E,C,T,O=t.data,V=e-1,L=n-1,N=r+1,R=N*(N+1)/2,I=new ml,j=I;for(o=1;o<2*r+1;o++)j=j.next=new ml,o===N&&(T=j);j.next=I;var D=null,z=null;c=l=0;var M=yl[r],B=vl[r];for(a=0;a<n;a++){for(x=b=w=k=h=f=g=d=0,p=N*(S=O[l]),y=N*(P=O[l+1]),v=N*(A=O[l+2]),m=N*(E=O[l+3]),h+=R*S,f+=R*P,g+=R*A,d+=R*E,j=I,o=0;o<N;o++)j.r=S,j.g=P,j.b=A,j.a=E,j=j.next;for(o=1;o<N;o++)s=l+((V<o?V:o)<<2),h+=(j.r=S=O[s])*(C=N-o),f+=(j.g=P=O[s+1])*C,g+=(j.b=A=O[s+2])*C,d+=(j.a=E=O[s+3])*C,x+=S,b+=P,w+=A,k+=E,j=j.next;for(D=I,z=T,i=0;i<e;i++)O[l+3]=E=d*M>>B,0===E?O[l]=O[l+1]=O[l+2]=0:(E=255/E,O[l]=(h*M>>B)*E,O[l+1]=(f*M>>B)*E,O[l+2]=(g*M>>B)*E),h-=p,f-=y,g-=v,d-=m,p-=D.r,y-=D.g,v-=D.b,m-=D.a,s=c+((s=i+r+1)<V?s:V)<<2,x+=D.r=O[s],b+=D.g=O[s+1],w+=D.b=O[s+2],k+=D.a=O[s+3],h+=x,f+=b,g+=w,d+=k,D=D.next,p+=S=z.r,y+=P=z.g,v+=A=z.b,m+=E=z.a,x-=S,b-=P,w-=A,k-=E,z=z.next,l+=4;c+=e}for(i=0;i<e;i++){for(b=w=k=x=f=g=d=h=0,p=N*(S=O[l=i<<2]),y=N*(P=O[l+1]),v=N*(A=O[l+2]),m=N*(E=O[l+3]),h+=R*S,f+=R*P,g+=R*A,d+=R*E,j=I,o=0;o<N;o++)j.r=S,j.g=P,j.b=A,j.a=E,j=j.next;for(u=e,o=1;o<=r;o++)l=u+i<<2,h+=(j.r=S=O[l])*(C=N-o),f+=(j.g=P=O[l+1])*C,g+=(j.b=A=O[l+2])*C,d+=(j.a=E=O[l+3])*C,x+=S,b+=P,w+=A,k+=E,j=j.next,o<L&&(u+=e);for(l=i,D=I,z=T,a=0;a<n;a++)O[(s=l<<2)+3]=E=d*M>>B,0<E?(E=255/E,O[s]=(h*M>>B)*E,O[s+1]=(f*M>>B)*E,O[s+2]=(g*M>>B)*E):O[s]=O[s+1]=O[s+2]=0,h-=p,f-=y,g-=v,d-=m,p-=D.r,y-=D.g,v-=D.b,m-=D.a,s=i+((s=a+N)<L?s:L)*e<<2,h+=x+=D.r=O[s],f+=b+=D.g=O[s+1],g+=w+=D.b=O[s+2],d+=k+=D.a=O[s+3],D=D.next,p+=S=z.r,y+=P=z.g,v+=A=z.b,m+=E=z.a,x-=S,b-=P,w-=A,k-=E,z=z.next,l+=e}return t}(o=function(t,e,n,r,i){if(!((t="string"==typeof t?document.getElementById(t):t)&&"object"===U(t)&&"getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");t=t.getContext("2d");try{return t.getImageData(e,n,r,i)}catch(e){throw new Error("unable to access image data: "+e)}}(t,e,n,r,i),r,i,a),t.getContext("2d").putImageData(o,e,n))}function Q(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function Z(){return(Z=Fr(Br.mark(function t(n){var e,r,i=arguments;return Br.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=!!(1<i.length&&void 0!==i[1])&&i[1],r=document.createElement("img"),e&&(r.crossOrigin="Anonymous"),t.abrupt("return",new Promise(function(t,e){r.onload=function(){t(r)},r.onerror=function(){e()},r.src=n}));case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function K(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function J(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?K(Object(n),!0).forEach(function(t){_r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}function tt(t){try{return!!t()}catch(t){return!0}}function et(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function nt(t){return mt.call(t).slice(8,-1)}function rt(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function it(t){return bt(rt(t))}function at(t){return"object"==typeof t?null!==t:"function"==typeof t}function ot(t,e){if(!at(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!at(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!at(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!at(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function st(t,e){return wt.call(t,e)}function ut(t){return St?kt.createElement(t):{}}function lt(t){if(!at(t))throw TypeError(t+" is not an object");return t}function ct(e,n){try{Ot(gt,e,n)}catch(t){gt[e]=n}return n}var ht="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,ft=function(t){return t&&t.Math==Math&&t},gt=ft("object"==typeof globalThis&&globalThis)||ft("object"==typeof window&&window)||ft("object"==typeof self&&self)||ft("object"==typeof ht&&ht)||Function("return this")(),dt=!tt(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),pt={}.propertyIsEnumerable,yt=Object.getOwnPropertyDescriptor,vt={f:yt&&!pt.call({1:2},1)?function(t){t=yt(this,t);return!!t&&t.enumerable}:pt},mt={}.toString,xt="".split,bt=tt(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==nt(t)?xt.call(t,""):Object(t)}:Object,wt={}.hasOwnProperty,kt=gt.document,St=at(kt)&&at(kt.createElement),Pt=!dt&&!tt(function(){return 7!=Object.defineProperty(ut("div"),"a",{get:function(){return 7}}).a}),At=Object.getOwnPropertyDescriptor,Et={f:dt?At:function(t,e){if(t=it(t),e=ot(e,!0),Pt)try{return At(t,e)}catch(t){}return st(t,e)?et(!vt.f.call(t,e),t[e]):void 0}},Ct=Object.defineProperty,Tt={f:dt?Ct:function(t,e,n){if(lt(t),e=ot(e,!0),lt(n),Pt)try{return Ct(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Ot=dt?function(t,e,n){return Tt.f(t,e,et(1,n))}:function(t,e,n){return t[e]=n,t},Vt="__core-js_shared__",Lt=gt[Vt]||ct(Vt,{}),Nt=Function.toString;"function"!=typeof Lt.inspectSource&&(Lt.inspectSource=function(t){return Nt.call(t)});function Rt(t){return"Symbol("+(void 0===t?"":t)+")_"+(++Ht+Xt).toString(36)}var It,jt,Dt,zt,Mt,Bt,Ft,_t,$t=Lt.inspectSource,Gt=gt.WeakMap,qt="function"==typeof Gt&&/native code/.test($t(Gt)),Wt=i(function(t){(t.exports=function(t,e){return Lt[t]||(Lt[t]=void 0===e?{}:e)})("versions",[]).push({version:"3.6.1",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),Ht=0,Xt=Math.random(),Ut=Wt("keys"),Yt=function(t){return Ut[t]||(Ut[t]=Rt(t))},Qt={},Zt=gt.WeakMap;Ft=qt?(It=new Zt,jt=It.get,Dt=It.has,zt=It.set,Mt=function(t,e){return zt.call(It,t,e),e},Bt=function(t){return jt.call(It,t)||{}},function(t){return Dt.call(It,t)}):(_t=Yt("state"),Qt[_t]=!0,Mt=function(t,e){return Ot(t,_t,e),e},Bt=function(t){return st(t,_t)?t[_t]:{}},function(t){return st(t,_t)});function Kt(t){return"function"==typeof t?t:void 0}function Jt(t,e){return arguments.length<2?Kt(ge[t])||Kt(gt[t]):ge[t]&&ge[t][e]||gt[t]&&gt[t][e]}function te(t){return isNaN(t=+t)?0:(0<t?A:o)(t)}function ee(t){return 0<t?P(te(t),9007199254740991):0}function ne(t,e){return(t=te(t))<0?S(t+e,0):P(t,e)}function re(t,e){var n,r=it(t),i=0,a=[];for(n in r)!st(Qt,n)&&st(r,n)&&a.push(n);for(;e.length>i;)st(r,n=e[i++])&&(~ye(a,n)||a.push(n));return a}function ie(t,e){for(var n,r=we(e),i=Tt.f,a=Et.f,o=0;o<r.length;o++)n=r[o],st(t,n)||i(t,n,a(e,n))}function ae(t,e){var n,r,i,a=t.target,o=t.global,s=t.stat,u=o?gt:s?gt[a]||ct(a,{}):(gt[a]||{}).prototype;if(u)for(n in e){if(r=e[n],i=t.noTargetGet?(i=Oe(u,n))&&i.value:u[n],!Te(o?n:a+(s?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;ie(r,i)}(t.sham||i&&i.sham)&&Ot(r,"sham",!0),fe(u,n,r,t)}}function oe(t){if("function"!=typeof t)throw TypeError(t+" is not a function");return t}function se(r,i,t){return oe(r),void 0===i?r:0===t?function(){return r.call(i)}:1===t?function(t){return r.call(i,t)}:2===t?function(t,e){return r.call(i,t,e)}:3===t?function(t,e,n){return r.call(i,t,e,n)}:function(){return r.apply(i,arguments)}}function ue(t){return Object(rt(t))}function le(t){return st(Re,t)||(Le&&st(Ie,t)?Re[t]=Ie[t]:Re[t]=je("Symbol."+t)),Re[t]}function ce(t,e){var n;return Ve(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Ve(n.prototype)?at(n)&&(null===(n=n[De])&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}var he={set:Mt,get:Bt,has:Ft,enforce:function(t){return Ft(t)?Bt(t):Mt(t,{})},getterFor:function(n){return function(t){var e;if(!at(t)||(e=Bt(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},fe=i(function(t){var e=he.get,o=he.enforce,s=(String+"").split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,r=!!r&&!!r.noTargetGet;return"function"==typeof n&&("string"!=typeof e||st(n,"name")||Ot(n,"name",e),o(n).source=s.join("string"==typeof e?e:"")),t===gt?void(a?t[e]=n:ct(e,n)):(i?!r&&t[e]&&(a=!0):delete t[e],void(a?t[e]=n:Ot(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||$t(this)})}),ge=gt,de=function(s){return function(t,e,n){var r,i=it(t),a=ee(i.length),o=ne(n,a);if(s&&e!=e){for(;o<a;)if((r=i[o++])!=r)return!0}else for(;o<a;o++)if((s||o in i)&&i[o]===e)return s||o||0;return!s&&-1}},pe={includes:de(!0),indexOf:de(!1)},ye=pe.indexOf,ve=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],me=ve.concat("length","prototype"),xe={f:Object.getOwnPropertyNames||function(t){return re(t,me)}},be={f:Object.getOwnPropertySymbols},we=Jt("Reflect","ownKeys")||function(t){var e=xe.f(lt(t)),n=be.f;return n?e.concat(n(t)):e},ke=/#|\.prototype\./,Se=function(t,e){t=Ae[Pe(t)];return t==Ce||t!=Ee&&("function"==typeof e?tt(e):!!e)},Pe=Se.normalize=function(t){return(t+"").replace(ke,".").toLowerCase()},Ae=Se.data={},Ee=Se.NATIVE="N",Ce=Se.POLYFILL="P",Te=Se,Oe=Et.f,Ve=Array.isArray||function(t){return"Array"==nt(t)},Le=!!Object.getOwnPropertySymbols&&!tt(function(){return!(Symbol()+"")}),Ne=Le&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Re=Wt("wks"),Ie=gt.Symbol,je=Ne?Ie:Ie&&Ie.withoutSetter||Rt,De=le("species"),ze=[].push,Me=function(f){var g=1==f,d=4==f,p=6==f;return function(t,e,n,r){for(var i,a,o=ue(t),s=bt(o),u=se(e,n,3),l=ee(s.length),c=0,r=r||ce,h=g?r(t,l):2==f?r(t,0):void 0;c<l;c++)if((5==f||p||c in s)&&(a=u(i=s[c],c,o),f))if(g)h[c]=a;else if(a)switch(f){case 3:return!0;case 5:return i;case 6:return c;case 2:ze.call(h,i)}else if(d)return!1;return p?-1:3==f||d?d:h}},Be={forEach:Me(0),map:Me(1),filter:Me(2),some:Me(3),every:Me(4),find:Me(5),findIndex:Me(6)},Fe=Jt("navigator","userAgent")||"",_e=gt.process,$e=_e&&_e.versions,Ge=$e&&$e.v8;Ge?Xr=(Hr=Ge.split("."))[0]+Hr[1]:Fe&&((Hr=Fe.match(/Edge\/(\d+)/))&&!(74<=Hr[1])||(Hr=Fe.match(/Chrome\/(\d+)/))&&(Xr=Hr[1]));var qe=Xr&&+Xr,We=le("species"),He=function(e){return 51<=qe||!tt(function(){var t=[];return(t.constructor={})[We]=function(){return{foo:1}},1!==t[e](Boolean).foo})},Xe=Be.map,Ue=He("map"),Ye=Ue&&!tt(function(){[].map.call({length:-1,0:1},function(t){throw t})});ae({target:"Array",proto:!0,forced:!Ue||!Ye},{map:function(t){return Xe(this,t,1<arguments.length?arguments[1]:void 0)}});var Qe="[\t\n\v\f\r                　\u2028\u2029\ufeff]",Ze=RegExp("^"+Qe+Qe+"*"),Ke=RegExp(Qe+Qe+"*$"),Je=function(e){return function(t){t=rt(t)+"";return 1&e&&(t=t.replace(Ze,"")),t=2&e?t.replace(Ke,""):t}},tn={start:Je(1),end:Je(2),trim:Je(3)},en=tn.trim,nn=gt.parseFloat,rn=1/nn("\t\n\v\f\r                　\u2028\u2029\ufeff-0")!=-1/0?function(t){var e=en(t+""),t=nn(e);return 0===t&&"-"==e.charAt(0)?-0:t}:nn;ae({global:!0,forced:parseFloat!=rn},{parseFloat:rn});function an(){var t=lt(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}var on={UNSUPPORTED_Y:tt(function(){var t=a("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),BROKEN_CARET:tt(function(){var t=a("^r","gy");return t.lastIndex=2,null!=t.exec("str")})},sn=RegExp.prototype.exec,un=e.replace,ln=sn,cn=(ki=/a/,Pi=/b*/g,sn.call(ki,"a"),sn.call(Pi,"a"),0!==ki.lastIndex||0!==Pi.lastIndex),hn=on.UNSUPPORTED_Y||on.BROKEN_CARET,fn=void 0!==/()??/.exec("")[1],gn=ln=cn||fn||hn?function(t){var e,n,r,i,a=this,o=hn&&a.sticky,s=an.call(a),u=a.source,l=0,c=t;return o&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),c=(t+"").slice(a.lastIndex),0<a.lastIndex&&(!a.multiline||a.multiline&&"\n"!==t[a.lastIndex-1])&&(u="(?: "+u+")",c=" "+c,l++),n=new RegExp("^(?:"+u+")",s)),fn&&(n=new RegExp("^"+u+"$(?!\\s)",s)),cn&&(e=a.lastIndex),r=sn.call(o?n:a,c),o?r?(r.input=r.input.slice(l),r[0]=r[0].slice(l),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:cn&&r&&(a.lastIndex=a.global?r.index+r[0].length:e),fn&&r&&1<r.length&&un.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r}:ln;ae({target:"RegExp",proto:!0,forced:/./.exec!==gn},{exec:gn});function dn(t,e,n){return e+(n?Sn(t,e).length:1)}function pn(t,e){var n=t.exec;if("function"==typeof n){n=n.call(t,e);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==nt(t))throw TypeError("RegExp#exec called on incompatible receiver");return gn.call(t,e)}var yn=le("species"),vn=!tt(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),mn="$0"==="a".replace(/./,"$0"),xn=!tt(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};t="ab".split(t);return 2!==t.length||"a"!==t[0]||"b"!==t[1]}),bn=function(n,t,e,r){var a,i,o=le(n),s=!tt(function(){var t={};return t[o]=function(){return 7},7!=""[n](t)}),u=s&&!tt(function(){var t=!1,e=/a/;return"split"===n&&((e={}).constructor={},e.constructor[yn]=function(){return e},e.flags="",e[o]=/./[o]),e.exec=function(){return t=!0,null},e[o](""),!t});s&&u&&("replace"!==n||vn&&mn)&&("split"!==n||xn)||(a=/./[o],e=(u=e(o,""[n],function(t,e,n,r,i){return e.exec===gn?s&&!i?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}},{REPLACE_KEEPS_$0:mn}))[0],i=u[1],fe(String.prototype,n,e),fe(RegExp.prototype,o,2==t?function(t,e){return i.call(t,this,e)}:function(t){return i.call(t,this)})),r&&Ot(RegExp.prototype[o],"sham",!0)},wn=function(a){return function(t,e){var n,r=rt(t)+"",i=te(e),t=r.length;return i<0||t<=i?a?"":void 0:(e=r.charCodeAt(i))<55296||56319<e||i+1===t||(n=r.charCodeAt(i+1))<56320||57343<n?a?r.charAt(i):e:a?r.slice(i,i+2):n-56320+(e-55296<<10)+65536}},kn={codeAt:wn(!1),charAt:wn(!0)},Sn=kn.charAt;bn("match",1,function(r,u,l){return[function(t){var e=rt(this),n=null==t?void 0:t[r];return void 0===n?new RegExp(t)[r](e+""):n.call(t,e)},function(t){var e=l(u,t,this);if(e.done)return e.value;var n=lt(t),r=this+"";if(!n.global)return pn(n,r);for(var i,a=n.unicode,o=[],s=n.lastIndex=0;null!==(i=pn(n,r));)i=i[0]+"",(o[s]=i)||(n.lastIndex=dn(r,ee(n.lastIndex),a)),s++;return 0===s?null:o}]});var Pn=/\$([$&'`]|\d\d?|<[^>]*>)/g,An=/\$([$&'`]|\d\d?)/g;bn("replace",2,function(i,b,w,k){return[function(t,e){var n=rt(this),r=null==t?void 0:t[i];return void 0===r?b.call(n+"",t,e):r.call(t,n,e)},function(t,e){if(k.REPLACE_KEEPS_$0||"string"==typeof e&&-1===e.indexOf("$0")){var n=w(b,t,this,e);if(n.done)return n.value}var r=lt(t),i=this+"",a="function"==typeof e;a||(e+="");var o,s=r.global;s&&(o=r.unicode,r.lastIndex=0);for(var u=[];null!==(g=pn(r,i))&&(u.push(g),s);)g[0]+""||(r.lastIndex=dn(i,ee(r.lastIndex),o));for(var l,c="",h=0,f=0;f<u.length;f++){for(var g,d=(g=u[f])[0]+"",p=S(P(te(g.index),i.length),0),y=[],v=1;v<g.length;v++)y.push(void 0===(l=g[v])?l:l+"");var m,x=g.groups,x=a?(m=[d].concat(y,p,i),void 0!==x&&m.push(x),e.apply(void 0,m)+""):function(a,o,s,u,l,t){var c=s+a.length,h=u.length,e=An;return void 0!==l&&(l=ue(l),e=Pn),b.call(t,e,function(t,e){var n;switch(e.charAt(0)){case"$":return"$";case"&":return a;case"`":return o.slice(0,s);case"'":return o.slice(c);case"<":n=l[e.slice(1,-1)];break;default:var r=+e;if(0==r)return t;if(h<r){var i=A(r/10);return 0!==i&&i<=h?void 0===u[i-1]?e.charAt(1):u[i-1]+e.charAt(1):t}n=u[r-1]}return void 0===n?"":n})}(d,i,p,y,x,e);h<=p&&(c+=i.slice(h,p)+x,h=p+d.length)}return c+i.slice(h)}]});var En=/^[A-Z-]+$/,Cn=function(t,e){var n=[][t];return!n||!tt(function(){n.call(null,e||function(){throw 1},1)})},Tn=[].join,On=bt!=Object,ft=Cn("join",",");ae({target:"Array",proto:!0,forced:On||ft},{join:function(t){return Tn.call(it(this),void 0===t?",":t)}});function Vn(){}function Ln(t){return"<script>"+t+"</"+Xn+">"}var Nn,Rn=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}},In=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||Rn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()},jn=/(\[[^\]]+\])/g,Dn=/(#[^\s\+>~\.\[:]+)/g,zn=/(\.[^\s\+>~\.\[:]+)/g,Mn=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,Bn=/(:[\w-]+\([^\)]*\))/gi,Fn=/(:[^\s\+>~\.\[:]+)/g,_n=/([^\s\+>~\.\[:]+)/g,$n=1e-8,Gn=Object.keys||function(t){return re(t,ve)},qn=dt?Object.defineProperties:function(t,e){lt(t);for(var n,r=Gn(e),i=r.length,a=0;a<i;)Tt.f(t,n=r[a++],e[n]);return t},Wn=Jt("document","documentElement"),Hn="prototype",Xn="script",Un=Yt("IE_PROTO"),Yn=function(){try{Nn=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var t;Yn=Nn?function(t){t.write(Ln("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Nn):((t=ut("iframe")).style.display="none",Wn.appendChild(t),t.src="javascript:",(t=t.contentWindow.document).open(),t.write(Ln("document.F=Object")),t.close(),t.F);for(var e=ve.length;e--;)delete Yn[Hn][ve[e]];return Yn()};Qt[Un]=!0;function Qn(t){var e=ge.Symbol||(ge.Symbol={});st(e,t)||ar(e,t,{value:ir.f(t)})}function Zn(t,e,n){t&&!st(t=n?t:t.prototype,sr)&&or(t,sr,{configurable:!0,value:e})}function Kn(t,e){var n=wr[t]=tr(pr[hr]);return fr(n,{type:cr,tag:t,description:e}),dt||(n.description=e),n}function Jn(e,t){lt(e);var n=it(t),t=Gn(n).concat(Vr(n));return ur(t,function(t){dt&&!Or.call(n,t)||Tr(e,t,n[t])}),e}var tr=Object.create||function(t,e){var n;return null===t?n=Yn():(Vn[Hn]=lt(t),n=new Vn,Vn[Hn]=null,n[Un]=t),void 0===e?n:qn(n,e)},er=xe.f,nr={}.toString,rr="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],pt={f:function(t){return rr&&"[object Window]"==nr.call(t)?function(t){try{return er(t)}catch(t){return rr.slice()}}(t):er(it(t))}},ir={f:le},ar=Tt.f,or=Tt.f,sr=le("toStringTag"),ur=Be.forEach,lr=Yt("hidden"),cr="Symbol",hr="prototype",Vt=le("toPrimitive"),fr=he.set,gr=he.getterFor(cr),dr=Object[hr],pr=gt.Symbol,yr=Jt("JSON","stringify"),vr=Et.f,mr=Tt.f,xr=pt.f,br=vt.f,wr=Wt("symbols"),kr=Wt("op-symbols"),Sr=Wt("string-to-symbol-registry"),Pr=Wt("symbol-to-string-registry"),Gt=Wt("wks"),qt=gt.QObject,Ar=!qt||!qt[hr]||!qt[hr].findChild,Er=dt&&tt(function(){return 7!=tr(mr({},"a",{get:function(){return mr(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=vr(dr,e);r&&delete dr[e],mr(t,e,n),r&&t!==dr&&mr(dr,e,r)}:mr,Cr=Ne?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof pr},Tr=function(t,e,n){t===dr&&Tr(kr,e,n),lt(t);e=ot(e,!0);return lt(n),st(wr,e)?(n.enumerable?(st(t,lr)&&t[lr][e]&&(t[lr][e]=!1),n=tr(n,{enumerable:et(0,!1)})):(st(t,lr)||mr(t,lr,et(1,{})),t[lr][e]=!0),Er(t,e,n)):mr(t,e,n)},Or=function(t){var e=ot(t,!0),t=br.call(this,e);return(this!==dr||!st(wr,e)||st(kr,e))&&(!(t||!st(this,e)||!st(wr,e)||st(this,lr)&&this[lr][e])||t)},Zt=function(t,e){var n=it(t),t=ot(e,!0);if(n!==dr||!st(wr,t)||st(kr,t)){e=vr(n,t);return!e||!st(wr,t)||st(n,lr)&&n[lr][t]||(e.enumerable=!0),e}},de=function(t){var t=xr(it(t)),e=[];return ur(t,function(t){st(wr,t)||st(Qt,t)||e.push(t)}),e},Vr=function(t){var e=t===dr,t=xr(e?kr:it(t)),n=[];return ur(t,function(t){!st(wr,t)||e&&!st(dr,t)||n.push(wr[t])}),n};Le||(fe((pr=function(){if(this instanceof pr)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?arguments[0]+"":void 0,e=Rt(t),n=function(t){this===dr&&n.call(kr,t),st(this,lr)&&st(this[lr],e)&&(this[lr][e]=!1),Er(this,e,et(1,t))};return dt&&Ar&&Er(dr,e,{configurable:!0,set:n}),Kn(e,t)})[hr],"toString",function(){return gr(this).tag}),fe(pr,"withoutSetter",function(t){return Kn(Rt(t),t)}),vt.f=Or,Tt.f=Tr,Et.f=Zt,xe.f=pt.f=de,be.f=Vr,ir.f=function(t){return Kn(le(t),t)},dt&&(mr(pr[hr],"description",{configurable:!0,get:function(){return gr(this).description}}),fe(dr,"propertyIsEnumerable",Or,{unsafe:!0}))),ae({global:!0,wrap:!0,forced:!Le,sham:!Le},{Symbol:pr}),ur(Gn(Gt),function(t){Qn(t)}),ae({target:cr,stat:!0,forced:!Le},{for:function(t){var e=t+"";if(st(Sr,e))return Sr[e];t=pr(e);return Sr[e]=t,Pr[t]=e,t},keyFor:function(t){if(!Cr(t))throw TypeError(t+" is not a symbol");return st(Pr,t)?Pr[t]:void 0},useSetter:function(){Ar=!0},useSimple:function(){Ar=!1}}),ae({target:"Object",stat:!0,forced:!Le,sham:!dt},{create:function(t,e){return void 0===e?tr(t):Jn(tr(t),e)},defineProperty:Tr,defineProperties:Jn,getOwnPropertyDescriptor:Zt}),ae({target:"Object",stat:!0,forced:!Le},{getOwnPropertyNames:de,getOwnPropertySymbols:Vr}),ae({target:"Object",stat:!0,forced:tt(function(){be.f(1)})},{getOwnPropertySymbols:function(t){return be.f(ue(t))}}),yr&&(ma=!Le||tt(function(){var t=pr();return"[null]"!=yr([t])||"{}"!=yr({a:t})||"{}"!=yr(Object(t))}),ae({target:"JSON",stat:!0,forced:ma},{stringify:function(t,e){for(var n,r=[t],i=1;i<arguments.length;)r.push(arguments[i++]);if((at(n=e)||void 0!==t)&&!Cr(t))return Ve(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Cr(e))return e}),r[1]=e,yr.apply(null,r)}})),pr[hr][Vt]||Ot(pr[hr],Vt,pr[hr].valueOf),Zn(pr,cr),Qt[lr]=!0;var Lr=Be.filter,Se=He("filter"),Me=Se&&!tt(function(){[].filter.call({length:-1,0:1},function(t){throw t})});ae({target:"Array",proto:!0,forced:!Se||!Me},{filter:function(t){return Lr(this,t,1<arguments.length?arguments[1]:void 0)}});var Nr=Be.forEach,Rr=Cn("forEach")?function(t){return Nr(this,t,1<arguments.length?arguments[1]:void 0)}:[].forEach;ae({target:"Array",proto:!0,forced:[].forEach!=Rr},{forEach:Rr}),ae({target:"Object",stat:!0,forced:!dt,sham:!dt},{defineProperties:qn}),ae({target:"Object",stat:!0,forced:!dt,sham:!dt},{defineProperty:Tt.f});var Ir=Et.f,_e=tt(function(){Ir(1)});ae({target:"Object",stat:!0,forced:!dt||_e,sham:!dt},{getOwnPropertyDescriptor:function(t,e){return Ir(it(t),e)}});function jr(t,e,n){(e=ot(e))in t?Tt.f(t,e,et(0,n)):t[e]=n}ae({target:"Object",stat:!0,sham:!dt},{getOwnPropertyDescriptors:function(t){for(var e,n,r=it(t),i=Et.f,a=we(r),o={},s=0;a.length>s;)void 0!==(n=i(r,e=a[s++]))&&jr(o,e,n);return o}});$e=tt(function(){Gn(1)});ae({target:"Object",stat:!0,forced:$e},{keys:function(t){return Gn(ue(t))}});var Dr,zr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(Dr in zr){var Mr=gt[Dr],Mr=Mr&&Mr.prototype;if(Mr&&Mr.forEach!==Rr)try{Ot(Mr,"forEach",Rr)}catch(t){Mr.forEach=Rr}}var Br=i(function(t){var e=function(a){function o(t,e,n,r){var i,a,o,s,e=e&&e.prototype instanceof l?e:l,e=Object.create(e.prototype),r=new h(r||[]);return e._invoke=(i=t,a=n,o=r,s="suspendedStart",function(t,e){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===t)throw e;return f()}for(o.method=t,o.arg=e;;){var n=o.delegate;if(n){var r=function t(e,n){var r=e.iterator[n.method];if(r===g){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=g,t(e,n),"throw"===n.method))return b;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}var r=u(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,b;r=r.arg;if(!r)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b;{if(!r.done)return r;n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=g)}return n.delegate=null,b}(n,o);if(r){if(r===b)continue;return r}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===s)throw s="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s="executing";r=u(i,a,o);if("normal"===r.type){if(s=o.done?"completed":"suspendedYield",r.arg===b)continue;return{value:r.arg,done:o.done}}"throw"===r.type&&(s="completed",o.method="throw",o.arg=r.arg)}}),e}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function l(){}function e(){}function n(){}function t(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function s(o){var e;this._invoke=function(n,r){function t(){return new Promise(function(t,e){!function e(t,n,r,i){t=u(o[t],o,n);if("throw"!==t.type){var a=t.arg;return(n=a.value)&&"object"==typeof n&&p.call(n,"__await")?Promise.resolve(n.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):Promise.resolve(n).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,i)})}i(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function r(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function c(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function h(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(r,this),this.reset(!0)}function i(e){if(e){var t=e[v];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,t=function t(){for(;++n<e.length;)if(p.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=g,t.done=!0,t};return t.next=t}}return{next:f}}function f(){return{value:g,done:!0}}var g,d=Object.prototype,p=d.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},v=y.iterator||"@@iterator",m=y.asyncIterator||"@@asyncIterator",x=y.toStringTag||"@@toStringTag";a.wrap=o;var b={},w={};w[v]=function(){return this};y=Object.getPrototypeOf,y=y&&y(y(i([])));y&&y!==d&&p.call(y,v)&&(w=y);var k=n.prototype=l.prototype=Object.create(w);return(e.prototype=k.constructor=n).constructor=e,n[x]=e.displayName="GeneratorFunction",a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,n):(t.__proto__=n,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(k),t},a.awrap=function(t){return{__await:t}},t(s.prototype),s.prototype[m]=function(){return this},a.AsyncIterator=s,a.async=function(t,e,n,r){var i=new s(o(t,e,n,r));return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},t(k),k[x]="Generator",k[v]=function(){return this},k.toString=function(){return"[object Generator]"},a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=i,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(c),!t)for(var e in this)"t"===e.charAt(0)&&p.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){function t(t,e){return a.type="throw",a.arg=n,r.next=t,e&&(r.method="next",r.arg=g),!!e}if(this.done)throw n;for(var r=this,e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],a=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var o=p.call(i,"catchLoc"),s=p.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n,r=this.tryEntries.length-1;0<=r;--r)if((n=this.tryEntries[r]).tryLoc<=this.prev&&p.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}var a=(i=i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc?null:i)?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e,n=this.tryEntries.length-1;0<=n;--n)if((e=this.tryEntries[n]).finallyLoc===t)return this.complete(e.completion,e.afterLoc),c(e),b},catch:function(t){for(var e,n=this.tryEntries.length-1;0<=n;--n)if((e=this.tryEntries[n]).tryLoc===t){var r,i=e.completion;return"throw"===i.type&&(r=i.arg,c(e)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:i(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=g),b}},a}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}),Fr=function(s){return function(){var t=this,o=arguments;return new Promise(function(e,n){function r(t){I(a,e,n,r,i,"next",t)}function i(t){I(a,e,n,r,i,"throw",t)}var a=s.apply(t,o);r(void 0)})}},_r=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},$r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Ge=function(t,e,n){return e&&j(t.prototype,e),n&&j(t,n),t},Gr=le("isConcatSpreadable"),qr=9007199254740991,Wr="Maximum allowed index exceeded",Hr=51<=qe||!tt(function(){var t=[];return t[Gr]=!1,t.concat()[0]!==t}),Xr=He("concat");ae({target:"Array",proto:!0,forced:!Hr||!Xr},{concat:function(){for(var t,e,n,r=ue(this),i=ce(r,0),a=0,o=-1,s=arguments.length;o<s;o++)if(function(t){if(!at(t))return!1;var e=t[Gr];return void 0===e?Ve(t):!!e}(n=-1===o?r:arguments[o])){if(e=ee(n.length),qr<a+e)throw TypeError(Wr);for(t=0;t<e;t++,a++)t in n&&jr(i,a,n[t])}else{if(qr<=a)throw TypeError(Wr);jr(i,a++,n)}return i.length=a,i}});var Ur=Be.every;ae({target:"Array",proto:!0,forced:Cn("every")},{every:function(t){return Ur(this,t,1<arguments.length?arguments[1]:void 0)}});var Ue=function(l){return function(t,e,n,r){oe(e);var i=ue(t),a=bt(i),o=ee(i.length),s=l?o-1:0,u=l?-1:1;if(n<2)for(;;){if(s in a){r=a[s],s+=u;break}if(s+=u,l?s<0:o<=s)throw TypeError("Reduce of empty array with no initial value")}for(;l?0<=s:s<o;s+=u)s in a&&(r=e(r,a[s],s,i));return r}},Yr={left:Ue(!1),right:Ue(!0)}.left;ae({target:"Array",proto:!0,forced:Cn("reduce")},{reduce:function(t){return Yr(this,t,arguments.length,1<arguments.length?arguments[1]:void 0)}});var Ye=Date.prototype,Qr="Invalid Date",Qe="toString",Zr=Ye[Qe],Kr=Ye.getTime;new Date(NaN)+""!=Qr&&fe(Ye,Qe,function(){var t=Kr.call(this);return t==t?Zr.call(this):Qr});Je={};Je[le("toStringTag")]="z";function Jr(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ti))?t:ei?nt(e):"Object"==(t=nt(e))&&"function"==typeof e.callee?"Arguments":t}var rn="[object z]"==Je+"",ti=le("toStringTag"),ei="Arguments"==nt(function(){return arguments}());rn||fe(Object.prototype,"toString",function(){return"[object "+Jr(this)+"]"},{unsafe:!0});function ni(t,e,n){for(var r in e)fe(t,r,e[r],n);return t}function ri(t){var e=Jt(t),t=Tt.f;dt&&e&&!e[ui]&&t(e,ui,{configurable:!0,get:function(){return this}})}function ii(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function ai(t){return void 0!==t&&(li.Array===t||hi[ci]===t)}function oi(t){if(null!=t)return t[fi]||t["@@iterator"]||li[Jr(t)]}function si(t,e,n,r){try{return r?e(lt(n)[0],n[1]):e(n)}catch(e){n=t.return;throw void 0!==n&&lt(n.call(t)),e}}var e=gt.Promise,ui=le("species"),li={},ci=le("iterator"),hi=Array.prototype,fi=le("iterator"),gi=i(function(t){function f(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,r,i){var a,o,s,u,l,c,h=se(e,n,r?2:1);if(i)a=t;else{if("function"!=typeof(i=oi(t)))throw TypeError("Target is not iterable");if(ai(i)){for(o=0,s=ee(t.length);o<s;o++)if((u=r?h(lt(c=t[o])[0],c[1]):h(t[o]))&&u instanceof f)return u;return new f(!1)}a=i.call(t)}for(l=a.next;!(c=l.call(a)).done;)if("object"==typeof(u=si(a,h,c.value,r))&&u&&u instanceof f)return u;return new f(!1)}).stop=function(t){return new f(!0,t)}}),di=le("iterator"),pi=!1;try{var yi=0,vi={next:function(){return{done:!!yi++}},return:function(){pi=!0}};vi[di]=function(){return this},Array.from(vi,function(){throw 2})}catch(t){}function mi(t,e){var n;return void 0===(t=lt(t).constructor)||null==(n=lt(t)[Si])?e:oe(n)}function xi(t){var e;Oi.hasOwnProperty(t)&&(e=Oi[t],delete Oi[t],e())}function bi(t){return function(){xi(t)}}var wi,ki=function(t,e){if(!e&&!pi)return!1;var n=!1;try{var r={};r[di]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},Si=le("species"),Pi=/(iphone|ipod|ipad).*applewebkit/i.test(Fe),Ai=gt.location,on=gt.setImmediate,ln=gt.clearImmediate,Ei=gt.process,wn=gt.MessageChannel,Ci=gt.Dispatch,Ti=0,Oi={},Vi="onreadystatechange",On=function(t){xi(t.data)},ft=function(t){gt.postMessage(t+"",Ai.protocol+"//"+Ai.host)};on&&ln||(on=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return Oi[++Ti]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},wi(Ti),Ti},ln=function(t){delete Oi[t]},"process"==nt(Ei)?wi=function(t){Ei.nextTick(bi(t))}:Ci&&Ci.now?wi=function(t){Ci.now(bi(t))}:wn&&!Pi?(bs=(ms=new wn).port2,ms.port1.onmessage=On,wi=se(bs.postMessage,bs,1)):!gt.addEventListener||"function"!=typeof postMessage||gt.importScripts||tt(ft)?wi=Vi in ut("script")?function(t){Wn.appendChild(ut("script"))[Vi]=function(){Wn.removeChild(this),xi(t)}}:function(t){setTimeout(bi(t),0)}:(wi=ft,gt.addEventListener("message",On,!1)));var Li,Ni,Ri,Ii,ji,Di,zi,Mi,Wt={set:on,clear:ln},qt=Et.f,Bi=Wt.set,Ne=gt.MutationObserver||gt.WebKitMutationObserver,Fi=gt.process,pt=gt.Promise,_i="process"==nt(Fi),Gt=qt(gt,"queueMicrotask"),Zt=Gt&&Gt.value;Zt||(Li=function(){var t,e;for(_i&&(t=Fi.domain)&&t.exit();Ni;){e=Ni.fn,Ni=Ni.next;try{e()}catch(t){throw Ni?Ii():Ri=void 0,t}}Ri=void 0,t&&t.enter()},Ii=_i?function(){Fi.nextTick(Li)}:Ne&&!Pi?(ji=!0,Di=document.createTextNode(""),new Ne(Li).observe(Di,{characterData:!0}),function(){Di.data=ji=!ji}):pt&&pt.resolve?(zi=pt.resolve(void 0),Mi=zi.then,function(){Mi.call(zi,Li)}):function(){Bi.call(gt,Li)});function $i(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=oe(n),this.reject=oe(r)}function Gi(t,e){return lt(t),at(e)&&e.constructor===t?e:((0,(t=ea.f(t)).resolve)(e),t.promise)}function qi(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}function Wi(t){var e;return!(!at(t)||"function"!=typeof(e=t.then))&&e}function Hi(h,f,g){var d;f.notified||(f.notified=!0,d=f.reactions,ta(function(){for(var t=f.value,e=1==f.state,n=0;d.length>n;){var r,i,a,o=d[n++],s=e?o.ok:o.fail,u=o.resolve,l=o.reject,c=o.domain;try{s?(e||(2===f.rejection&&wa(h,f),f.rejection=1),!0===s?r=t:(c&&c.enter(),r=s(t),c&&(c.exit(),a=!0)),r===o.promise?l(la("Promise-chain cycle")):(i=Wi(r))?i.call(r,u,l):u(r)):l(t)}catch(t){c&&!a&&c.exit(),l(t)}}f.reactions=[],f.notified=!1,g&&!f.rejection&&xa(h,f)}))}function Xi(t,e,n){var r;ya?((r=ca.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),gt.dispatchEvent(r)):r={promise:e,reason:n},(e=gt["on"+t])?e(r):t===va&&function(t,e){var n=gt.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function Ui(e,n,r,i){return function(t){e(n,r,t,i)}}function Yi(t,e,n,r){e.done||(e.done=!0,(e=r?r:e).value=n,e.state=2,Hi(t,e,!0))}var Qi,Zi,Ki,Ji,ta=Zt||function(t){t={fn:t,next:void 0};Ri&&(Ri.next=t),Ni||(Ni=t,Ii()),Ri=t},ea={f:function(t){return new $i(t)}},na=Wt.set,ra=le("species"),ia="Promise",aa=he.get,oa=he.set,sa=he.getterFor(ia),ua=e,la=gt.TypeError,ca=gt.document,ha=gt.process,fa=Jt("fetch"),ga=ea.f,da=ga,pa="process"==nt(ha),ya=!!(ca&&ca.createEvent&&gt.dispatchEvent),va="unhandledrejection",de=Te(ia,function(){if(!($t(ua)!==ua+"")){if(66===qe)return!0;if(!pa&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=qe&&/native code/.test(ua))return!1;function t(t){t(function(){},function(){})}var e=ua.resolve(1);return(e.constructor={})[ra]=t,!(e.then(function(){})instanceof t)}),ma=de||!ki(function(t){ua.all(t).catch(function(){})}),xa=function(n,r){na.call(gt,function(){var t,e=r.value;if(ba(r)&&(t=qi(function(){pa?ha.emit("unhandledRejection",e,n):Xi(va,n,e)}),r.rejection=pa||ba(r)?2:1,t.error))throw t.value})},ba=function(t){return 1!==t.rejection&&!t.parent},wa=function(t,e){na.call(gt,function(){pa?ha.emit("rejectionHandled",t):Xi("rejectionhandled",t,e.value)})},ka=function(n,r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(n===t)throw la("Promise can't be resolved itself");var i=Wi(t);i?ta(function(){var e={done:!1};try{i.call(t,Ui(ka,n,e,r),Ui(Yi,n,e,r))}catch(t){Yi(n,e,t,r)}}):(r.value=t,r.state=1,Hi(n,r,!1))}catch(t){Yi(n,{done:!1},t,r)}}};de&&(ua=function(t){ii(this,ua,ia),oe(t),Qi.call(this);var e=aa(this);try{t(Ui(ka,this,e),Ui(Yi,this,e))}catch(t){Yi(this,e,t)}},(Qi=function(){oa(this,{type:ia,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=ni(ua.prototype,{then:function(t,e){var n=sa(this),r=ga(mi(this,ua));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=pa?ha.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Hi(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Zi=function(){var t=new Qi,e=aa(t);this.promise=t,this.resolve=Ui(ka,t,e),this.reject=Ui(Yi,t,e)},ea.f=ga=function(t){return t===ua||t===Ki?new Zi:da(t)},"function"==typeof e&&(Ji=e.prototype.then,fe(e.prototype,"then",function(t,e){var n=this;return new ua(function(t,e){Ji.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof fa&&ae({global:!0,enumerable:!0,forced:!0},{fetch:function(){return Gi(ua,fa.apply(gt,arguments))}}))),ae({global:!0,wrap:!0,forced:de},{Promise:ua}),Zn(ua,ia,!1),ri(ia),Ki=Jt(ia),ae({target:ia,stat:!0,forced:de},{reject:function(t){var e=ga(this);return e.reject.call(void 0,t),e.promise}}),ae({target:ia,stat:!0,forced:de},{resolve:function(t){return Gi(this,t)}}),ae({target:ia,stat:!0,forced:ma},{all:function(t){var s=this,e=ga(s),u=e.resolve,l=e.reject,n=qi(function(){var r=oe(s.resolve),i=[],a=0,o=1;gi(t,function(t){var e=a++,n=!1;i.push(void 0),o++,r.call(s,t).then(function(t){n||(n=!0,i[e]=t,--o||u(i))},l)}),--o||u(i)});return n.error&&l(n.value),e.promise},race:function(t){var n=this,r=ga(n),i=r.reject,e=qi(function(){var e=oe(n.resolve);gi(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}});function Sa(t){var e;return at(t)&&(void 0===(e=t[Pa])?"RegExp"==nt(t):!!e)}var Pa=le("match"),Aa=[].push,Ea=4294967295,Ca=!tt(function(){return!RegExp(Ea,"y")});bn("split",2,function(i,d,p){var y="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(t,e){var n=rt(this)+"",r=void 0===e?Ea:e>>>0;if(0==r)return[];if(void 0===t)return[n];if(!Sa(t))return d.call(n,t,r);for(var i,a,o,s=[],e=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,l=new RegExp(t.source,e+"g");(i=gn.call(l,n))&&!(u<(a=l.lastIndex)&&(s.push(n.slice(u,i.index)),1<i.length&&i.index<n.length&&Aa.apply(s,i.slice(1)),o=i[0].length,u=a,s.length>=r));)l.lastIndex===i.index&&l.lastIndex++;return u===n.length?!o&&l.test("")||s.push(""):s.push(n.slice(u)),s.length>r?s.slice(0,r):s}:function(t,e){return void 0===t&&0===e?[]:d.call(this,t,e)};return[function(t,e){var n=rt(this),r=null==t?void 0:t[i];return void 0===r?y.call(n+"",t,e):r.call(t,n,e)},function(t,e){var n=p(y,t,this,e,y!==d);if(n.done)return n.value;var r=lt(t),i=this+"",n=mi(r,RegExp),a=r.unicode,t=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(Ca?"y":"g"),o=new n(Ca?r:"^(?:"+r.source+")",t),s=void 0===e?Ea:e>>>0;if(0==s)return[];if(0===i.length)return null===pn(o,i)?[i]:[];for(var u=0,l=0,c=[];l<i.length;){o.lastIndex=Ca?l:0;var h,f=pn(o,Ca?i:i.slice(l));if(null===f||(h=P(ee(o.lastIndex+(Ca?0:l)),i.length))===u)l=dn(i,l,a);else{if(c.push(i.slice(u,l)),c.length===s)return c;for(var g=1;g<=f.length-1;g++)if(c.push(f[g]),c.length===s)return c;l=u=h}}return c.push(i.slice(u)),c}]},!Ca);var Vt="undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,Ta=D,Oa=z;"function"==typeof Vt.setTimeout&&(Ta=setTimeout),"function"==typeof Vt.clearTimeout&&(Oa=clearTimeout);var Va,La=[],Na=!1,Ra=-1;_.prototype.run=function(){this.fun.apply(null,this.array)};for(var Ia,ja,Da,za=Vt.performance||{},Ma=za.now||za.mozNow||za.msNow||za.oNow||za.webkitNow||function(){return(new Date).getTime()},Ba=new Date,Fa={nextTick:function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];La.push(new _(t,e)),1!==La.length||Na||M(F)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:$,addListener:$,once:$,off:$,removeListener:$,removeAllListeners:$,emit:$,binding:function(){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*Ma.call(za),n=A(e),e=A(e%1*1e9);return t&&(n-=t[0],(e-=t[1])<0&&(n--,e+=1e9)),[n,e]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Ba)/1e3}},_a=i(function(o){!function(){var t,e,n,r,i,a;"undefined"!=typeof performance&&null!==performance&&performance.now?o.exports=function(){return performance.now()}:null!=Fa&&Fa.hrtime?(o.exports=function(){return(t()-i)/1e6},e=Fa.hrtime,r=(t=function(){var t=e();return 1e9*t[0]+t[1]})(),a=1e9*Fa.uptime(),i=r-a):n=Date.now?(o.exports=function(){return Date.now()-n},Date.now()):(o.exports=function(){return(new Date).getTime()-n},(new Date).getTime())}.call(ht)}),$a="undefined"==typeof window?ht:window,Ga=["moz","webkit"],qa="AnimationFrame",Wa=$a["request"+qa],Ha=$a["cancel"+qa]||$a["cancelRequest"+qa],Xa=0;!Wa&&Xa<Ga.length;Xa++)Wa=$a[Ga[Xa]+"Request"+qa],Ha=$a[Ga[Xa]+"Cancel"+qa]||$a[Ga[Xa]+"CancelRequest"+qa];Wa&&Ha||(ja=Ia=0,Da=[],Wa=function(t){var e,n;return 0===Da.length&&(e=_a(),n=S(0,1e3/60-(e-Ia)),Ia=n+e,setTimeout(function(){for(var t=Da.slice(0),e=Da.length=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(Ia)}catch(e){setTimeout(function(){throw e},0)}},r(n))),Da.push({handle:++ja,callback:t,cancelled:!1}),ja},Ha=function(t){for(var e=0;e<Da.length;e++)Da[e].handle===t&&(Da[e].cancelled=!0)});function Ua(t){return Wa.call($a,t)}Ua.cancel=function(){Ha.apply($a,arguments)},Ua.polyfill=function(t){(t=t||$a).requestAnimationFrame=Wa,t.cancelAnimationFrame=Ha};var Se=Tt.f,Me=Function.prototype,Ya=Me.toString,Qa=/^\s*function ([^ (]*)/;!dt||"name"in Me||Se(Me,"name",{configurable:!0,get:function(){try{return Ya.call(this).match(Qa)[1]}catch(t){return""}}});function Za(t){this.ok=!1,this.alpha=1,t=(t=(t="#"==t.charAt(0)?t.substr(1,6):t).replace(/ /g,"")).toLowerCase();var c={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};t=c[t]||t;for(var h=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],e=0;e<h.length;e++){var n=h[e].re,r=h[e].process,n=n.exec(t);n&&(n=r(n),this.r=n[0],this.g=n[1],this.b=n[2],3<n.length&&(this.alpha=n[3]),this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:255<this.r?255:this.r,this.g=this.g<0||isNaN(this.g)?0:255<this.g?255:this.g,this.b=this.b<0||isNaN(this.b)?0:255<this.b?255:this.b,this.alpha=this.alpha<0?0:1<this.alpha||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return"#"+(t=1==t.length?"0"+t:t)+(e=1==e.length?"0"+e:e)+(n=1==n.length?"0"+n:n)},this.getHelpXML=function(){for(var t,e=[],n=0;n<h.length;n++)for(var r=h[n].example,i=0;i<r.length;i++)e[e.length]=r[i];for(t in c)e[e.length]=t;var a=document.createElement("ul");a.setAttribute("id","rgbcolor-examples");for(n=0;n<e.length;n++)try{var o=document.createElement("li"),s=new RGBColor(e[n]),u=document.createElement("div");u.style.cssText="margin: 3px; border: 1px solid black; background:"+s.toHex()+"; color:"+s.toHex(),u.appendChild(document.createTextNode("test"));var l=document.createTextNode(" "+e[n]+" -> "+s.toRGB()+" -> "+s.toHex());o.appendChild(u),o.appendChild(l),a.appendChild(o)}catch(t){}return a}}var Ka=(Ge(Ja,[{key:"hasValue",value:function(){var t=this.value;return null!==t&&""!==t&&0!==t&&void 0!==t}},{key:"isString",value:function(t){var e=this.value,n="string"==typeof e;return n&&t?t.test(e):n}},{key:"isUrlDefinition",value:function(){return this.isString(/^url\(/)}},{key:"isPixels",value:function(){if(!this.hasValue())return!1;var t=this.getString();switch(!0){case/px$/.test(t):case/^[0-9]+$/.test(t):return!0;default:return!1}}},{key:"setValue",value:function(t){return this.value=t,this}},{key:"getValue",value:function(t){return void 0===t||this.hasValue()?this.value:t}},{key:"getNumber",value:function(t){if(!this.hasValue())return void 0===t?0:parseFloat(t);t=this.value,t=parseFloat(t);return this.isString(/%$/)&&(t/=100),t}},{key:"getString",value:function(t){return void 0===t||this.hasValue()?void 0===this.value?"":this.value+"":t+""}},{key:"getDpi",value:function(){return 96}},{key:"getRem",value:function(){return this.document.rootEmSize}},{key:"getEm",value:function(){return this.document.emSize}},{key:"getUnits",value:function(){return this.getString().replace(/[0-9\.\-]/g,"")}},{key:"getPixels",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(!this.hasValue())return 0;var t=In("boolean"==typeof t?[void 0,t]:[t],2),n=t[0],t=t[1],r=this.document.screen.viewPort;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*P(r.computeSize("x"),r.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*S(r.computeSize("x"),r.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*r.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*r.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&t:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*r.computeSize(n);default:var i=this.getNumber();return e&&i<1?i*r.computeSize(n):i}}},{key:"getMilliseconds",value:function(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}},{key:"getRadians",value:function(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(d/180);case this.isString(/grad$/):return this.getNumber()*(d/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(d/180)}}},{key:"getDefinition",value:function(){var t=this.getString(),e=(e=t.match(/#([^\)'"]+)/))&&e[1];return this.document.definitions[e=e||t]}},{key:"getFillStyleDefinition",value:function(t,e){var n,r=this.getDefinition();return r?"function"==typeof r.createGradient?r.createGradient(this.document.ctx,t,e):"function"!=typeof r.createPattern?null:(r.getHrefAttribute().hasValue()&&(n=r.getAttribute("patternTransform"),r=r.getHrefAttribute().getDefinition(),n.hasValue()&&r.getAttribute("patternTransform",!0).setValue(n.value)),r.createPattern(this.document.ctx,t,e)):null}},{key:"getTextBaseline",value:function(){return this.hasValue()?Ja.textBaselineMapping[this.getString()]:null}},{key:"addOpacity",value:function(t){for(var e,n=this.value,r=n.length,i=0,a=0;a<r&&(","===n[a]&&i++,3!==i);a++);return t.hasValue()&&this.isString()&&3!==i&&((e=new Za(n)).ok&&(n="rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(t.getNumber(),")"))),new Ja(this.document,this.name,n)}}],[{key:"empty",value:function(t){return new Ja(t,"EMPTY","")}}]),Ja);function Ja(t,e,n){$r(this,Ja),this.document=t,this.name=e,this.value=n}Ka.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var to=(Ge(lo,[{key:"clear",value:function(){this.viewPorts=[]}},{key:"setCurrent",value:function(t,e){this.viewPorts.push({width:t,height:e})}},{key:"removeCurrent",value:function(){this.viewPorts.pop()}},{key:"getCurrent",value:function(){var t=this.viewPorts;return t[t.length-1]}},{key:"computeSize",value:function(t){return"number"==typeof t?t:"x"===t?this.width:"y"===t?this.height:m(x(this.width,2)+x(this.height,2))/m(2)}},{key:"width",get:function(){return this.getCurrent().width}},{key:"height",get:function(){return this.getCurrent().height}}]),lo),eo=(Ge(uo,[{key:"angleTo",value:function(t){return y(t.y-this.y,t.x-this.x)}},{key:"applyTransform",value:function(t){var e=this.x,n=this.y,r=e*t[0]+n*t[2]+t[4],t=e*t[1]+n*t[3]+t[5];this.x=r,this.y=t}}],[{key:"parse",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=b(t),t=In(n,2),n=t[0],t=t[1];return new uo(void 0===n?e:n,void 0===t?e:t)}},{key:"parseScale",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=b(t),t=In(n,2),n=t[0],n=void 0===n?e:n,t=t[1];return new uo(n,void 0===t?n:t)}},{key:"parsePath",value:function(t){for(var e=b(t),n=e.length,r=[],i=0;i<n;i+=2)r.push(new uo(e[i],e[i+1]));return r}}]),uo),no=(Ge(so,[{key:"isWorking",value:function(){return this.working}},{key:"start",value:function(){var t,e,n;this.working||(n=this.screen,t=this.onClick,e=this.onMouseMove,(n=n.ctx.canvas).onclick=t,n.onmousemove=e,this.working=!0)}},{key:"stop",value:function(){var t;this.working&&(t=this.screen.ctx.canvas,this.working=!1,t.onclick=null,t.onmousemove=null)}},{key:"hasEvents",value:function(){return this.working&&0<this.events.length}},{key:"runEvents",value:function(){var t,i,e;this.working&&(e=this.screen,t=this.events,i=this.eventElements,(e=e.ctx.canvas.style)&&(e.cursor=""),t.forEach(function(t,e){for(var n=t.run,r=i[e];r;)n(r),r=r.parent}),this.events=[],this.eventElements=[])}},{key:"checkPath",value:function(r,i){var t,a;this.working&&i&&(t=this.events,a=this.eventElements,t.forEach(function(t,e){var n=t.x,t=t.y;!a[e]&&i.isPointInPath&&i.isPointInPath(n,t)&&(a[e]=r)}))}},{key:"checkBoundingBox",value:function(r,i){var t,a;this.working&&i&&(t=this.events,a=this.eventElements,t.forEach(function(t,e){var n=t.x,t=t.y;!a[e]&&i.isPointInBox(n,t)&&(a[e]=r)}))}},{key:"mapXY",value:function(t,e){for(var n=this.screen,r=n.window,n=n.ctx,i=new eo(t,e),a=n.canvas;a;)i.x-=a.offsetLeft,i.y-=a.offsetTop,a=a.offsetParent;return r.scrollX&&(i.x+=r.scrollX),r.scrollY&&(i.y+=r.scrollY),i}},{key:"onClick",value:function(t){var e=this.mapXY((t||event).clientX,(t||event).clientY),t=e.x,e=e.y;this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onClick&&t.onClick()}})}},{key:"onMouseMove",value:function(t){var e=this.mapXY((t||event).clientX,(t||event).clientY),t=e.x,e=e.y;this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onMouseMove&&t.onMouseMove()}})}}]),so),ro="undefined"==typeof window?null:window,io="undefined"==typeof fetch?null:fetch.bind(window),ao=(Ge(oo,[{key:"wait",value:function(t){this.waits.push(t)}},{key:"ready",value:function(){return this.readyPromise||Promise.resolve()}},{key:"isReady",value:function(){if(this.isReadyLock)return!0;var t=this.waits.every(function(t){return t()});return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t}},{key:"setDefaults",value:function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}},{key:"setViewBox",value:function(t){var e=t.document,n=t.ctx,r=t.aspectRatio,i=t.width,a=t.desiredWidth,o=t.height,s=t.desiredHeight,u=t.minX,l=void 0===u?0:u,c=t.minY,h=void 0===c?0:c,f=t.refX,g=t.refY,d=t.clip,u=t.clipX,c=void 0===u?0:u,u=t.clipY,t=void 0===u?0:u,u=w(r).replace(/^defer\s/,"").split(" "),r=In(u,2),u=r[0]||"xMidYMid",r=r[1]||"meet",p=i/a,y=o/s,v=P(p,y),m=S(p,y),a=a,s=s;"meet"===r&&(a*=v,s*=v),"slice"===r&&(a*=m,s*=m);var x,b,f=new Ka(e,"refX",f),e=new Ka(e,"refY",g),g=f.hasValue()&&e.hasValue();switch(g&&n.translate(-v*f.getPixels("x"),-v*e.getPixels("y")),void 0!==d&&d&&(b=v*c,x=v*t,n.beginPath(),n.moveTo(b,x),n.lineTo(i,x),n.lineTo(i,o),n.lineTo(b,o),n.closePath(),n.clip()),g||(t="meet"===r&&v===y,x="slice"===r&&m===y,b="meet"===r&&v===p,g="slice"===r&&m===p,/^xMid/.test(u)&&(t||x)&&n.translate(i/2-a/2,0),/YMid$/.test(u)&&(b||g)&&n.translate(0,o/2-s/2),/^xMax/.test(u)&&(t||x)&&n.translate(i-a,0),/YMax$/.test(u)&&(b||g)&&n.translate(0,o-s)),!0){case"none"===u:n.scale(p,y);break;case"meet"===r:n.scale(v,v);break;case"slice"===r:n.scale(m,m)}n.translate(-l,-h)}},{key:"start",value:function(e){var n,r,i,a=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.enableRedraw,s=t.ignoreMouse,u=t.ignoreAnimation,l=t.ignoreDimensions,c=void 0!==l&&l,l=t.ignoreClear,h=void 0!==l&&l,f=t.forceRedraw,g=t.scaleWidth,d=t.scaleHeight,p=t.offsetX,y=t.offsetY,t=this.FRAMERATE,v=this.mouse,m=1e3/t;this.frameDuration=m,this.readyPromise=new Promise(function(t){a.resolveReady=t}),this.isReady()&&this.render(e,c,h,g,d,p,y),void 0!==o&&o&&(r=n=Date.now(),o=function t(){n=Date.now(),m<=(i=n-r)&&(r=n-i%m,a.shouldUpdate(void 0!==u&&u,f)&&(a.render(e,c,h,g,d,p,y),v.runEvents())),a.intervalId=Ua(t)},void(i=0)!==s&&s||v.start(),this.intervalId=Ua(o))}},{key:"stop",value:function(){this.intervalId&&(Ua.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}},{key:"shouldUpdate",value:function(t,e){if(!t){var n=this.frameDuration;if(this.animations.reduce(function(t,e){return e.update(n)||t},!1))return!0}return!("function"!=typeof e||!e())||!this.isReadyLock&&this.isReady()||!!this.mouse.hasEvents()}},{key:"render",value:function(t,e,n,r,i,a,o){var s=this.CLIENT_WIDTH,u=this.CLIENT_HEIGHT,l=this.viewPort,c=this.ctx,h=this.isFirstRender,f=c.canvas;l.clear(),f.width&&f.height?l.setCurrent(f.width,f.height):l.setCurrent(s,u);var g=t.getStyle("width"),s=t.getStyle("height");!e&&(h||"number"!=typeof r&&"number"!=typeof i)&&(g.hasValue()&&(f.width=g.getPixels("x"),f.style&&(f.style.width="".concat(f.width,"px"))),s.hasValue()&&(f.height=s.getPixels("y"),f.style&&(f.style.height="".concat(f.height,"px"))));var d,u=f.clientWidth||f.width,f=f.clientHeight||f.height;e&&g.hasValue()&&s.hasValue()&&(u=g.getPixels("x"),f=s.getPixels("y")),l.setCurrent(u,f),"number"==typeof a&&t.getAttribute("x",!0).setValue(a),"number"==typeof o&&t.getAttribute("y",!0).setValue(o),"number"!=typeof r&&"number"!=typeof i||(l=b(t.getAttribute("viewBox").getString()),o=a=0,"number"==typeof r&&((d=t.getStyle("width")).hasValue()?a=d.getPixels("x")/r:isNaN(l[2])||(a=l[2]/r)),"number"==typeof i&&((d=t.getStyle("height")).hasValue()?o=d.getPixels("y")/i:isNaN(l[3])||(o=l[3]/i)),a=a||o,o=o||a,t.getAttribute("width",!0).setValue(r),t.getAttribute("height",!0).setValue(i),(i=t.getStyle("transform",!0,!0)).setValue("".concat(i.getString()," scale(").concat(1/a,", ").concat(1/o,")"))),n||c.clearRect(0,0,u,f),t.render(c),h&&(this.isFirstRender=!1)}}]),oo);function oo(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.fetch,n=void 0===n?io:n,e=e.window,e=void 0===e?ro:e;$r(this,oo),this.ctx=t,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new to,this.mouse=new no(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=e,this.fetch=n}function so(t){$r(this,so),this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}function uo(t,e){$r(this,uo),this.x=t,this.y=e}function lo(){$r(this,lo),this.viewPorts=[]}ao.defaultWindow=ro,ao.defaultFetch=io;var co,ho,fo=ao.defaultFetch,go="undefined"==typeof DOMParser?null:DOMParser,po=(Ge(wo,[{key:"parse",value:(ho=Fr(Br.mark(function t(e){return Br.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(/^</.test(e))return t.abrupt("return",this.parseFromString(e));t.next=2;break;case 2:return t.abrupt("return",this.load(e));case 3:case"end":return t.stop()}},t,this)})),function(){return ho.apply(this,arguments)})},{key:"parseFromString",value:function(e){try{return(new this.DOMParser).parseFromString(e,"image/svg+xml")}catch(t){return(new this.DOMParser).parseFromString(e,"text/xml")}}},{key:"load",value:(co=Fr(Br.mark(function t(e){var n;return Br.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch(e);case 2:return n=t.sent,t.next=5,n.text();case 5:return n=t.sent,t.abrupt("return",this.parseFromString(n));case 7:case"end":return t.stop()}},t,this)})),function(){return co.apply(this,arguments)})}]),wo),yo=i(function(e){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}e.exports=n}),vo=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},mo=function(t,e){return!e||"object"!==yo(e)&&"function"!=typeof e?vo(t):e},xo=i(function(e){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}e.exports=n}),bo=i(function(n){function r(t,e){return n.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}n.exports=r}),_e=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bo(t,e)},$e=!ki(function(t){Array.from(t)});function wo(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.fetch,e=void 0===e?fo:e,t=t.DOMParser,t=void 0===t?go:t;$r(this,wo),this.fetch=e,this.DOMParser=t}ae({target:"Array",stat:!0,forced:$e},{from:function(t){var e,n,r,i,a,o=ue(t),s="function"==typeof this?this:Array,u=arguments.length,l=1<u?arguments[1]:void 0,c=void 0!==l,h=0,t=oi(o);if(c&&(l=se(l,2<u?arguments[2]:void 0,2)),null==t||s==Array&&ai(t))for(n=new s(e=ee(o.length));h<e;h++)jr(n,h,c?l(o[h],h):o[h]);else for(a=(i=t.call(o)).next,n=new s;!(r=a.call(i)).done;h++)jr(n,h,c?si(i,l,[r.value,h],!0):r.value);return n.length=h,n}});var ko=le("unscopables"),So=Array.prototype;null==So[ko]&&Tt.f(So,ko,{configurable:!0,value:tr(null)});var He=function(t){So[ko][t]=!0},Po=pe.includes;ae({target:"Array",proto:!0},{includes:function(t){return Po(this,t,1<arguments.length?arguments[1]:void 0)}}),He("includes");var Ao=Be.some;ae({target:"Array",proto:!0,forced:Cn("some")},{some:function(t){return Ao(this,t,1<arguments.length?arguments[1]:void 0)}});var Eo=le("match");ae({target:"String",proto:!0,forced:!function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[Eo]=!1,"/./"[e](n)}catch(e){}}}("includes")},{includes:function(t){return!!~(rt(this)+"").indexOf(function(t){if(Sa(t))throw TypeError("The method doesn't accept regular expressions");return t}(t),1<arguments.length?arguments[1]:void 0)}});var Hr=!tt(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Co=Yt("IE_PROTO"),To=Object.prototype,Oo=Hr?Object.getPrototypeOf:function(t){return t=ue(t),st(t,Co)?t[Co]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?To:null},Xr=le("iterator"),Ue=!1;[].keys&&("next"in(Ys=[].keys())?(pu=Oo(Oo(Ys)))!==Object.prototype&&(Au=pu):Ue=!0),st(Au=null==Au?{}:Au,Xr)||Ot(Au,Xr,function(){return this});function Vo(){return this}function Lo(){return this}function No(t,e,n,r,i,a,o){function s(t){return t===i&&g?g:!Do&&t in h?h[t]:"keys"===t||t===Mo||t===Bo?function(){return new n(this,t)}:function(){return new n(this)}}!function(t,e,n){e+=" Iterator";t.prototype=tr(Ro,{next:et(1,n)}),Zn(t,e,!1),li[e]=Vo}(n,e,r);var u,l,c=!1,h=t.prototype,f=h[zo]||h["@@iterator"]||i&&h[i],g=!Do&&f||s(i);if((r="Array"==e&&h.entries||f)&&(t=Oo(r.call(new t)),jo!==Object.prototype&&t.next&&(Oo(t)!==jo&&(Io?Io(t,jo):"function"!=typeof t[zo]&&Ot(t,zo,Lo)),Zn(t,e+" Iterator",!0))),i==Mo&&f&&f.name!==Mo&&(c=!0,g=function(){return f.call(this)}),h[zo]!==g&&Ot(h,zo,g),li[e]=g,i)if(u={values:s(Mo),keys:a?g:s("keys"),entries:s(Bo)},o)for(l in u)!Do&&!c&&l in h||fe(h,l,u[l]);else ae({target:e,proto:!0,forced:Do||c},u);return u}var Ye={IteratorPrototype:Au,BUGGY_SAFARI_ITERATORS:Ue},Ro=Ye.IteratorPrototype,Io=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(r){}return function(t,e){return lt(t),function(t){if(!at(t)&&null!==t)throw TypeError("Can't set "+t+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),jo=Ye.IteratorPrototype,Do=Ye.BUGGY_SAFARI_ITERATORS,zo=le("iterator"),Mo="values",Bo="entries",Fo=kn.charAt,_o="String Iterator",$o=he.set,Go=he.getterFor(_o);No(String,"String",function(t){$o(this,{type:_o,string:t+"",index:0})},function(){var t=Go(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=Fo(e,n),t.index+=n.length,{value:n,done:!1})});var qo,Wo=tn.trim;ae({target:"String",proto:!0,forced:(qo="trim",tt(function(){return"\t\n\v\f\r                　\u2028\u2029\ufeff"[qo]()||"​᠎"!="​᠎"[qo]()||"\t\n\v\f\r                　\u2028\u2029\ufeff"[qo].name!==qo}))},{trim:function(){return Wo(this)}});Ge(Ho,[{key:"getAttribute",value:function(t){var e=this.attributes[t];if(e||!(!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1]))return e||Ka.empty(this.document);e=new Ka(this.document,t,"");return this.attributes[t]=e}},{key:"getHrefAttribute",value:function(){for(var t in this.attributes)if("href"==t||/:href$/.test(t))return this.attributes[t];return Ka.empty(this.document)}},{key:"getStyle",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],r=this.styles[t];if(r)return r;var i=this.getAttribute(t);if(i&&i.hasValue())return this.styles[t]=i;if(!n){n=this.parent;if(n){n=n.getStyle(t);if(n&&n.hasValue())return n}}if(e){e=new Ka(this.document,t,"");return this.styles[t]=e}return r||Ka.empty(this.document)}},{key:"render",value:function(t){var e;"none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()&&(t.save(),this.getStyle("mask").hasValue()?(e=this.getStyle("mask").getDefinition())&&e.apply(t,this):"none"!==this.getStyle("filter").getValue("none")?(e=this.getStyle("filter").getDefinition())&&e.apply(t,this):(this.setContext(t),this.renderChildren(t),this.clearContext(t)),t.restore())}},{key:"setContext",value:function(){}},{key:"clearContext",value:function(){}},{key:"renderChildren",value:function(e){this.children.forEach(function(t){t.render(e)})}},{key:"addChild",value:function(t){t=t instanceof Ho?t:this.document.createElement(t);t.parent=this,Ho.ignoreChildTypes.includes(t.type)||this.children.push(t)}},{key:"matchesSelector",value:function(e){var t=this.node;if("function"==typeof t.matches)return t.matches(e);t=t.getAttribute("class");return!(!t||""===t)&&t.split(" ").some(function(t){if(".".concat(t)===e)return!0})}},{key:"addStylesFromStyleDefinition",value:function(){var t,e=this.document,n=e.styles,r=e.stylesSpecificity;for(t in n)if("@"!==t[0]&&this.matchesSelector(t)){var i=n[t],a=r[t];if(i)for(var o in i){var s=this.stylesSpecificity[o];(s=void 0===s?"000":s)<=a&&(this.styles[o]=i[o],this.stylesSpecificity[o]=a)}}}}]),Qe=Ho;function Ho(n,t){var e,r,i=this,a=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];$r(this,Ho),this.document=n,this.node=t,this.captureTextNodes=a,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],t&&1===t.nodeType&&(Array.from(t.attributes).forEach(function(t){var e=l(t.nodeName);i.attributes[e]=new Ka(n,e,t.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(function(t){return t.trim()}).forEach(function(t){var e;t&&(e=t.split(":"),e=(t=In(e,2))[0],t=t[1],i.styles[e]=new Ka(n,e.trim(),t.trim()))}),e=n.definitions,(r=this.getAttribute("id")).hasValue()&&!e[r.getValue()]&&(e[r.getValue()]=this),Array.from(t.childNodes).forEach(function(t){1===t.nodeType?i.addChild(t):!a||3!==t.nodeType&&4!==t.nodeType||0<(t=n.createTextNode(t)).getText().length&&i.addChild(t)}))}Qe.ignoreChildTypes=["title"];var Xo=(_e(Zo,Qe),Zo),Uo=pe.indexOf,Yo=[].indexOf,Qo=!!Yo&&1/[1].indexOf(1,-0)<0,Je=Cn("indexOf");function Zo(t,e,n){return $r(this,Zo),n=mo(this,xo(Zo).call(this,t,e,n)),console.warn("Element ".concat(e.nodeName," not yet implemented.")),n}ae({target:"Array",proto:!0,forced:Qo||Je},{indexOf:function(t){return Qo?Yo.apply(this,arguments)||0:Uo(this,t,1<arguments.length?arguments[1]:void 0)}});var Ko=[].reverse,rn=[1,2];ae({target:"Array",proto:!0,forced:rn+""==rn.reverse()+""},{reverse:function(){return Ve(this)&&(this.length=this.length),Ko.call(this)}});var Jo=i(function(r){function i(t,e,n){return r.exports=i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xo(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}},i(t,e,n||t)}r.exports=i}),ts=(Ge(es,[{key:"toString",value:function(){return[(t=this.fontStyle)&&("normal"===(t=t.trim().toLowerCase())||"italic"===t||"oblique"===t||"inherit"===t||"initial"===t||"unset"===t||/^oblique\s+(-|)\d+deg$/.test(t))?t:"",this.fontVariant,(t=this.fontWeight)&&("normal"===(t=t.trim().toLowerCase())||"bold"===t||"lighter"===t||"bolder"===t||"inherit"===t||"initial"===t||"unset"===t||/^[\d.]+$/.test(t))?t:"",this.fontSize,(t=this.fontFamily,"undefined"==typeof process?t:t.trim().split(",").map(G).join(","))].join(" ").trim();var t}}],[{key:"parse",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length?arguments[1]:void 0,n="",r="",i="",a="",o="",t=w(t).trim().split(" "),s={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return t.forEach(function(t){switch(!0){case!s.fontStyle&&es.styles.includes(t):"inherit"!==t&&(n=t),s.fontStyle=!0;break;case!s.fontVariant&&es.variants.includes(t):"inherit"!==t&&(r=t),s.fontStyle=!0,s.fontVariant=!0;break;case!s.fontWeight&&es.weights.includes(t):"inherit"!==t&&(i=t),s.fontStyle=!0,s.fontVariant=!0,s.fontWeight=!0;break;case!s.fontSize:var e;"inherit"!==t&&(e=t.split("/"),e=In(e,1),a=e[0]),s.fontStyle=!0,s.fontVariant=!0,s.fontWeight=!0,s.fontSize=!0;break;default:"inherit"!==t&&(o+=t)}}),new es(n,r,i,a,o,e)}}]),es);function es(t,e,n,r,i,a){$r(this,es);a=a?"string"==typeof a?es.parse(a):a:{};this.fontFamily=i||a.fontFamily,this.fontSize=r||a.fontSize,this.fontStyle=t||a.fontStyle,this.fontWeight=n||a.fontWeight,this.fontVariant=e||a.fontVariant}ts.styles="normal|italic|oblique|inherit",ts.variants="normal|small-caps|inherit",ts.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";function ns(t,e,n){var r,i;return Io&&"function"==typeof(r=e.constructor)&&r!==n&&at(i=r.prototype)&&i!==n.prototype&&Io(t,i),t}function rs(t){var e,n,r,i,a,o,s,u=ot(t,!1);if("string"==typeof u&&2<u.length)if(43===(e=(u=os(u)).charCodeAt(0))||45===e){if(88===(t=u.charCodeAt(2))||120===t)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+u}for(a=(i=u.slice(2)).length,o=0;o<a;o++)if((s=i.charCodeAt(o))<48||r<s)return NaN;return parseInt(i,n)}return+u}var vi=xe.f,is=Et.f,as=Tt.f,os=tn.trim,ss="Number",us=gt[ss],ls=us.prototype,cs=nt(tr(ls))==ss;if(Te(ss,!us(" 0o1")||!us("0b1")||us("+0x1"))){for(var hs,fs=function(t){var t=arguments.length<1?0:t,e=this;return e instanceof fs&&(cs?tt(function(){ls.valueOf.call(e)}):nt(e)!=ss)?ns(new us(rs(t)),e,fs):rs(t)},gs=dt?vi(us):["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY","EPSILON","isFinite","isInteger","isNaN","isSafeInteger","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","parseFloat","parseInt","isInteger"],ds=0;gs.length>ds;ds++)st(us,hs=gs[ds])&&!st(fs,hs)&&as(fs,hs,is(us,hs));(fs.prototype=ls).constructor=fs,fe(gt,ss,fs)}var ps=(Ge(xs,[{key:"addPoint",value:function(t,e){void 0!==t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),void 0!==e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}},{key:"addX",value:function(t){this.addPoint(t,null)}},{key:"addY",value:function(t){this.addPoint(null,t)}},{key:"addBoundingBox",value:function(t){var e,n,r;t&&(e=t.x1,n=t.y1,r=t.x2,t=t.y2,this.addPoint(e,n),this.addPoint(r,t))}},{key:"sumCubic",value:function(t,e,n,r,i){return x(1-t,3)*e+3*x(1-t,2)*t*n+3*(1-t)*x(t,2)*r+x(t,3)*i}},{key:"bezierCurveAdd",value:function(t,e,n,r,i){var a,o,s=6*e-12*n+6*r,u=-3*e+9*n-9*r+3*i,l=3*n-3*e;0!=u?(a=x(s,2)-4*l*u)<0||(0<(o=(-s+m(a))/(2*u))&&o<1&&(t?this.addX(this.sumCubic(o,e,n,r,i)):this.addY(this.sumCubic(o,e,n,r,i))),0<(u=(-s-m(a))/(2*u))&&u<1&&(t?this.addX(this.sumCubic(u,e,n,r,i)):this.addY(this.sumCubic(u,e,n,r,i)))):0==s||0<(s=-l/s)&&s<1&&(t?this.addX(this.sumCubic(s,e,n,r,i)):this.addY(this.sumCubic(s,e,n,r,i)))}},{key:"addBezierCurve",value:function(t,e,n,r,i,a,o,s){this.addPoint(t,e),this.addPoint(o,s),this.bezierCurveAdd(!0,t,n,i,o),this.bezierCurveAdd(!1,e,r,a,s)}},{key:"addQuadraticCurve",value:function(t,e,n,r,i,a){n=t+2/3*(n-t),r=e+2/3*(r-e);this.addBezierCurve(t,e,n,n+1/3*(i-t),r,r+1/3*(a-e),i,a)}},{key:"isPointInBox",value:function(t,e){var n=this.x1,r=this.y1,i=this.x2,a=this.y2;return n<=t&&t<=i&&r<=e&&e<=a}},{key:"x",get:function(){return this.x1}},{key:"y",get:function(){return this.y1}},{key:"width",get:function(){return this.x2-this.x1}},{key:"height",get:function(){return this.y2-this.y1}}]),xs),Fe="toString",ys=RegExp.prototype,vs=ys[Fe],wn=tt(function(){return"/a/b"!=vs.call({source:"a",flags:"b"})}),ms=vs.name!=Fe;function xs(){var t=Number.NaN,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t,t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t;$r(this,xs),this.x1=e,this.y1=n,this.x2=r,this.y2=t,this.addPoint(e,n),this.addPoint(r,t)}(wn||ms)&&fe(RegExp.prototype,Fe,function(){var t=lt(this),e=t.source+"",n=t.flags;return"/"+e+"/"+((void 0===n&&t instanceof RegExp&&!("flags"in ys)?an.call(t):n)+"")},{unsafe:!0});var bs=(Ge(Os,[{key:"apply",value:function(t){var e=this.point,n=e.x,e=e.y;t.translate(n||0,e||0)}},{key:"unapply",value:function(t){var e=this.point,n=e.x,e=e.y;t.translate(-1*n||0,-1*e||0)}},{key:"applyToPoint",value:function(t){var e=this.point,n=e.x,e=e.y;t.applyTransform([1,0,0,1,n||0,e||0])}}]),Os),ft=(Ge(Ts,[{key:"apply",value:function(t){var e=this.cx,n=this.cy,r=this.angle;t.translate(e,n),t.rotate(r.getRadians()),t.translate(-e,-n)}},{key:"unapply",value:function(t){var e=this.cx,n=this.cy,r=this.angle;t.translate(e,n),t.rotate(-1*r.getRadians()),t.translate(-e,-n)}},{key:"applyToPoint",value:function(t){var e=this.cx,n=this.cy,r=this.angle.getRadians();t.applyTransform([1,0,0,1,e||0,n||0]),t.applyTransform([v(r),p(r),-p(r),v(r),0,0]),t.applyTransform([1,0,0,1,-e||0,-n||0])}}]),Ts),On=(Ge(Cs,[{key:"apply",value:function(t){var e=this.scale,n=e.x,e=e.y;t.scale(n,e||n)}},{key:"unapply",value:function(t){var e=this.scale,n=e.x,e=e.y;t.scale(1/n,1/e||n)}},{key:"applyToPoint",value:function(t){var e=this.scale,n=e.x,e=e.y;t.applyTransform([n||0,0,0,e||0,0,0])}}]),Cs),on=(Ge(Es,[{key:"apply",value:function(t){var e=this.matrix;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}},{key:"unapply",value:function(t){var e=this.matrix,n=e[0],r=e[2],i=e[4],a=e[1],o=e[3],s=e[5],e=1/(n*(+o-0*s)-r*(+a-0*s)+i*(0*a-0*o));t.transform(e*(+o-0*s),e*(0*s-+a),e*(0*i-+r),e*(+n-0*i),e*(r*s-i*o),e*(i*a-n*s))}},{key:"applyToPoint",value:function(t){t.applyTransform(this.matrix)}}]),Es),ln=(_e(As,on),As),qt=(_e(Ps,ln),Ps),Gt=(_e(Ss,ln),Ss),ws=(Ge(ks,[{key:"apply",value:function(t){for(var e=this.transforms,n=e.length,r=0;r<n;r++)e[r].apply(t)}},{key:"unapply",value:function(t){for(var e=this.transforms,n=e.length-1;0<=n;n--)e[n].unapply(t)}},{key:"applyToPoint",value:function(t){for(var e=this.transforms,n=e.length,r=0;r<n;r++)e[r].applyToPoint(t)}}],[{key:"fromElement",value:function(t,e){var n=e.getStyle("transform",!1,!0),e=e.getStyle("transform-origin",!1,!0);return n.hasValue()?new ks(t,n.getString(),e.getString()):null}}]),ks);function ks(t,e,n){var r=this;$r(this,ks),this.document=t,this.transforms=[];var e=w(e).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),i=n?b(n):[];e.forEach(function(t){var e;"none"!==t&&(t=(e=t).split("("),t=(e=In(t,2))[0],e=e[1],t=[t.trim(),e.trim().replace(")","")],t=(e=In(t,2))[0],e=e[1],void 0!==(t=ks.transformTypes[t])&&r.transforms.push(new t(r.document,e,i)))})}function Ss(t,e){return $r(this,Ss),(e=mo(this,xo(Ss).call(this,t,e))).type="skewY",e.matrix=[1,n(e.angle.getRadians()),0,1,0,0],e}function Ps(t,e){return $r(this,Ps),(e=mo(this,xo(Ps).call(this,t,e))).type="skewX",e.matrix=[1,0,n(e.angle.getRadians()),1,0,0],e}function As(t,e){var n;return $r(this,As),(n=mo(this,xo(As).call(this,t,e))).type="skew",n.angle=null,n.angle=new Ka(t,"angle",e),n}function Es(t,e){$r(this,Es),this.type="matrix",this.matrix=[],this.matrix=b(e)}function Cs(t,e){$r(this,Cs),this.type="scale",this.scale=null;e=eo.parseScale(e);0!==e.x&&0!==e.y||(e.x=$n,e.y=$n),this.scale=e}function Ts(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];$r(this,Ts),this.type="rotate",this.angle=null,this.cx=0,this.cy=0;e=b(e);this.angle=new Ka(t,"angle",e[0]),this.cx=(e[1]||0)+(n[0]||0),this.cy=(e[2]||0)+(n[1]||0)}function Os(t,e){$r(this,Os),this.type="translate",this.point=null,this.point=eo.parse(e)}ws.transformTypes={translate:bs,rotate:ft,scale:On,matrix:on,skewX:qt,skewY:Gt};var Pi=(_e(Is,Qe),Ge(Is,[{key:"calculateOpacity",value:function(){for(var t,e=1,n=this;n;)(t=n.getStyle("opacity",!1,!0)).hasValue()&&(e*=t.getNumber()),n=n.parent;return e}},{key:"setContext",value:function(t){var e,n,r,i,a,o,s,u,l,c,h;!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1]||(n=this.getStyle("fill"),r=this.getStyle("fill-opacity"),i=this.getStyle("stroke"),o=this.getStyle("stroke-opacity"),n.isUrlDefinition()?(e=n.getFillStyleDefinition(this,r))&&(t.fillStyle=e):n.hasValue()&&("currentColor"===n.getString()&&n.setValue(this.getStyle("color").getValue()),"inherit"!==(n=n.getString())&&(t.fillStyle="none"===n?"rgba(0,0,0,0)":n)),r.hasValue()&&(r=new Ka(this.document,"fill",t.fillStyle).addOpacity(r).getString(),t.fillStyle=r),i.isUrlDefinition()?(s=i.getFillStyleDefinition(this,o))&&(t.strokeStyle=s):i.hasValue()&&("currentColor"===i.getString()&&i.setValue(this.getStyle("color").getValue()),"inherit"!==(a=i.getString())&&(t.strokeStyle="none"===a?"rgba(0,0,0,0)":a)),o.hasValue()&&(h=new Ka(this.document,"stroke",t.strokeStyle).addOpacity(o).getString(),t.strokeStyle=h),(s=this.getStyle("stroke-width")).hasValue()&&(l=s.getPixels(),t.lineWidth=l||$n),i=this.getStyle("stroke-linecap"),a=this.getStyle("stroke-linejoin"),o=this.getStyle("stroke-miterlimit"),h=this.getStyle("paint-order"),s=this.getStyle("stroke-dasharray"),l=this.getStyle("stroke-dashoffset"),i.hasValue()&&(t.lineCap=i.getString()),a.hasValue()&&(t.lineJoin=a.getString()),o.hasValue()&&(t.miterLimit=o.getNumber()),h.hasValue()&&(t.paintOrder=h.getValue()),s.hasValue()&&"none"!==s.getString()&&(u=b(s.getString()),void 0===t.setLineDash?void 0===t.webkitLineDash?void 0===t.mozDash||1===u.length&&0===u[0]||(t.mozDash=u):t.webkitLineDash=u:t.setLineDash(u),c=l.getPixels(),void 0===t.lineDashOffset?void 0===t.webkitLineDashOffset?void 0!==t.mozDashOffset&&(t.mozDashOffset=c):t.webkitLineDashOffset=c:t.lineDashOffset=c)),this.modifiedEmSizeStack=!1,void 0!==t.font&&(h=this.getStyle("font"),s=this.getStyle("font-style"),u=this.getStyle("font-variant"),l=this.getStyle("font-weight"),f=this.getStyle("font-size"),c=this.getStyle("font-family"),h=new ts(s.getString(),u.getString(),l.getString(),f.hasValue()?"".concat(f.getPixels(!0),"px"):"",c.getString(),ts.parse(h.getString(),t.font)),s.setValue(h.fontStyle),u.setValue(h.fontVariant),l.setValue(h.fontWeight),f.setValue(h.fontSize),c.setValue(h.fontFamily),t.font=h.toString(),f.isPixels()&&(this.document.emSize=f.getPixels(),this.modifiedEmSizeStack=!0));var f=ws.fromElement(this.document,this);f&&f.apply(t);f=this.getStyle("clip-path",!1,!0);!f.hasValue()||(f=f.getDefinition())&&f.apply(t),t.globalAlpha=this.calculateOpacity()}},{key:"clearContext",value:function(t){Jo(xo(Is.prototype),"clearContext",this).call(this,t),this.modifiedEmSizeStack&&this.document.popEmSize()}}]),Is),Ne=(_e(Rs,Pi),Ge(Rs,[{key:"setContext",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];Jo(xo(Rs.prototype),"setContext",this).call(this,t,e);e=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();e&&(t.textBaseline=e)}},{key:"initializeCoordinates",value:function(t){this.x=this.getAttribute("x").getPixels("x"),this.y=this.getAttribute("y").getPixels("y");var e=this.getAttribute("dx"),n=this.getAttribute("dy");e.hasValue()&&(this.x+=e.getPixels("x")),n.hasValue()&&(this.y+=n.getPixels("y")),this.x+=this.getAnchorDelta(t,this,0)}},{key:"getBoundingBox",value:function(n){var r=this;if("text"!==this.type)return this.getTElementBoundingBox(n);this.initializeCoordinates(n);var i=null;return this.children.forEach(function(t,e){e=r.getChildBoundingBox(n,r,r,e);i?i.addBoundingBox(e):i=e}),i}},{key:"getFontSize",value:function(){var t=this.document,e=this.parent,t=ts.parse(t.ctx.font).fontSize;return e.getStyle("font-size").getNumber(t)}},{key:"getTElementBoundingBox",value:function(t){var e=this.getFontSize();return new ps(this.x,this.y-e,this.x+this.measureText(t),this.y)}},{key:"getGlyph",value:function(t,e,n){var r,i,a=e[n],o=null;return t.isArabic?(r=e.length,i=e[n-1],e=e[n+1],void 0!==t.glyphs[a]&&((o=t.glyphs[a][0<n&&" "!==i&&(n===r-1||" "===e)?"initial":0<n&&" "!==i&&n<r-2&&" "!==e?"medial":(0===n||" "===i)&&n<r-2&&" "!==e?"terminal":"isolated"])||"glyph"!==t.glyphs[a].type||(o=t.glyphs[a]))):o=t.glyphs[a],o=o||t.missingGlyph}},{key:"getText",value:function(){return""}},{key:"getTextFromNode",value:function(t){var e=t||this.node,n=Array.from(e.parentNode.childNodes),t=n.indexOf(e),n=n.length-1,e=w(e.value||e.text||e.textContent||"");return 0===t&&(e=s(e)),e=t===n?u(e):e}},{key:"renderChildren",value:function(n){var t,r=this;"text"===this.type?(this.initializeCoordinates(n),this.children.forEach(function(t,e){r.renderChild(n,r,r,e)}),(t=this.document.screen.mouse).isWorking()&&t.checkBoundingBox(this,this.getBoundingBox(n))):this.renderTElementChildren(n)}},{key:"renderTElementChildren",value:function(t){var e=this.document,n=this.parent,r=this.getText(),i=n.getStyle("font-family").getDefinition();if(i)for(var a,o=i.fontFace.unitsPerEm,s=ts.parse(e.ctx.font),u=n.getStyle("font-size").getNumber(s.fontSize),l=n.getStyle("font-style").getString(s.fontStyle),c=u/o,h=i.isRTL?r.split("").reverse().join(""):r,f=b(n.getAttribute("dx").getString()),g=h.length,d=0;d<g;d++){a=this.getGlyph(i,h,d),t.translate(this.x,this.y),t.scale(c,-c);var p=t.lineWidth;t.lineWidth=t.lineWidth*o/u,"italic"===l&&t.transform(1,0,.4,1,0,0),a.render(t),"italic"===l&&t.transform(1,0,-.4,1,0,0),t.lineWidth=p,t.scale(1/c,-1/c),t.translate(-this.x,-this.y),this.x+=u*(a.horizAdvX||i.horizAdvX)/o,void 0===f[d]||isNaN(f[d])||(this.x+=f[d])}else{s=this.x,n=this.y;"stroke"===t.paintOrder?(t.strokeStyle&&t.strokeText(r,s,n),t.fillStyle&&t.fillText(r,s,n)):(t.fillStyle&&t.fillText(r,s,n),t.strokeStyle&&t.strokeText(r,s,n))}}},{key:"getAnchorDelta",value:function(t,e,n){var r=this.getStyle("text-anchor").getString("start");if("start"===r)return 0;for(var i=e.children,a=i.length,o=null,s=0,u=n;u<a&&(o=i[u],!(n<u&&o.getAttribute("x").hasValue()||o.getAttribute("text-anchor").hasValue()));u++)s+=o.measureTextRecursive(t);return-1*("end"===r?s:s/2)}},{key:"adjustChildCoordinates",value:function(t,e,n,r){var i=n.children[r];if("function"!=typeof i.measureText)return i;var a,o=i.getAttribute("x"),s=i.getAttribute("y"),u=i.getAttribute("dx"),l=i.getAttribute("dy"),c=i.getAttribute("text-anchor").getString("start");return 0===r&&"textNode"!==i.type&&(o.hasValue()||o.setValue(e.getAttribute("x").getValue("0")),s.hasValue()||s.setValue(e.getAttribute("y").getValue("0")),u.hasValue()||u.setValue(e.getAttribute("dx").getValue("0")),l.hasValue()||l.setValue(e.getAttribute("dy").getValue("0"))),o.hasValue()?(i.x=o.getPixels("x")+e.getAnchorDelta(t,n,r),"start"!==c&&(a=i.measureTextRecursive(t),i.x+=-1*("end"===c?a:a/2)),u.hasValue()&&(i.x+=u.getPixels("x"))):("start"!==c&&(a=i.measureTextRecursive(t),e.x+=-1*("end"===c?a:a/2)),u.hasValue()&&(e.x+=u.getPixels("x")),i.x=e.x),e.x=i.x+i.measureText(t),s.hasValue()?(i.y=s.getPixels("y"),l.hasValue()&&(i.y+=l.getPixels("y"))):(l.hasValue()&&(e.y+=l.getPixels("y")),i.y=e.y),e.y=i.y,i}},{key:"getChildBoundingBox",value:function(n,r,t,e){var i=this.adjustChildCoordinates(n,r,t,e),a=i.getBoundingBox(n);return a?(i.children.forEach(function(t,e){e=r.getChildBoundingBox(n,r,i,e);a.addBoundingBox(e)}),a):null}},{key:"renderChild",value:function(n,r,t,e){var i=this.adjustChildCoordinates(n,r,t,e);i.render(n),i.children.forEach(function(t,e){r.renderChild(n,r,i,e)})}},{key:"measureTextRecursive",value:function(n){return this.children.reduce(function(t,e){return t+e.measureTextRecursive(n)},this.measureText(n))}},{key:"measureText",value:function(t){var e=this.measureCache;if(~e)return e;e=this.getText(),e=this.measureTargetText(t,e);return this.measureCache=e}},{key:"measureTargetText",value:function(t,e){if(!e.length)return 0;var n=this.parent,r=n.getStyle("font-family").getDefinition();if(r){for(var i=this.getFontSize(),a=r.isRTL?e.split("").reverse().join(""):e,o=b(n.getAttribute("dx").getString()),s=a.length,u=0,l=0;l<s;l++)u+=(this.getGlyph(r,a,l).horizAdvX||r.horizAdvX)*i/r.fontFace.unitsPerEm,void 0===o[l]||isNaN(o[l])||(u+=o[l]);return u}if(!t.measureText)return 10*e.length;t.save(),this.setContext(t,!0);e=t.measureText(e).width;return t.restore(),e}}]),Rs),pt=(_e(Ns,Ne),Ge(Ns,[{key:"getText",value:function(){return this.text}}]),Ns),Vs=(_e(Ls,pt),Ls);function Ls(){var t;return $r(this,Ls),(t=mo(this,xo(Ls).apply(this,arguments))).type="textNode",t}function Ns(t,e,n){return $r(this,Ns),(n=mo(this,xo(Ns).call(this,t,e,(this instanceof Ns?this.constructor:void 0)===Ns||n))).type="tspan",n.text=0<n.children.length?"":n.getTextFromNode(),n}function Rs(t,e,n){return $r(this,Rs),(n=mo(this,xo(Rs).call(this,t,e,(this instanceof Rs?this.constructor:void 0)===Rs||n))).type="text",n.x=0,n.y=0,n.measureCache=-1,n}function Is(){var t;return $r(this,Is),(t=mo(this,xo(Is).apply(this,arguments))).modifiedEmSizeStack=!1,t}ae({target:"Array",proto:!0},{fill:function(t){for(var e=ue(this),n=ee(e.length),r=arguments.length,i=ne(1<r?arguments[1]:void 0,n),r=2<r?arguments[2]:void 0,a=void 0===r?n:ne(r,n);i<a;)e[i++]=t;return e}}),He("fill");var js=(Ge(Xs,[{key:"reset",value:function(){this.i=-1,this.command="",this.previousCommand="",this.start=new eo(0,0),this.control=new eo(0,0),this.current=new eo(0,0),this.points=[],this.angles=[]}},{key:"isEnd",value:function(){return this.i>=this.tokens.length-1}},{key:"isCommandOrEnd",value:function(){if(this.isEnd())return!0;var t=this.i,e=this.tokens;return/^[A-Za-z]$/.test(e[t+1])}},{key:"isRelativeCommand",value:function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0;default:return!1}}},{key:"getToken",value:function(){return this.i++,this.tokens[this.i]}},{key:"getScalar",value:function(){return parseFloat(this.getToken())}},{key:"nextCommand",value:function(){this.previousCommand=this.command,this.command=this.getToken()}},{key:"getPoint",value:function(){var t=new eo(this.getScalar(),this.getScalar());return this.makeAbsolute(t)}},{key:"getAsControlPoint",value:function(){var t=this.getPoint();return this.control=t}},{key:"getAsCurrentPoint",value:function(){var t=this.getPoint();return this.current=t}},{key:"getReflectedControlPoint",value:function(){var t=this.previousCommand.toLowerCase();if("c"!==t&&"s"!==t&&"q"!==t&&"t"!==t)return this.current;var e=this.current,n=e.x,r=e.y,t=this.control,e=t.x,t=t.y;return new eo(2*n-e,2*r-t)}},{key:"makeAbsolute",value:function(t){var e,n;return this.isRelativeCommand()&&(e=(n=this.current).x,n=n.y,t.x+=e,t.y+=n),t}},{key:"addMarker",value:function(t,e,n){var r=this.points,i=this.angles;n&&0<i.length&&!i[i.length-1]&&(i[i.length-1]=r[r.length-1].angleTo(n)),this.addMarkerAngle(t,e?e.angleTo(t):null)}},{key:"addMarkerAngle",value:function(t,e){this.points.push(t),this.angles.push(e)}},{key:"getMarkerPoints",value:function(){return this.points}},{key:"getMarkerAngles",value:function(){for(var t=this.angles,e=t.length,n=0;n<e;n++)if(!t[n])for(var r=n+1;r<e;r++)if(t[r]){t[n]=t[r];break}return t}}]),Xs),Zt=(_e(Hs,Pi),Ge(Hs,[{key:"path",value:function(t){var e=this.pathParser,n=new ps;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.nextCommand(),e.command){case"M":case"m":this.pathM(t,n);break;case"L":case"l":this.pathL(t,n);break;case"H":case"h":this.pathH(t,n);break;case"V":case"v":this.pathV(t,n);break;case"C":case"c":this.pathC(t,n);break;case"S":case"s":this.pathS(t,n);break;case"Q":case"q":this.pathQ(t,n);break;case"T":case"t":this.pathT(t,n);break;case"A":case"a":this.pathA(t,n);break;case"Z":case"z":this.pathZ(t,n)}return n}},{key:"getBoundingBox",value:function(){return this.path()}},{key:"getMarkers",value:function(){var t=this.pathParser,e=t.getMarkerPoints(),n=t.getMarkerAngles();return e.map(function(t,e){return[t,n[e]]})}},{key:"renderChildren",value:function(t){this.path(t),this.document.screen.mouse.checkPath(this,t);var e=this.getStyle("fill-rule");""!==t.fillStyle&&("inherit"===e.getString("inherit")?t.fill():t.fill(e.getString())),""!==t.strokeStyle&&t.stroke();var n=this.getMarkers();if(n){var r,i=n.length-1,a=this.getStyle("marker-start"),o=this.getStyle("marker-mid"),s=this.getStyle("marker-end");if(a.isUrlDefinition()&&(e=a.getDefinition(),a=(r=In(n[0],2))[0],r=r[1],e.render(t,a,r)),o.isUrlDefinition())for(var u=o.getDefinition(),l=1;l<i;l++){var c=In(n[l],2),h=c[0],c=c[1];u.render(t,h,c)}s.isUrlDefinition()&&(r=s.getDefinition(),s=(o=In(n[i],2))[0],o=o[1],r.render(t,s,o))}}},{key:"pathM",value:function(t,e){var n=this.pathParser,r=n.getAsCurrentPoint(),i=r.x,a=r.y;for(n.addMarker(r),e.addPoint(i,a),t&&t.moveTo(i,a),n.start=n.current;!n.isCommandOrEnd();){var o=n.getAsCurrentPoint(),s=o.x,u=o.y;n.addMarker(o,n.start),e.addPoint(s,u),t&&t.lineTo(s,u)}}},{key:"pathL",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getAsCurrentPoint(),a=i.x,o=i.y;n.addMarker(i,r),e.addPoint(a,o),t&&t.lineTo(a,o)}}},{key:"pathH",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=new eo((n.isRelativeCommand()?r.x:0)+n.getScalar(),r.y);n.addMarker(i,r),n.current=i,e.addPoint(i.x,i.y),t&&t.lineTo(i.x,i.y)}}},{key:"pathV",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=new eo(r.x,(n.isRelativeCommand()?r.y:0)+n.getScalar());n.addMarker(i,r),n.current=i,e.addPoint(i.x,i.y),t&&t.lineTo(i.x,i.y)}}},{key:"pathC",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getPoint(),a=n.getAsControlPoint(),o=n.getAsCurrentPoint();n.addMarker(o,a,i),e.addBezierCurve(r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y),t&&t.bezierCurveTo(i.x,i.y,a.x,a.y,o.x,o.y)}}},{key:"pathS",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getReflectedControlPoint(),a=n.getAsControlPoint(),o=n.getAsCurrentPoint();n.addMarker(o,a,i),e.addBezierCurve(r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y),t&&t.bezierCurveTo(i.x,i.y,a.x,a.y,o.x,o.y)}}},{key:"pathQ",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getAsControlPoint(),a=n.getAsCurrentPoint();n.addMarker(a,i,i),e.addQuadraticCurve(r.x,r.y,i.x,i.y,a.x,a.y),t&&t.quadraticCurveTo(i.x,i.y,a.x,a.y)}}},{key:"pathT",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getReflectedControlPoint();n.control=i;var a=n.getAsCurrentPoint();n.addMarker(a,i,i),e.addQuadraticCurve(r.x,r.y,i.x,i.y,a.x,a.y),t&&t.quadraticCurveTo(i.x,i.y,a.x,a.y)}}},{key:"pathA",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getScalar(),a=n.getScalar(),o=n.getScalar()*(d/180),s=n.getScalar(),u=n.getScalar(),l=n.getAsCurrentPoint(),c=new eo(v(o)*(r.x-l.x)/2+p(o)*(r.y-l.y)/2,-p(o)*(r.x-l.x)/2+v(o)*(r.y-l.y)/2),h=x(c.x,2)/x(i,2)+x(c.y,2)/x(a,2);1<h&&(i*=m(h),a*=m(h));var f=(s===u?-1:1)*m((x(i,2)*x(a,2)-x(i,2)*x(c.y,2)-x(a,2)*x(c.x,2))/(x(i,2)*x(c.y,2)+x(a,2)*x(c.x,2)));isNaN(f)&&(f=0);var g=new eo(f*i*c.y/a,f*-a*c.x/i),h=new eo((r.x+l.x)/2+v(o)*g.x-p(o)*g.y,(r.y+l.y)/2+p(o)*g.x+v(o)*g.y),s=E([1,0],[(c.x-g.x)/i,(c.y-g.y)/a]),f=[(c.x-g.x)/i,(c.y-g.y)/a],r=[(-c.x-g.x)/i,(-c.y-g.y)/a],c=E(f,r);k(f,r)<=-1&&(c=d);g=1-u?1:-1,f=s+(c=1<=k(f,r)?0:c)/2*g,r=new eo(h.x+i*v(f),h.y+a*p(f));n.addMarkerAngle(r,f-g*d/2),n.addMarkerAngle(l,f-g*d),e.addPoint(l.x,l.y),!t||isNaN(s)||isNaN(c)||(g=a<i?i:a,l=a<i?1:i/a,i=a<i?a/i:1,t.translate(h.x,h.y),t.rotate(o),t.scale(l,i),t.arc(0,0,g,s,s+c,!!(1-u)),t.scale(1/l,1/i),t.rotate(-o),t.translate(-h.x,-h.y))}}},{key:"pathZ",value:function(t,e){var n=this.pathParser;t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath(),n.current=n.start}}]),Hs),Ds=(_e(Ws,Pi),Ge(Ws,[{key:"clearContext",value:function(t){Jo(xo(Ws.prototype),"clearContext",this).call(this,t),this.document.screen.viewPort.removeCurrent()}},{key:"setContext",value:function(t){var e=this.document,n=e.screen,r=e.window,i=t.canvas;n.setDefaults(t),i.style&&void 0!==t.font&&r&&void 0!==r.getComputedStyle&&(t.font=r.getComputedStyle(i).getPropertyValue("font"),(f=new Ka(e,"fontSize",ts.parse(t.font).fontSize)).hasValue()&&(e.rootEmSize=f.getPixels("y"),e.emSize=e.rootEmSize)),Jo(xo(Ws.prototype),"setContext",this).call(this,t),this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y"));var a=n.viewPort,o=a.width,s=a.height;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%");var u=this.getAttribute("refX"),l=this.getAttribute("refY"),c=this.getAttribute("viewBox"),h=c.hasValue()?b(c.getString()):null,r=!this.root&&"visible"!==this.getAttribute("overflow").getValue("hidden"),i=0,f=0,a=0,c=0;h&&(i=h[0],f=h[1]),this.root||(o=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y"),"marker"===this.type&&(a=i,c=f,f=i=0)),n.viewPort.setCurrent(o,s),h&&(o=h[2],s=h[3]),e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:n.viewPort.width,desiredWidth:o,height:n.viewPort.height,desiredHeight:s,minX:i,minY:f,refX:u.getValue(),refY:l.getValue(),clip:r,clipX:a,clipY:c}),h&&(n.viewPort.removeCurrent(),n.viewPort.setCurrent(o,s))}},{key:"resize",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],r=this.getAttribute("width",!0),i=this.getAttribute("height",!0),a=this.getAttribute("viewBox"),o=this.getAttribute("style"),s=r.getNumber(0),u=i.getNumber(0);n&&("string"==typeof n?this.getAttribute("preserveAspectRatio",!0).setValue(n):(n=this.getAttribute("preserveAspectRatio")).hasValue()&&n.setValue(n.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))),r.setValue(t),i.setValue(e),a.hasValue()||a.setValue("0 0 ".concat(s||t," ").concat(u||e)),o.hasValue()&&(u=this.getStyle("width"),o=this.getStyle("height"),u.hasValue()&&u.setValue("".concat(t,"px")),o.hasValue()&&o.setValue("".concat(e,"px")))}}]),Ws),zs=(_e(qs,Zt),Ge(qs,[{key:"path",value:function(t){var e=this.getAttribute("x").getPixels("x"),n=this.getAttribute("y").getPixels("y"),r=this.getStyle("width").getPixels("x"),i=this.getStyle("height").getPixels("y"),a=this.getAttribute("rx"),o=this.getAttribute("ry"),s=a.getPixels("x"),u=o.getPixels("y");return a.hasValue()&&!o.hasValue()&&(u=s),o.hasValue()&&!a.hasValue()&&(s=u),s=P(s,r/2),u=P(u,i/2),t&&(a=(m(2)-1)/3*4,t.beginPath(),0<i&&0<r&&(t.moveTo(e+s,n),t.lineTo(e+r-s,n),t.bezierCurveTo(e+r-s+a*s,n,e+r,n+u-a*u,e+r,n+u),t.lineTo(e+r,n+i-u),t.bezierCurveTo(e+r,n+i-u+a*u,e+r-s+a*s,n+i,e+r-s,n+i),t.lineTo(e+s,n+i),t.bezierCurveTo(e+s-a*s,n+i,e,n+i-u+a*u,e,n+i-u),t.lineTo(e,n+u),t.bezierCurveTo(e,n+u-a*u,e+s-a*s,n,e+s,n),t.closePath())),new ps(e,n,e+r,n+i)}},{key:"getMarkers",value:function(){return null}}]),qs),Wt=(_e(Gs,Zt),Ge(Gs,[{key:"path",value:function(t){var e=this.getAttribute("cx").getPixels("x"),n=this.getAttribute("cy").getPixels("y"),r=this.getAttribute("r").getPixels();return t&&0<r&&(t.beginPath(),t.arc(e,n,r,0,2*d,!1),t.closePath()),new ps(e-r,n-r,e+r,n+r)}},{key:"getMarkers",value:function(){return null}}]),Gs),e=(_e($s,Zt),Ge($s,[{key:"path",value:function(t){var e=(m(2)-1)/3*4,n=this.getAttribute("rx").getPixels("x"),r=this.getAttribute("ry").getPixels("y"),i=this.getAttribute("cx").getPixels("x"),a=this.getAttribute("cy").getPixels("y");return t&&(t.beginPath(),t.moveTo(i+n,a),t.bezierCurveTo(i+n,a+e*r,i+e*n,a+r,i,a+r),t.bezierCurveTo(i-e*n,a+r,i-n,a+e*r,i-n,a),t.bezierCurveTo(i-n,a-e*r,i-e*n,a-r,i,a-r),t.bezierCurveTo(i+e*n,a-r,i+n,a-e*r,i+n,a),t.closePath()),new ps(i-n,a-r,i+n,a+r)}},{key:"getMarkers",value:function(){return null}}]),$s),de=(_e(_s,Zt),Ge(_s,[{key:"getPoints",value:function(){return[new eo(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new eo(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}},{key:"path",value:function(t){var e=this.getPoints(),n=In(e,2),r=n[0],i=r.x,e=r.y,r=n[1],n=r.x,r=r.y;return t&&(t.beginPath(),t.moveTo(i,e),t.lineTo(n,r)),new ps(i,e,n,r)}},{key:"getMarkers",value:function(){var t=this.getPoints(),e=In(t,2),n=e[0],t=e[1],e=n.angleTo(t);return[[n,e],[t,e]]}}]),_s),ma=(_e(Fs,Zt),Ge(Fs,[{key:"path",value:function(n){var t=this.points,e=In(t,1)[0],r=e.x,e=e.y,i=new ps(r,e);return n&&(n.beginPath(),n.moveTo(r,e)),t.forEach(function(t){var e=t.x,t=t.y;i.addPoint(e,t),n&&n.lineTo(e,t)}),i}},{key:"getMarkers",value:function(){var n=this.points,r=n.length-1,i=[];return n.forEach(function(t,e){e===r||i.push([t,t.angleTo(n[e+1])])}),0<i.length&&i.push([n[n.length-1],i[i.length-1][1]]),i}}]),Fs),bn=(_e(Bs,ma),Ge(Bs,[{key:"path",value:function(t){var e=Jo(xo(Bs.prototype),"path",this).call(this,t),n=In(this.points,1)[0],r=n.x,n=n.y;return t&&(t.lineTo(r,n),t.closePath()),e}}]),Bs),Ms=Et.f;function Bs(){var t;return $r(this,Bs),(t=mo(this,xo(Bs).apply(this,arguments))).type="polygon",t}function Fs(t,e,n){return $r(this,Fs),(n=mo(this,xo(Fs).call(this,t,e,n))).type="polyline",n.points=[],n.points=eo.parsePath(n.getAttribute("points").getString()),n}function _s(){var t;return $r(this,_s),(t=mo(this,xo(_s).apply(this,arguments))).type="line",t}function $s(){var t;return $r(this,$s),(t=mo(this,xo($s).apply(this,arguments))).type="ellipse",t}function Gs(){var t;return $r(this,Gs),(t=mo(this,xo(Gs).apply(this,arguments))).type="circle",t}function qs(){var t;return $r(this,qs),(t=mo(this,xo(qs).apply(this,arguments))).type="rect",t}function Ws(){var t;return $r(this,Ws),(t=mo(this,xo(Ws).apply(this,arguments))).type="svg",t.root=!1,t}function Hs(t,e,n){return $r(this,Hs),(n=mo(this,xo(Hs).call(this,t,e,n))).type="path",n.pathParser=null,n.pathParser=new js(n.getAttribute("d").getString()),n}function Xs(t){$r(this,Xs),this.control=null,this.start=null,this.current=null,this.command="",this.tokens=[],this.i=-1,this.previousCommand="",this.points=[],this.angles=[],this.tokens=w(t.replace(/,/gm," ").replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2").replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2").replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2").replace(/([0-9])([+\-])/gm,"$1 $2").replace(/(\.[0-9]*)(\.)/gm,"$1 $2").replace(/(\.[0-9]*)(\.)/gm,"$1 $2").replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ")).trim().split(" ")}ae({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var n=Ms(lt(t),e);return(!n||n.configurable)&&delete t[e]}});var Vt=(_e(su,Qe),Ge(su,[{key:"createPattern",value:function(t,e,n){var r=this.getStyle("width").getPixels("x",!0),i=this.getStyle("height").getPixels("y",!0),a=new Ds(this.document,null);a.attributes.viewBox=new Ka(this.document,"viewBox",this.getAttribute("viewBox").getValue()),a.attributes.width=new Ka(this.document,"width","".concat(r,"px")),a.attributes.height=new Ka(this.document,"height","".concat(i,"px")),a.attributes.transform=new Ka(this.document,"transform",this.getAttribute("patternTransform").getValue()),a.children=this.children;var o=this.document.createCanvas(r,i),s=o.getContext("2d"),r=this.getAttribute("x"),i=this.getAttribute("y");r.hasValue()&&i.hasValue()&&s.translate(r.getPixels("x",!0),i.getPixels("y",!0)),n.hasValue()?this.styles["fill-opacity"]=n:Reflect.deleteProperty(this.styles,"fill-opacity");for(var u=-1;u<=1;u++)for(var l=-1;l<=1;l++)s.save(),a.attributes.x=new Ka(this.document,"x",u*o.width),a.attributes.y=new Ka(this.document,"y",l*o.height),a.render(s),s.restore();return t.createPattern(o,"repeat")}}]),su),Se=(_e(ou,Qe),Ge(ou,[{key:"render",value:function(t,e,n){var r,i,a,o;e&&(r=e.x,i=e.y,a=this.getAttribute("orient").getValue("auto"),o=this.getAttribute("markerUnits").getValue("strokeWidth"),t.translate(r,i),"auto"===a&&t.rotate(n),"strokeWidth"===o&&t.scale(t.lineWidth,t.lineWidth),t.save(),(e=new Ds(this.document,null)).type=this.type,e.attributes.viewBox=new Ka(this.document,"viewBox",this.getAttribute("viewBox").getValue()),e.attributes.refX=new Ka(this.document,"refX",this.getAttribute("refX").getValue()),e.attributes.refY=new Ka(this.document,"refY",this.getAttribute("refY").getValue()),e.attributes.width=new Ka(this.document,"width",this.getAttribute("markerWidth").getValue()),e.attributes.height=new Ka(this.document,"height",this.getAttribute("markerHeight").getValue()),e.attributes.overflow=new Ka(this.document,"overflow",this.getAttribute("overflow").getValue()),e.attributes.fill=new Ka(this.document,"fill",this.getAttribute("fill").getValue("black")),e.attributes.stroke=new Ka(this.document,"stroke",this.getAttribute("stroke").getValue("none")),e.children=this.children,e.render(t),t.restore(),"strokeWidth"===o&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"===a&&t.rotate(-n),t.translate(-r,-i))}}]),ou),Me=(_e(au,Qe),Ge(au,[{key:"render",value:function(){}}]),au),Us=(_e(iu,Pi),Ge(iu,[{key:"getBoundingBox",value:function(e){var n=new ps;return this.children.forEach(function(t){n.addBoundingBox(t.getBoundingBox(e))}),n}}]),iu),$e=(_e(ru,Qe),Ge(ru,[{key:"getGradientUnits",value:function(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}},{key:"createGradient",value:function(t,e,n){var r=this,i=this;this.getHrefAttribute().hasValue()&&(i=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(i));var a=i.stops,o=this.getGradient(t,e);if(!o)return this.addParentOpacity(n,a[a.length-1].color);if(a.forEach(function(t){o.addColorStop(t.offset,r.addParentOpacity(n,t.color))}),this.getAttribute("gradientTransform").hasValue()){i=this.document,t=i.screen,e=t.MAX_VIRTUAL_PIXELS,a=t.viewPort,t=In(a.viewPorts,1)[0],a=new zs(i,null);a.attributes.x=new Ka(i,"x",-e/3),a.attributes.y=new Ka(i,"y",-e/3),a.attributes.width=new Ka(i,"width",e),a.attributes.height=new Ka(i,"height",e);e=new Us(i,null);e.attributes.transform=new Ka(i,"transform",this.getAttribute("gradientTransform").getValue()),e.children=[a];a=new Ds(i,null);a.attributes.x=new Ka(i,"x",0),a.attributes.y=new Ka(i,"y",0),a.attributes.width=new Ka(i,"width",t.width),a.attributes.height=new Ka(i,"height",t.height),a.children=[e];i=i.createCanvas(t.width,t.height),t=i.getContext("2d");return t.fillStyle=o,a.render(t),t.createPattern(i,"no-repeat")}return o}},{key:"inheritStopContainer",value:function(e){var n=this;this.attributesToInherit.forEach(function(t){!n.getAttribute(t).hasValue()&&e.getAttribute(t).hasValue()&&n.getAttribute(t,!0).setValue(e.getAttribute(t).getValue())})}},{key:"addParentOpacity",value:function(t,e){return t.hasValue()?new Ka(this.document,"color",e).addOpacity(t).getString():e}}]),ru),Be=(_e(nu,$e),Ge(nu,[{key:"getGradient",value:function(t,e){var n="objectBoundingBox"===this.getGradientUnits(),r=n?e.getBoundingBox(t):null;if(n&&!r)return null;this.getAttribute("x1").hasValue()||this.getAttribute("y1").hasValue()||this.getAttribute("x2").hasValue()||this.getAttribute("y2").hasValue()||(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var i=n?r.x+r.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),a=n?r.y+r.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),e=n?r.x+r.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),r=n?r.y+r.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return i===e&&a===r?null:t.createLinearGradient(i,a,e,r)}}]),nu),Yt=(_e(eu,$e),Ge(eu,[{key:"getGradient",value:function(t,e){var n="objectBoundingBox"===this.getGradientUnits(),r=e.getBoundingBox(t);if(n&&!r)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var i=n?r.x+r.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),a=n?r.y+r.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),o=i,e=a;this.getAttribute("fx").hasValue()&&(o=n?r.x+r.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(e=n?r.y+r.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));n=n?(r.width+r.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),r=this.getAttribute("fr").getPixels();return t.createRadialGradient(o,e,r,i,a,n)}}]),eu),Ys=(_e(tu,Qe),tu),Qs="Array Iterator",Zs=he.set,Ks=he.getterFor(Qs),Js=No(Array,"Array",function(t,e){Zs(this,{type:Qs,target:it(t),index:0,kind:e})},function(){var t=Ks(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");function tu(t,e,n){var r;$r(this,tu),(r=mo(this,xo(tu).call(this,t,e,n))).type="stop";t=S(0,P(1,r.getAttribute("offset").getNumber())),e=r.getStyle("stop-opacity"),n=r.getStyle("stop-color",!0);return""===n.getString()&&n.setValue("#000"),e.hasValue()&&(n=n.addOpacity(e)),r.offset=t,r.color=n.getString(),r}function eu(t,e,n){return $r(this,eu),(n=mo(this,xo(eu).call(this,t,e,n))).type="radialGradient",n.attributesToInherit.push("cx","cy","r","fx","fy","fr"),n}function nu(t,e,n){return $r(this,nu),(n=mo(this,xo(nu).call(this,t,e,n))).type="linearGradient",n.attributesToInherit.push("x1","y1","x2","y2"),n}function ru(t,e,n){$r(this,ru),(e=mo(this,xo(ru).call(this,t,e,n))).attributesToInherit=["gradientUnits"],e.stops=[];var n=vo(e),r=n.stops;return n.children.forEach(function(t){"stop"===t.type&&r.push(t)}),e}function iu(){var t;return $r(this,iu),(t=mo(this,xo(iu).apply(this,arguments))).type="g",t}function au(){var t;return $r(this,au),(t=mo(this,xo(au).apply(this,arguments))).type="defs",t}function ou(){var t;return $r(this,ou),(t=mo(this,xo(ou).apply(this,arguments))).type="marker",t}function su(){var t;return $r(this,su),(t=mo(this,xo(su).apply(this,arguments))).type="pattern",t}li.Arguments=li.Array,He("keys"),He("values"),He("entries");var uu,lu=le("iterator"),cu=le("toStringTag"),hu=Js.values;for(uu in zr){var fu=gt[uu],gu=fu&&fu.prototype;if(gu){if(gu[lu]!==hu)try{Ot(gu,lu,hu)}catch(t){gu[lu]=hu}if(gu[cu]||Ot(gu,cu,uu),zr[uu])for(var du in Js)if(gu[du]!==Js[du])try{Ot(gu,du,Js[du])}catch(t){gu[du]=Js[du]}}}var pu=(_e(xu,Qe),Ge(xu,[{key:"getProperty",value:function(){var t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return"CSS"===t?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}},{key:"calcValue",value:function(){var t=this.initialUnits,e=this.getProgress(),n=e.progress,r=e.from,e=e.to,n=r.getNumber()+(e.getNumber()-r.getNumber())*n;return"%"===t&&(n*=100),"".concat(n).concat(t)}},{key:"update",value:function(t){var e=this.parent,n=this.getProperty();if(this.initialValue||(this.initialValue=n.getString(),this.initialUnits=n.getUnits()),this.duration>this.maxDuration){var r=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==r||this.frozen){if("remove"===r&&!this.removed)return this.removed=!0,n.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,e.animationFrozen=!0,e.animationFrozenValue=n.getString();return!1}this.duration+=t;r=!1;return this.begin<this.duration&&(e=this.calcValue(),(t=this.getAttribute("type")).hasValue()&&(t=t.getString(),e="".concat(t,"(").concat(e,")")),n.setValue(e),r=!0),r}},{key:"getProgress",value:function(){var t,e,n,r=this.document,i=this.values,a={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};return i.hasValue()?(t=a.progress*(i.getValue().length-1),e=A(t),n=o(t),a.from=new Ka(r,"from",parseFloat(i.getValue()[e])),a.to=new Ka(r,"to",parseFloat(i.getValue()[n])),a.progress=(t-e)/(n-e)):(a.from=this.from,a.to=this.to),a}}]),xu),yu=tn.trim,vu=gt.parseInt,mu=/^[+-]?0[Xx]/,Xr=8!==vu("\t\n\v\f\r                　\u2028\u2029\ufeff08")||22!==vu("\t\n\v\f\r                　\u2028\u2029\ufeff0x16")?function(t,e){t=yu(t+"");return vu(t,e>>>0||(mu.test(t)?16:10))}:vu;function xu(t,e,n){return $r(this,xu),(n=mo(this,xo(xu).call(this,t,e,n))).type="animate",n.duration=0,n.initialValue=null,n.initialUnits="",n.removed=!1,n.frozen=!1,t.screen.animations.push(vo(n)),n.begin=n.getAttribute("begin").getMilliseconds(),n.maxDuration=n.begin+n.getAttribute("dur").getMilliseconds(),n.from=n.getAttribute("from"),n.to=n.getAttribute("to"),n.values=n.getAttribute("values"),n.values.hasValue()&&n.values.setValue(n.values.getString().split(";")),n}ae({global:!0,forced:parseInt!=Xr},{parseInt:Xr});var bu,wu,ku,Su,Pu,Au=(_e(Tu,pu),Ge(Tu,[{key:"calcValue",value:function(){var t=this.getProgress(),e=t.progress,n=t.from,r=t.to,i=new Za(n.getString()),t=new Za(r.getString());if(i.ok&&t.ok){n=i.r+(t.r-i.r)*e,r=i.g+(t.g-i.g)*e,e=i.b+(t.b-i.b)*e;return"rgb(".concat(parseInt(n,10),", ").concat(parseInt(r,10),", ").concat(parseInt(e,10),")")}return this.getAttribute("from").getString()}}]),Tu),Ue=(_e(Cu,pu),Ge(Cu,[{key:"calcValue",value:function(){var t=this.getProgress(),n=t.progress,e=t.from,t=t.to,e=b(e.getString()),r=b(t.getString());return e.map(function(t,e){return t+(r[e]-t)*n}).join(" ")}}]),Cu),Ye=Tt.f,Eu=gt.Symbol;function Cu(){var t;return $r(this,Cu),(t=mo(this,xo(Cu).apply(this,arguments))).type="animateTransform",t}function Tu(){var t;return $r(this,Tu),(t=mo(this,xo(Tu).apply(this,arguments))).type="animateColor",t}!dt||"function"!=typeof Eu||"description"in Eu.prototype&&void 0===Eu().description||(bu={},ie(wu=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:arguments[0]+"",e=this instanceof wu?new Eu(t):void 0===t?Eu():Eu(t);return""===t&&(bu[e]=!0),e},Eu),(Hu=wu.prototype=Eu.prototype).constructor=wu,ku=Hu.toString,Su="Symbol(test)"==Eu("test")+"",Pu=/^Symbol\((.*)\)[^)]+$/,Ye(Hu,"description",{configurable:!0,get:function(){var t=at(this)?this.valueOf():this,e=ku.call(t);if(st(bu,t))return"";e=Su?e.slice(7,-1):e.replace(Pu,"$1");return""===e?void 0:e}}),ae({global:!0,forced:!0},{Symbol:wu})),Qn("iterator");var Ou,Vu,Lu,Nu,Ru,Iu,ju,Du,zu,Mu,Bu,kn=(_e(il,Qe),Ge(il,[{key:"render",value:function(){}}]),il),pe=(_e(rl,Qe),rl),Cn=(_e(nl,Zt),nl),Je=(_e(el,Zt),el),rn=(_e(tl,Ne),Ge(tl,[{key:"getText",value:function(){var t=this.getHrefAttribute().getDefinition();if(t){t=t.children[0];if(t)return t.getText()}return""}}]),tl),vi=(_e(Ju,Ne),Ge(Ju,[{key:"getText",value:function(){return this.text}},{key:"renderChildren",value:function(t){var e,n,r,i;this.hasText?(Jo(xo(Ju.prototype),"renderChildren",this).call(this,t),r=this.document,e=this.x,i=this.y,n=r.screen.mouse,r=new Ka(r,"fontSize",ts.parse(r.ctx.font).fontSize),n.isWorking()&&n.checkBoundingBox(this,new ps(e,i-r.getPixels("y"),e+this.measureText(t),i))):0<this.children.length&&((i=new Us(this.document,null)).children=this.children,i.parent=this,i.render(t))}},{key:"onClick",value:function(){var t=this.document.window;t&&t.open(this.getHrefAttribute().getString())}},{key:"onMouseMove",value:function(){this.document.ctx.canvas.style.cursor="pointer"}}]),Ju),Fu=!tt(function(){return Object.isExtensible(Object.preventExtensions({}))}),wn=i(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=Tt.f,r=Rt("meta"),i=0,a=Object.isExtensible||function(){return!0},o=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!at(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!st(t,r)){if(!a(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!st(t,r)){if(!a(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return Fu&&o.REQUIRED&&a(t)&&!st(t,r)&&n(t),t}};Qt[r]=!0}),_u=(wn.REQUIRED,wn.fastKey,wn.getWeakData,wn.onFreeze,Tt.f),$u=wn.fastKey,Gu=he.set,qu=he.getterFor,tn=(ms=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Fe={getConstructor:function(t,n,r,i){function a(t,e,n){var r,i=s(t),a=u(t,e);return a?a.value=n:(i.last=a={index:r=$u(e,!0),key:e,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=a),n&&(n.next=a),dt?i.size++:t.size++,"F"!==r&&(i.index[r]=a)),t}var o=t(function(t,e){ii(t,o,n),Gu(t,{type:n,index:tr(null),first:void 0,last:void 0,size:0}),dt||(t.size=0),null!=e&&gi(e,t[i],t,r)}),s=qu(n),u=function(t,e){var n,r=s(t),t=$u(e);if("F"!==t)return r.index[t];for(n=r.first;n;n=n.next)if(n.key==e)return n};return ni(o.prototype,{clear:function(){for(var t=s(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,dt?t.size=0:this.size=0},delete:function(t){var e,n=s(this),r=u(this,t);return r&&(e=r.next,t=r.previous,delete n.index[r.index],r.removed=!0,t&&(t.next=e),e&&(e.previous=t),n.first==r&&(n.first=e),n.last==r&&(n.last=t),dt?n.size--:this.size--),!!r},forEach:function(t){for(var e,n=s(this),r=se(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!u(this,t)}}),ni(o.prototype,r?{get:function(t){t=u(this,t);return t&&t.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),dt&&_u(o.prototype,"size",{get:function(){return s(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",i=qu(e),a=qu(r);No(t,e,function(t,e){Gu(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=a(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),ri(e)}},Iu=-1!==(Nu="Map").indexOf("Map"),ju=-1!==Nu.indexOf("Weak"),Du=Iu?"set":"add",zu=gt.Map,Mu=zu&&zu.prototype,He={},Te(Nu,"function"!=typeof(Bu=zu)||!(ju||Mu.forEach&&!tt(function(){(new zu).entries().next()})))?(Bu=Fe.getConstructor(ms,Nu,Iu,Du),wn.REQUIRED=!0):Te(Nu,!0)&&(pl=(Ru=new Bu)[Du](ju?{}:-0,1)!=Ru,gl=tt(function(){Ru.has(1)}),ul=ki(function(t){new zu(t)}),dl=!ju&&tt(function(){for(var t=new zu,e=5;e--;)t[Du](e,e);return!t.has(-0)}),ul||(((Bu=ms(function(t,e){ii(t,Bu,Nu);t=ns(new zu,t,Bu);return null!=e&&gi(e,t[Du],t,Iu),t})).prototype=Mu).constructor=Bu),(gl||dl)&&(Ku("delete"),Ku("has"),Iu&&Ku("get")),(dl||pl)&&Ku(Du),ju&&Mu.clear&&delete Mu.clear),He.Map=Bu,ae({global:!0,forced:Bu!=zu},He),Zn(Bu,Nu),ju||Fe.setStrong(Bu,Nu,Iu),_e(Zu,Ne),Ge(Zu,[{key:"getText",value:function(){return this.text}},{key:"path",value:function(g){var t=this.dataArray;g&&g.beginPath(),t.forEach(function(t){var e=t.command,n=t.points;switch(e){case"L":g&&g.lineTo(n[0],n[1]);break;case"M":g&&g.moveTo(n[0],n[1]);break;case"C":g&&g.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);break;case"Q":g&&g.quadraticCurveTo(n[0],n[1],n[2],n[3]);break;case"A":var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=o<a?a:o,f=o<a?1:a/o,a=o<a?o/a:1;g&&(g.translate(r,i),g.rotate(l),g.scale(f,a),g.arc(0,0,h,s,s+u,!!(1-c)),g.scale(1/f,1/a),g.rotate(-l),g.translate(-r,-i));break;case"z":g&&g.closePath()}})}},{key:"renderChildren",value:function(i){this.setTextData(i),i.save();var a=this.parent.getStyle("text-decoration").getString(),o=this.getFontSize(),s=this.glyphInfo,t=i.fillStyle;"underline"===a&&i.beginPath(),s.forEach(function(t,e){var n=t.p0,r=t.p1,t=t.text;i.save(),i.translate(n.x,n.y),i.rotate(s[e].rotation),i.fillStyle&&i.fillText(t,0,0),i.strokeStyle&&i.strokeText(t,0,0),i.restore(),"underline"===a&&(0===e&&i.moveTo(n.x,n.y+o/8),i.lineTo(r.x,r.y+o/5))}),"underline"===a&&(i.lineWidth=o/20,i.strokeStyle=t,i.stroke(),i.closePath()),i.restore()}},{key:"getLetterSpacingAt",value:function(){return this.letterSpacingCache[0<arguments.length&&void 0!==arguments[0]?arguments[0]:0]||0}},{key:"findSegmentToFitChar",value:function(t,e,n,r,i,a,o,s){t=this.measureText(t,o);" "===o&&"justify"===e&&n<r&&(t+=(r-n)/i),-1<s&&(a+=this.getLetterSpacingAt(s));s=this.textHeight/20,s={p0:this.getEquidistantPointOnPath(a,s),p1:this.getEquidistantPointOnPath(a+t,s)};return{offset:a+=t,segment:s}}},{key:"measureText",value:function(t,e){var n=this.measuresCache,e=e||this.getText();if(n.has(e))return n.get(e);t=this.measureTargetText(t,e);return n.set(e,t),t}},{key:"setTextData",value:function(i){var a=this;if(!this.glyphInfo){var t=this.getText(),o=t.split(""),s=t.split(" ").length-1,e=b(this.parent.getAttribute("dx").getString("0")),u=this.parent.getStyle("text-anchor").getString("start"),n=this.getStyle("letter-spacing"),r=this.parent.getStyle("letter-spacing"),l=0;n.hasValue()&&"inherit"!==n.getValue()?n.hasValue()&&"initial"!==n.getValue()&&"unset"!==n.getValue()&&(l=n.getPixels()):l=r.getPixels();var c=[],h=t.length;this.letterSpacingCache=c;for(var f=0;f<h;f++)c.push(void 0===e[f]?l:e[f]);t=c.reduce(function(t,e){return t+e||0},0);this.textWidth=this.measureText(i),this.textHeight=this.getFontSize();var g=S(this.textWidth+t,0);this.glyphInfo=[];var d=this.getPathLength(),t=this.getStyle("startOffset").getNumber(0)*d,p="end"!==u&&"right"!==u?"middle"!==u&&"center"!==u?0:-g/2:-g;p+=t,o.forEach(function(t,e){var n=a.findSegmentToFitChar(i,u,g,d,s,p,t,e),r=n.offset,t=n.segment;p=r,t.p0&&t.p1&&(n=a.getLineLength(t.p0.x,t.p0.y,t.p1.x,t.p1.y),r=a.getPointOnLine(0+n/2,t.p0.x,t.p0.y,t.p1.x,t.p1.y),n=y(t.p1.y-t.p0.y,t.p1.x-t.p0.x),a.glyphInfo.push({transposeX:r.x,transposeY:r.y,text:o[e],p0:t.p0,p1:t.p1,rotation:n}))})}}},{key:"parsePathData",value:function(t){if(this.pathLength=-1,!t)return[];var e=[],n=t.pathParser;for(n.reset();!n.isEnd();){var r=n.current,i=r?r.x:0,a=r?r.y:0,o="",s=[];n.nextCommand();r=n.command.toUpperCase();switch(n.command){case"M":case"m":o=this.pathM(n,s);break;case"L":case"l":o=this.pathL(n,s);break;case"H":case"h":o=this.pathH(n,s);break;case"V":case"v":o=this.pathV(n,s);break;case"C":case"c":this.pathC(n,s);break;case"S":case"s":o=this.pathS(n,s);break;case"Q":case"q":this.pathQ(n,s);break;case"T":case"t":o=this.pathT(n,s);break;case"A":case"a":s=this.pathA(n);break;case"Z":case"z":n.current=n.start}"Z"===r?e.push({command:"z",points:[],pathLength:0}):e.push({command:o||r,points:s,start:{x:i,y:a},pathLength:this.calcLength(i,a,o||r,s)})}return e}},{key:"pathM",value:function(t,e){var n=t.getAsCurrentPoint();for(e.push(n.x,n.y),t.start=t.current;!t.isCommandOrEnd();){var r=t.getAsCurrentPoint();return e.push(r.x,r.y),"L"}}},{key:"pathL",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getAsCurrentPoint();e.push(n.x,n.y)}return"L"}},{key:"pathH",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.current,n=new eo((t.isRelativeCommand()?n.x:0)+t.getScalar(),n.y);e.push(n.x,n.y),t.current=n}return"L"}},{key:"pathV",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.current,n=new eo(n.x,(t.isRelativeCommand()?n.y:0)+t.getScalar());e.push(n.x,n.y),t.current=n}return"L"}},{key:"pathC",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getPoint(),r=t.getAsControlPoint(),i=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y,i.x,i.y)}}},{key:"pathS",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getReflectedControlPoint(),r=t.getAsControlPoint(),i=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y,i.x,i.y)}return"C"}},{key:"pathQ",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getAsControlPoint(),r=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y)}}},{key:"pathT",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getReflectedControlPoint();t.control=n;var r=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y)}return"Q"}},{key:"pathA",value:function(t){for(;!t.isCommandOrEnd();){var e=t.current,n=t.getScalar(),r=t.getScalar(),i=t.getScalar()*(d/180),a=t.getScalar(),o=t.getScalar(),s=t.getAsCurrentPoint(),u=new eo(v(i)*(e.x-s.x)/2+p(i)*(e.y-s.y)/2,-p(i)*(e.x-s.x)/2+v(i)*(e.y-s.y)/2),l=x(u.x,2)/x(n,2)+x(u.y,2)/x(r,2);1<l&&(n*=m(l),r*=m(l));l=(a===o?-1:1)*m((x(n,2)*x(r,2)-x(n,2)*x(u.y,2)-x(r,2)*x(u.x,2))/(x(n,2)*x(u.y,2)+x(r,2)*x(u.x,2)));isNaN(l)&&(l=0);a=new eo(l*n*u.y/r,l*-r*u.x/n),l=new eo((e.x+s.x)/2+v(i)*a.x-p(i)*a.y,(e.y+s.y)/2+p(i)*a.x+v(i)*a.y),e=E([1,0],[(u.x-a.x)/n,(u.y-a.y)/r]),s=[(u.x-a.x)/n,(u.y-a.y)/r],u=[(-u.x-a.x)/n,(-u.y-a.y)/r],a=E(s,u);return k(s,u)<=-1&&(a=d),1<=k(s,u)&&(a=0),0===o&&0<a&&(a-=2*d),1===o&&a<0&&(a+=2*d),[l.x,l.y,n,r,e,a,i,o]}}},{key:"calcLength",value:function(t,e,n,r){var i=Math.abs,a=0,o=null,s=null,u=0;switch(n){case"L":return this.getLineLength(t,e,r[0],r[1]);case"C":for(o=this.getPointOnCubicBezier(a=0,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),u=.01;u<=1;u+=.01)s=this.getPointOnCubicBezier(u,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return a;case"Q":for(o=this.getPointOnQuadraticBezier(a=0,t,e,r[0],r[1],r[2],r[3]),u=.01;u<=1;u+=.01)s=this.getPointOnQuadraticBezier(u,t,e,r[0],r[1],r[2],r[3]),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return a;case"A":var a=0,l=r[4],c=r[5],h=r[4]+c,f=d/180;if(i(l-h)<f&&(f=i(l-h)),o=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],l,0),c<0)for(u=l-f;h<u;u-=f)s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;else for(u=l+f;u<h;u+=f)s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],h,0),a+=this.getLineLength(o.x,o.y,s.x,s.y)}return 0}},{key:"getPointOnLine",value:function(t,e,n,r,i){var a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:e,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:n,s=(i-n)/(r-e+$n),u=m(t*t/(1+s*s));r<e&&(u*=-1);var l=s*u,c=null;if(r===e)c={x:a,y:o+l};else if((o-n)/(a-e+$n)==s)c={x:a+u,y:o+l};else{var h=0,f=0,g=this.getLineLength(e,n,r,i);if(g<$n)return null;var d=(a-e)*(r-e)+(o-n)*(i-n),n=this.getLineLength(a,o,h=e+(d/=g*g)*(r-e),f=n+d*(i-n)),n=m(t*t-n*n),u=m(n*n/(1+s*s));r<e&&(u*=-1),c={x:h+u,y:f+(l=s*u)}}return c}},{key:"getPointOnPath",value:function(t){var e=this.getPathLength(),n=0,r=null;if(t<-5e-5||e<t-5e-5)return null;var i=this.dataArray,a=!0,o=!1,e=void 0;try{for(var s,u,l=i[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){if(!(u=s.value)||!(u.pathLength<5e-5||n+u.pathLength+5e-5<t)){var c=t-n,h=0;switch(u.command){case"L":r=this.getPointOnLine(c,u.start.x,u.start.y,u.points[0],u.points[1],u.start.x,u.start.y);break;case"A":var f=u.points[4],g=u.points[5],d=u.points[4]+g,h=f+c/u.pathLength*g;if(g<0&&h<d||0<=g&&d<h)break;r=this.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],h,u.points[6]);break;case"C":1<(h=c/u.pathLength)&&(h=1),r=this.getPointOnCubicBezier(h,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);break;case"Q":1<(h=c/u.pathLength)&&(h=1),r=this.getPointOnQuadraticBezier(h,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3])}if(r)return r;break}n+=u.pathLength}}catch(t){o=!0,e=t}finally{try{a||null==l.return||l.return()}finally{if(o)throw e}}return null}},{key:"getLineLength",value:function(t,e,n,r){return m((n-t)*(n-t)+(r-e)*(r-e))}},{key:"getPathLength",value:function(){return-1===this.pathLength&&(this.pathLength=this.dataArray.reduce(function(t,e){return 0<e.pathLength?t+e.pathLength:t},0)),this.pathLength}},{key:"getPointOnCubicBezier",value:function(t,e,n,r,i,a,o,s,u){return{x:s*C(t)+a*T(t)+r*O(t)+e*V(t),y:u*C(t)+o*T(t)+i*O(t)+n*V(t)}}},{key:"getPointOnQuadraticBezier",value:function(t,e,n,r,i,a,o){return{x:a*L(t)+r*N(t)+e*R(t),y:o*L(t)+i*N(t)+n*R(t)}}},{key:"getPointOnEllipticalArc",value:function(t,e,n,r,i,a){var o=v(a),a=p(a),n=n*v(i),i=r*p(i);return{x:t+(n*o-i*a),y:e+(n*a+i*o)}}},{key:"buildEquidistantCache",value:function(t,e){var n=this.getPathLength(),r=e||.25,i=t||n/100;if(!this.equidistantCache||this.equidistantCache.step!==i||this.equidistantCache.precision!==r){this.equidistantCache={step:i,precision:r,points:[]};for(var a=0,o=0;o<=n;o+=r){var s=this.getPointOnPath(o),u=this.getPointOnPath(o+r);s&&u&&(i<=(a+=this.getLineLength(s.x,s.y,u.x,u.y))&&(this.equidistantCache.points.push({x:s.x,y:s.y,distance:o}),a-=i))}}}},{key:"getEquidistantPointOnPath",value:function(t,e,n){if(this.buildEquidistantCache(e,n),t<0||5e-5<t-this.getPathLength())return null;t=r(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[t]||null}}]),Zu),Xr=(_e(Qu,Pi),Ge(Qu,[{key:"loadImage",value:(Lu=Fr(Br.mark(function t(e){var n;return Br.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.document.createImage(e);case 3:n=t.sent,this.image=n,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error('ERROR: image "'.concat(e,'" not found'),t.t0);case 10:this.loaded=!0;case 11:case"end":return t.stop()}},t,this,[[0,7]])})),function(){return Lu.apply(this,arguments)})},{key:"loadSvg",value:(Vu=Fr(Br.mark(function t(e){var n;return Br.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.document.fetch(e);case 3:return n=t.sent,t.next=6,n.text();case 6:n=t.sent,this.image=n,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error('ERROR: image "'.concat(e,'" not found'),t.t0);case 13:this.loaded=!0;case 14:case"end":return t.stop()}},t,this,[[0,10]])})),function(){return Vu.apply(this,arguments)})},{key:"renderChildren",value:function(t){var e=this.document,n=this.image,r=this.loaded,i=this.getAttribute("x").getPixels("x"),a=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");r&&n&&o&&s&&(t.save(),this.isSvg?e.canvg.forkString(t,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:i,offsetY:a,scaleWidth:o,scaleHeight:s}).render():(n=this.image,t.translate(i,a),e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:o,desiredWidth:n.width,height:s,desiredHeight:n.height}),this.loaded&&(void 0===n.complete||n.complete)&&t.drawImage(n,0,0)),t.restore())}},{key:"getBoundingBox",value:function(){var t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),n=this.getStyle("width").getPixels("x"),r=this.getStyle("height").getPixels("y");return new ps(t,e,t+n,e+r)}}]),Qu),Ye=(_e(Yu,Pi),Ge(Yu,[{key:"render",value:function(){}}]),Yu),Wu=(Ge(Uu,[{key:"load",value:(Ou=Fr(Br.mark(function t(e,n){var r,i;return Br.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=this.document,t.next=4,r.canvg.parser.load(n);case 4:i=t.sent,i=i.getElementsByTagName("font"),Array.from(i).forEach(function(t){t=r.createElement(t);r.definitions[e]=t}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error('ERROR: font "'.concat(n,'" not found'),t.t0);case 12:this.loaded=!0;case 13:case"end":return t.stop()}},t,this,[[0,9]])})),function(){return Ou.apply(this,arguments)})}]),Uu),Hu=(_e(Xu,Qe),Xu);function Xu(i,t,e){return $r(this,Xu),(e=mo(this,xo(Xu).call(this,i,t,e))).type="style",w(Array.from(t.childNodes).map(function(t){return t.data}).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"")).split("}").forEach(function(t){var n,e=t.trim();e&&(e=(t=e.split("{"))[0].split(","),n=t[1].split(";"),e.forEach(function(t){var r,e,t=t.trim();t&&(r=i.styles[t]||{},n.forEach(function(t){var e=t.indexOf(":"),n=t.substr(0,e).trim(),e=t.substr(e+1,t.length-e).trim();n&&e&&(r[n]=new Ka(i,n,e))}),i.styles[t]=r,i.stylesSpecificity[t]=f(t),"@font-face"===t&&(e=r["font-family"].getString().replace(/"|'/g,""),r.src.getString().split(",").forEach(function(t){0<t.indexOf('format("svg")')&&((t=c(t))&&new Wu(i).load(e,t))})))}))}),e}function Uu(t){$r(this,Uu),this.document=t,this.loaded=!1,t.fonts.push(this)}function Yu(){var t;return $r(this,Yu),(t=mo(this,xo(Yu).apply(this,arguments))).type="symbol",t}function Qu(t,e,n){var r;$r(this,Qu),(r=mo(this,xo(Qu).call(this,t,e,n))).type="image",r.loaded=!1;e=r.getHrefAttribute().getString();if(!e)return mo(r);n=/\.svg$/.test(e);return t.images.push(vo(r)),n?r.loadSvg(e):r.loadImage(e),r.isSvg=n,r}function Zu(t,e,n){$r(this,Zu),(e=mo(this,xo(Zu).call(this,t,e,n))).type="textPath",e.textWidth=0,e.textHeight=0,e.pathLength=-1,e.glyphInfo=null,e.letterSpacingCache=[],e.measuresCache=new Map([["",0]]);n=e.getHrefAttribute().getDefinition();return e.text=e.getTextFromNode(),e.dataArray=e.parsePathData(n),e}function Ku(t){var n=Mu[t];fe(Mu,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return(!ju||at(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return ju&&!at(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return(!ju||at(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}function Ju(t,e,n){$r(this,Ju),(t=mo(this,xo(Ju).call(this,t,e,n))).type="a";n=e.childNodes,e=n[0],n=0<n.length&&Array.from(n).every(function(t){return 3===t.nodeType});return t.hasText=n,t.text=n?t.getTextFromNode(e):"",t}function tl(){var t;return $r(this,tl),(t=mo(this,xo(tl).apply(this,arguments))).type="tref",t}function el(t,e,n){return $r(this,el),(n=mo(this,xo(el).call(this,t,e,n))).type="glyph",n.horizAdvX=n.getAttribute("horiz-adv-x").getNumber(),n.unicode=n.getAttribute("unicode").getString(),n.arabicForm=n.getAttribute("arabic-form").getString(),n}function nl(){var t;return $r(this,nl),(t=mo(this,xo(nl).apply(this,arguments))).type="missing-glyph",t.horizAdvX=0,t}function rl(t,e,n){return $r(this,rl),(n=mo(this,xo(rl).call(this,t,e,n))).type="font-face",n.ascent=n.getAttribute("ascent").getNumber(),n.descent=n.getAttribute("descent").getNumber(),n.unitsPerEm=n.getAttribute("units-per-em").getNumber(),n}function il(t,e,n){var r;$r(this,il),(r=mo(this,xo(il).call(this,t,e,n))).type="font",r.glyphs={},r.horizAdvX=r.getAttribute("horiz-adv-x").getNumber();var i=t.definitions,a=vo(r).children,o=!0,e=!1,n=void 0;try{for(var s,u,l=a[Symbol.iterator]();!(o=(s=l.next()).done);o=!0)switch(u=s.value,u.type){case"font-face":var c=(r.fontFace=u).getStyle("font-family");c.hasValue()&&(i[c.getString()]=vo(r));break;case"missing-glyph":r.missingGlyph=u;break;case"glyph":var h=u;h.arabicForm?(r.isRTL=!0,r.isArabic=!0,void 0===r.glyphs[h.unicode]&&(r.glyphs[h.unicode]={}),r.glyphs[h.unicode][h.arabicForm]=h):r.glyphs[h.unicode]=h}}catch(t){e=!0,n=t}finally{try{o||null==l.return||l.return()}finally{if(e)throw n}}return r}Hu.parseExternalUrl=c;var wn=(_e(hl,Pi),Ge(hl,[{key:"setContext",value:function(t){Jo(xo(hl.prototype),"setContext",this).call(this,t);var e=this.getAttribute("x"),n=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),n.hasValue()&&t.translate(0,n.getPixels("y"))}},{key:"path",value:function(t){var e=this.element;e&&e.path(t)}},{key:"renderChildren",value:function(t){var e,n,r=this.document,i=this.element;i&&("symbol"===(e=i).type&&((e=new Ds(r,null)).attributes.viewBox=new Ka(r,"viewBox",i.getAttribute("viewBox").getString()),e.attributes.preserveAspectRatio=new Ka(r,"preserveAspectRatio",i.getAttribute("preserveAspectRatio").getString()),e.attributes.overflow=new Ka(r,"overflow",i.getAttribute("overflow").getString()),e.children=i.children),"svg"===e.type&&(i=this.getStyle("width",!1,!0),n=this.getStyle("height",!1,!0),i.hasValue()&&(e.attributes.width=new Ka(r,"width",i.getString())),n.hasValue()&&(e.attributes.height=new Ka(r,"height",n.getString()))),n=e.parent,e.parent=null,e.render(t),e.parent=n)}},{key:"getBoundingBox",value:function(t){var e=this.element;return e?e.getBoundingBox(t):null}},{key:"elementTransform",value:function(){var t=this.document,e=this.element;return ws.fromElement(t,e)}},{key:"element",get:function(){return this._element||(this._element=this.getHrefAttribute().getDefinition()),this._element}}]),hl),al=(_e(cl,Qe),Ge(cl,[{key:"apply",value:function(t,e,n,r,i){for(var a=this.includeOpacity,o=this.matrix,s=t.getImageData(0,0,r,i),u=0;u<i;u++)for(var l=0;l<r;l++){var c=q(s.data,l,u,r,0,0),h=q(s.data,l,u,r,0,1),f=q(s.data,l,u,r,0,2),g=q(s.data,l,u,r,0,3),d=H(o,0,c)+H(o,1,h)+H(o,2,f)+H(o,3,g)+H(o,4,1),p=H(o,5,c)+H(o,6,h)+H(o,7,f)+H(o,8,g)+H(o,9,1),y=H(o,10,c)+H(o,11,h)+H(o,12,f)+H(o,13,g)+H(o,14,1),f=H(o,15,c)+H(o,16,h)+H(o,17,f)+H(o,18,g)+H(o,19,1);a&&(d=p=y=0,f*=g/255),W(s.data,l,u,r,0,0,d),W(s.data,l,u,r,0,1,p),W(s.data,l,u,r,0,2,y),W(s.data,l,u,r,0,3,f)}t.clearRect(0,0,r,i),t.putImageData(s,0,0)}}]),cl),ki=(_e(ll,Qe),Ge(ll,[{key:"apply",value:function(e,t){var n,r=this.document,i=this.getAttribute("x").getPixels("x"),a=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");o||s||(n=new ps,this.children.forEach(function(t){n.addBoundingBox(t.getBoundingBox(e))}),i=A(n.x1),a=A(n.y1),o=A(n.width),s=A(n.height));var u=t.getStyle("mask").getString();t.getStyle("mask").setValue("");var l=r.createCanvas(i+o,a+s),c=l.getContext("2d");r.screen.setDefaults(c),this.renderChildren(c),new al(r,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(c,0,0,i+o,a+s);var h=r.createCanvas(i+o,a+s),f=h.getContext("2d");r.screen.setDefaults(f),t.render(f),f.globalCompositeOperation="destination-in",f.fillStyle=c.createPattern(l,"no-repeat"),f.fillRect(0,0,i+o,a+s),e.fillStyle=f.createPattern(h,"no-repeat"),e.fillRect(0,0,i+o,a+s),t.getStyle("mask").setValue(u)}},{key:"render",value:function(){}}]),ll),ol=Jt("Reflect","apply"),sl=Function.apply,ul=!tt(function(){ol(function(){})});function ll(){var t;return $r(this,ll),(t=mo(this,xo(ll).apply(this,arguments))).type="mask",t}function cl(t,e,n){$r(this,cl),(n=mo(this,xo(cl).call(this,t,e,n))).type="feColorMatrix";var r=b(n.getAttribute("values").getString());switch(n.getAttribute("type").getString("matrix")){case"saturate":var i=r[0],r=[.213+.787*i,.715-.715*i,.072-.072*i,0,0,.213-.213*i,.715+.285*i,.072-.072*i,0,0,.213-.213*i,.715-.715*i,.072+.928*i,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":i=r[0]*d/180;r=[X(i,.213,.787,-.213),X(i,.715,-.715,-.715),X(i,.072,-.072,.928),0,0,X(i,.213,-.213,.143),X(i,.715,.285,.14),X(i,.072,-.072,-.283),0,0,X(i,.213,-.213,-.787),X(i,.715,-.715,.715),X(i,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}return n.matrix=r,n.includeOpacity=n.getAttribute("includeOpacity").hasValue(),n}function hl(){var t;return $r(this,hl),(t=mo(this,xo(hl).apply(this,arguments))).type="use",t}ae({target:"Reflect",stat:!0,forced:ul},{apply:function(t,e,n){return oe(t),lt(n),ol?ol(t,e,n):sl.call(t,e,n)}}),ae({target:"Reflect",stat:!0,sham:!Hr},{getPrototypeOf:function(t){return Oo(lt(t))}});function fl(){}var ms=(_e(Tl,Qe),Ge(Tl,[{key:"apply",value:function(n){var r=this.document,i=Reflect.getPrototypeOf(n),t=n.beginPath,a=n.closePath;i&&(i.beginPath=fl,i.closePath=fl),Reflect.apply(t,n,[]),this.children.forEach(function(t){var e;void 0!==t.path&&((e=(e=void 0===t.elementTransform?null:t.elementTransform())||ws.fromElement(r,t))&&e.apply(n),t.path(n),i&&(i.closePath=a),e&&e.unapply(n))}),Reflect.apply(a,n,[]),n.clip(),i&&(i.beginPath=t,i.closePath=a)}},{key:"render",value:function(){}}]),Tl),gl=(_e(Cl,Qe),Ge(Cl,[{key:"apply",value:function(t,e){var n,r,i,a,o,s,u,l,c=this.document,h=e.getBoundingBox(t);h&&(n=A(h.x1),r=A(h.y1),i=A(h.width),a=A(h.height),o=e.getStyle("filter").getString(),e.getStyle("filter").setValue(""),u=s=0,this.children.forEach(function(t){t=t.extraFilterDistance||0;s=S(s,t),u=S(u,t)}),h=c.createCanvas(i+2*s,a+2*u),l=h.getContext("2d"),c.screen.setDefaults(l),l.translate(-n+s,-r+u),e.render(l),this.children.forEach(function(t){"function"==typeof t.apply&&t.apply(l,0,0,i+2*s,a+2*u)}),t.drawImage(h,0,0,i+2*s,a+2*u,n-s,r-u,i+2*s,a+2*u),e.getStyle("filter",!0).setValue(o))}},{key:"render",value:function(){}}]),Cl),dl=(_e(El,Qe),Ge(El,[{key:"apply",value:function(){}}]),El),pl=(_e(Al,Qe),Ge(Al,[{key:"apply",value:function(){}}]),Al),He=(_e(Pl,Qe),Ge(Pl,[{key:"apply",value:function(){}}]),Pl),yl=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],vl=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],ml=function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},Fe=(_e(Sl,Qe),Ge(Sl,[{key:"apply",value:function(t,e,n,r,i){var a=this.document,o=this.blurRadius,s=a.window?a.window.document.body:null,t=t.canvas;t.id=a.getUniqueId(),s&&(t.style.display="none",s.appendChild(t)),Y(t,e,n,r,i,o),s&&s.removeChild(t)}}]),Sl),ul=(_e(kl,Qe),kl),Hr=(_e(wl,Qe),wl),xl=(Ge(bl,[{key:"bindCreateImage",value:function(n,r){return"boolean"==typeof r?function(t,e){return n(t,"boolean"==typeof e?e:r)}:n}},{key:"popEmSize",value:function(){this.emSizeStack.pop()}},{key:"getUniqueId",value:function(){return"canvg".concat(++this.uniqueId)}},{key:"isImagesLoaded",value:function(){return this.images.every(function(t){return t.loaded})}},{key:"isFontsLoaded",value:function(){return this.fonts.every(function(t){return t.loaded})}},{key:"createDocumentElement",value:function(t){t=this.createElement(t.documentElement);return t.root=!0,t.addStylesFromStyleDefinition(),this.documentElement=t}},{key:"createElement",value:function(t){var e=t.nodeName.replace(/^[^:]+:/,""),e=bl.elementTypes[e];return new(void 0===e?Xo:e)(this,t)}},{key:"createTextNode",value:function(t){return new Vs(this,t)}},{key:"setViewBox",value:function(t){this.screen.setViewBox(function(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?Q(Object(n),!0).forEach(function(t){_r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}({document:this},t))}},{key:"window",get:function(){return this.screen.window}},{key:"fetch",get:function(){return this.screen.fetch}},{key:"ctx",get:function(){return this.screen.ctx}},{key:"emSize",get:function(){var t=this.emSizeStack;return t[t.length-1]},set:function(t){this.emSizeStack.push(t)}}]),bl);function bl(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.rootEmSize,r=void 0===n?12:n,i=e.emSize,a=void 0===i?12:i,n=e.createCanvas,i=void 0===n?bl.createCanvas:n,n=e.createImage,n=void 0===n?bl.createImage:n,e=e.anonymousCrossOrigin;$r(this,bl),this.canvg=t,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=r,this.emSize=a,this.createCanvas=i,this.createImage=this.bindCreateImage(n,e),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}function wl(){var t;return $r(this,wl),(t=mo(this,xo(wl).apply(this,arguments))).type="desc",t}function kl(){var t;return $r(this,kl),(t=mo(this,xo(kl).apply(this,arguments))).type="title",t}function Sl(t,e,n){return $r(this,Sl),(n=mo(this,xo(Sl).call(this,t,e,n))).type="feGaussianBlur",n.blurRadius=A(n.getAttribute("stdDeviation").getNumber()),n.extraFilterDistance=n.blurRadius,n}function Pl(){var t;return $r(this,Pl),(t=mo(this,xo(Pl).apply(this,arguments))).type="feComposite",t}function Al(){var t;return $r(this,Al),(t=mo(this,xo(Al).apply(this,arguments))).type="feMorphology",t}function El(t,e,n){return $r(this,El),(n=mo(this,xo(El).call(this,t,e,n))).type="feDropShadow",n.addStylesFromStyleDefinition(),n}function Cl(){var t;return $r(this,Cl),(t=mo(this,xo(Cl).apply(this,arguments))).type="filter",t}function Tl(){var t;return $r(this,Tl),(t=mo(this,xo(Tl).apply(this,arguments))).type="clipPath",t}xl.createCanvas=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n},xl.createImage=function(){return Z.apply(this,arguments)},xl.elementTypes={svg:Ds,rect:zs,circle:Wt,ellipse:e,line:de,polyline:ma,polygon:bn,path:Zt,pattern:Vt,marker:Se,defs:Me,linearGradient:Be,radialGradient:Yt,stop:Ys,animate:pu,animateColor:Au,animateTransform:Ue,font:kn,"font-face":pe,"missing-glyph":Cn,glyph:Je,text:Ne,tspan:pt,tref:rn,a:vi,textPath:tn,image:Xr,g:Us,symbol:Ye,style:Hu,use:wn,mask:ki,clipPath:ms,filter:gl,feDropShadow:dl,feMorphology:pl,feComposite:He,feColorMatrix:al,feGaussianBlur:Fe,title:ul,desc:Hr};var Ol,Vl,_e=(Ge(Ll,[{key:"fork",value:function(t,e){return Ll.from(t,e,J({},this.options,{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}))}},{key:"forkString",value:function(t,e){return Ll.fromString(t,e,J({},this.options,{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}))}},{key:"ready",value:function(){return this.screen.ready()}},{key:"isReady",value:function(){return this.screen.isReady()}},{key:"render",value:(Vl=Fr(Br.mark(function t(){var e,n=arguments;return Br.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<n.length&&void 0!==n[0]?n[0]:{},this.start(J({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},e)),t.next=4,this.ready();case 4:this.stop();case 5:case"end":return t.stop()}},t,this)})),function(){return Vl.apply(this,arguments)})},{key:"start",value:function(){var t=this.documentElement,e=this.screen,n=this.options;e.start(t,J({enableRedraw:!0},n,{},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}))}},{key:"stop",value:function(){this.screen.stop()}},{key:"resize",value:function(t){this.documentElement.resize(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2])}}],[{key:"from",value:(Ol=Fr(Br.mark(function t(e,n){var r,i,a=arguments;return Br.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=new po(r=2<a.length&&void 0!==a[2]?a[2]:{}),t.next=4,i.parse(n);case 4:return i=t.sent,t.abrupt("return",new Ll(e,i,r));case 6:case"end":return t.stop()}},t)})),function(){return Ol.apply(this,arguments)})},{key:"fromString",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return new Ll(t,new po(n).parseFromString(e),n)}}]),Ll),Ge=Object.freeze({__proto__:null,offscreen:function(){return{window:null,ignoreAnimation:!0,ignoreMouse:!0,createCanvas:function(t,e){return new OffscreenCanvas(t,e)},createImage:(t=Fr(Br.mark(function t(e){var n,r;return Br.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.blob();case 5:return r=t.sent,t.next=8,createImageBitmap(r);case 8:return r=t.sent,t.abrupt("return",r);case 10:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)})};var t},node:function(t){var e=t.DOMParser,n=t.canvas;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,fetch:t.fetch,createCanvas:n.createCanvas,createImage:n.loadImage}}});function Ll(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};$r(this,Ll),this.parser=new po(n),this.screen=new ao(t,n),this.options=n;n=new xl(this,n),e=n.createDocumentElement(e);this.document=n,this.documentElement=e}t.AElement=vi,t.AnimateColorElement=Au,t.AnimateElement=pu,t.AnimateTransformElement=Ue,t.BoundingBox=ps,t.CB1=C,t.CB2=T,t.CB3=O,t.CB4=V,t.Canvg=_e,t.CircleElement=Wt,t.ClipPathElement=ms,t.DefsElement=Me,t.DescElement=Hr,t.Document=xl,t.Element=Qe,t.EllipseElement=e,t.FeColorMatrixElement=al,t.FeCompositeElement=He,t.FeDropShadowElement=dl,t.FeGaussianBlurElement=Fe,t.FeMorphologyElement=pl,t.FilterElement=gl,t.Font=ts,t.FontElement=kn,t.FontFaceElement=pe,t.GElement=Us,t.GlyphElement=Je,t.GradientElement=$e,t.ImageElement=Xr,t.LineElement=de,t.LinearGradientElement=Be,t.MarkerElement=Se,t.MaskElement=ki,t.Matrix=on,t.MissingGlyphElement=Cn,t.Mouse=no,t.PSEUDO_ZERO=$n,t.Parser=po,t.PathElement=Zt,t.PathParser=js,t.PatternElement=Vt,t.Point=eo,t.PolygonElement=bn,t.PolylineElement=ma,t.Property=Ka,t.QB1=L,t.QB2=N,t.QB3=R,t.RadialGradientElement=Yt,t.RectElement=zs,t.RenderedElement=Pi,t.Rotate=ft,t.SVGElement=Ds,t.SVGFontLoader=Wu,t.Scale=On,t.Screen=ao,t.Skew=ln,t.SkewX=qt,t.SkewY=Gt,t.StopElement=Ys,t.StyleElement=Hu,t.SymbolElement=Ye,t.TRefElement=rn,t.TSpanElement=pt,t.TextElement=Ne,t.TextPathElement=tn,t.TitleElement=ul,t.Transform=ws,t.Translate=bs,t.UnknownElement=Xo,t.UseElement=wn,t.ViewPort=to,t.compressSpaces=w,t.default=_e,t.getSelectorSpecificity=f,t.normalizeAttributeName=l,t.parseExternalUrl=c,t.presets=Ge,t.toNumbers=b,t.trimLeft=s,t.trimRight=u,t.vectorMagnitude=g,t.vectorsAngle=E,t.vectorsRatio=k,Object.defineProperty(t,"__esModule",{value:!0})});