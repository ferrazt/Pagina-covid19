"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/dependency-wheel",["highcharts","highcharts/modules/sankey"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,n,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,n))}e(t=t?t._modules:{},"Series/DependencyWheel/DependencyWheelPoint.js",[t["Mixins/Nodes.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,n){var o,i,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.angle=void 0,t.fromNode=void 0,t.index=void 0,t.linksFrom=void 0,t.linksTo=void 0,t.options=void 0,t.series=void 0,t.shapeArgs=void 0,t.toNode=void 0,t}return n=n.extend,i=e.seriesTypes.sankey.prototype.pointClass,r(s,i),s.prototype.getDataLabelPath=function(t){var e=this.series.chart.renderer,n=this.shapeArgs,o=this.angle<0||this.angle>Math.PI,i=n.start||0,r=n.end||0;return this.dataLabelPath||(this.dataLabelPath=e.arc({open:!0,longArc:Math.abs(Math.abs(i)-Math.abs(r))<Math.PI?0:1}).add(t)),this.dataLabelPath.attr({x:n.x,y:n.y,r:n.r+(this.dataLabel.options.distance||0),start:o?i:r,end:o?r:i,clockwise:+o}),this.dataLabelPath},s.prototype.isValid=function(){return!0},n((e=s).prototype,{setState:t.setNodeState}),e}),e(t,"Series/DependencyWheel/DependencyWheelSeries.js",[t["Core/Animation/AnimationUtilities.js"],t["Series/DependencyWheel/DependencyWheelPoint.js"],t["Core/Globals.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,n,o,i){var r,s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=t.animObject,c=n.deg2rad;t=(n=o.seriesTypes).pie;var p=n.sankey;n=i.extend;var h,d=i.merge;function u(){var t=null!==h&&h.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.nodeColumns=void 0,t.nodes=void 0,t.points=void 0,t}return s(u,h=p),u.prototype.animate=function(t){var o;t||(o=a(this.options.animation).duration/2/this.nodes.length,this.nodes.forEach(function(t,e){var n=t.graphic;n&&(n.attr({opacity:0}),setTimeout(function(){t.graphic&&t.graphic.animate({opacity:1},{duration:o})},o*e))},this),this.points.forEach(function(t){var e=t.graphic;!t.isNode&&e&&e.attr({opacity:0}).animate({opacity:1},this.options.animation)},this))},u.prototype.createNode=function(t){var s=p.prototype.createNode.call(this,t);return s.index=this.nodes.length-1,s.getSum=function(){return s.linksFrom.concat(s.linksTo).reduce(function(t,e){return t+e.weight},0)},s.offset=function(t){function n(t){return t.fromNode===s?t.toNode:t.fromNode}var e,o=0;for((i=s.linksFrom.concat(s.linksTo)).sort(function(t,e){return n(t).index-n(e).index}),e=0;e<i.length;e++)if(n(i[e]).index>s.index){var i=i.slice(0,e).reverse().concat(i.slice(e).reverse()),r=!0;break}for(r||i.reverse(),e=0;e<i.length;e++){if(i[e]===t)return o;o+=i[e].weight}},s},u.prototype.createNodeColumns=function(){var e=[this.createNodeColumn()];return this.nodes.forEach(function(t){t.column=0,e[0].push(t)}),e},u.prototype.getNodePadding=function(){return this.options.nodePadding/Math.PI},u.prototype.translate=function(){var h=this.options,d=2*Math.PI/(this.chart.plotHeight+this.getNodePadding()),i=this.getCenter(),u=(h.startAngle-90)*c;p.prototype.translate.call(this),this.nodeColumns[0].forEach(function(t){var a,c,e,p,n,o;t.sum&&(o=t.shapeArgs,a=i[0],c=i[1],e=i[2]/2,p=e-h.nodeWidth,n=u+d*(o.y||0),o=u+d*((o.y||0)+(o.height||0)),t.angle=n+(o-n)/2,t.shapeType="arc",t.shapeArgs={x:a,y:c,r:e,innerR:p,start:n,end:o},t.dlBox={x:a+Math.cos((n+o)/2)*(e+p)/2,y:c+Math.sin((n+o)/2)*(e+p)/2,width:1,height:1},t.linksFrom.forEach(function(r){var s,t;r.linkBase&&(t=r.linkBase.map(function(t,e){t*=d;var n=Math.cos(u+t)*(1+p),o=Math.sin(u+t)*(1+p),i=h.curveFactor;return(s=Math.abs(r.linkBase[3-e]*d-t))>Math.PI&&(s=2*Math.PI-s),(s*=p)<p&&(i*=s/p),{x:a+n,y:c+o,cpX:a+(1-i)*n,cpY:c+(1-i)*o}}),r.shapeArgs={d:[["M",t[0].x,t[0].y],["A",p,p,0,0,1,t[1].x,t[1].y],["C",t[1].cpX,t[1].cpY,t[2].cpX,t[2].cpY,t[2].x,t[2].y],["A",p,p,0,0,1,t[3].x,t[3].y],["C",t[3].cpX,t[3].cpY,t[0].cpX,t[0].cpY,t[0].x,t[0].y]]})}))})},u.defaultOptions=d(p.defaultOptions,{center:[null,null],curveFactor:.6,startAngle:0}),n((i=u).prototype,{orderNodes:!1,getCenter:t.prototype.getCenter}),i.prototype.pointClass=e,o.registerSeriesType("dependencywheel",i),i}),e(t,"masters/modules/dependency-wheel.src.js",[],function(){})});