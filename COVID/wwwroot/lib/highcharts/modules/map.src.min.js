"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/map",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){t=t?t._modules:{};function e(t,e,o,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,o))}e(t,"Core/Axis/MapAxis.js",[t["Core/Axis/Axis.js"],t["Core/Utilities.js"]],function(t,e){var o=e.addEvent,n=e.pick,i=function(t){this.axis=t},e=(r.compose=function(t){t.keepProps.push("mapAxis"),o(t,"init",function(){var t=this;t.mapAxis||(t.mapAxis=new i(t))}),o(t,"getSeriesExtremes",function(){var t,o;this.mapAxis&&(o=[],(t=this).isXAxis&&(t.series.forEach(function(t,e){t.useMapGeometry&&(o[e]=t.xData,t.xData=[])}),t.mapAxis.seriesXData=o))}),o(t,"afterGetSeriesExtremes",function(){var t,o,i,r,s;this.mapAxis&&(o=(t=this).mapAxis.seriesXData||[],t.isXAxis&&(i=n(t.dataMin,Number.MAX_VALUE),r=n(t.dataMax,-Number.MAX_VALUE),t.series.forEach(function(t,e){t.useMapGeometry&&(i=Math.min(i,n(t.minX,i)),r=Math.max(r,n(t.maxX,r)),t.xData=o[e],s=!0)}),s&&(t.dataMin=i,t.dataMax=r),t.mapAxis.seriesXData=void 0))}),o(t,"afterSetAxisTranslation",function(){var t,e,o,i;this.mapAxis&&(t=(o=(e=this).chart).plotWidth/o.plotHeight,o=o.xAxis[0],"yAxis"===e.coll&&void 0!==o.transA&&e.series.forEach(function(t){t.preserveAspectRatio&&(i=!0)}),i&&(e.transA=o.transA=Math.min(e.transA,o.transA),o=((e=t/((o.max-o.min)/(e.max-e.min))<1?e:o).max-e.min)*e.transA,e.mapAxis.pixelPadding=e.len-o,e.minPixelPadding=e.mapAxis.pixelPadding/2,(o=e.mapAxis.fixTo)&&(o=o[1]-e.toValue(o[0],!0),o*=e.transA,(Math.abs(o)>e.minPixelPadding||e.min===e.dataMin&&e.max===e.dataMax)&&(o=0),e.minPixelPadding-=o)))}),o(t,"render",function(){this.mapAxis&&(this.mapAxis.fixTo=void 0)})},r);function r(){}return e.compose(t),e}),e(t,"Mixins/ColorSeries.js",[],function(){return{colorPointMixin:{setVisible:function(t){var e=this,o=t?"show":"hide";e.visible=e.options.visible=Boolean(t),["graphic","dataLabel"].forEach(function(t){e[t]&&e[t][o]()}),this.series.buildKDTree()}},colorSeriesMixin:{optionalAxis:"colorAxis",colorAxis:0,translateColors:function(){var o=this,t=this.data.length?this.data:this.points,i=this.options.nullColor,r=this.colorAxis,s=this.colorKey;t.forEach(function(t){var e=t.getNestedProperty(s),e=t.options.color||(t.isNull||null===t.value?i:r&&void 0!==e?r.toColor(e,t):t.color||o.color);e&&t.color!==e&&(t.color=e,"point"===o.options.legendType&&t.legendItem&&o.chart.legend.colorizeItem(t,t.visible))})}}}}),e(t,"Core/Axis/ColorAxis.js",[t["Core/Axis/Axis.js"],t["Core/Chart/Chart.js"],t["Core/Color/Color.js"],t["Mixins/ColorSeries.js"],t["Core/Animation/Fx.js"],t["Core/Globals.js"],t["Core/Legend.js"],t["Mixins/LegendSymbol.js"],t["Core/Color/Palette.js"],t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(t,e,o,i,r,s,n,d,a,l,h,p){var c,u=this&&this.__extends||(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),m=o.parse,f=i.colorPointMixin,o=i.colorSeriesMixin,y=s.noop,i=p.addEvent,g=(p.erase,p.extend),b=p.isNumber,x=p.merge,v=p.pick,M=p.splat;g(h.prototype,o),g(l.prototype,f),e.prototype.collectionsWithUpdate.push("colorAxis"),e.prototype.collectionsWithInit.colorAxis=[e.prototype.addColorAxis];var C,A=(u(S,C=t),S.prototype.init=function(t,e){var o=this,i=t.options.legend||{},r=e.layout?"vertical"!==e.layout:"vertical"!==i.layout,i=x(S.defaultColorAxisOptions,e,{showEmpty:!1,title:null,visible:i.enabled&&(!e||!1!==e.visible)});o.coll="colorAxis",o.side=e.side||r?2:1,o.reversed=e.reversed||!r,o.opposite=!r,C.prototype.init.call(this,t,i),e.dataClasses&&o.initDataClasses(e),o.initStops(),o.horiz=r,o.zoomEnabled=!1},S.prototype.initDataClasses=function(t){var i,r=this.chart,s=0,n=r.options.chart.colorCount,a=this.options,l=t.dataClasses.length;this.dataClasses=i=[],this.legendItems=[],t.dataClasses.forEach(function(t,e){var o;t=x(t),i.push(t),!r.styledMode&&t.color||("category"===a.dataClassColor?(r.styledMode||(o=r.options.colors,n=o.length,t.color=o[s]),t.colorIndex=s,++s===n&&(s=0)):t.color=m(a.minColor).tweenTo(m(a.maxColor),l<2?.5:e/(l-1)))})},S.prototype.hasData=function(){return!!(this.tickPositions||[]).length},S.prototype.setTickPositions=function(){if(!this.dataClasses)return C.prototype.setTickPositions.call(this)},S.prototype.initStops=function(){var t=this;t.stops=t.options.stops||[[0,t.options.minColor],[1,t.options.maxColor]],t.stops.forEach(function(t){t.color=m(t[1])})},S.prototype.setOptions=function(t){C.prototype.setOptions.call(this,t),this.options.crosshair=this.options.marker},S.prototype.setAxisSize=function(){var t,e,o,i=this.legendSymbol,r=this.chart,s=r.options.legend||{};i?(this.left=t=i.attr("x"),this.top=e=i.attr("y"),this.width=o=i.attr("width"),this.height=i=i.attr("height"),this.right=r.chartWidth-t-o,this.bottom=r.chartHeight-e-i,this.len=this.horiz?o:i,this.pos=this.horiz?t:e):this.len=(this.horiz?s.symbolWidth:s.symbolHeight)||S.defaultLegendLength},S.prototype.normalizedValue=function(t){var e=this;return e.logarithmic&&(t=e.logarithmic.log2lin(t)),1-(e.max-t)/(e.max-e.min||1)},S.prototype.toColor=function(t,e){var o,i,r,s,n,a,l=this.dataClasses,p=this.stops;if(l){for(a=l.length;a--;)if(i=(n=l[a]).from,r=n.to,(void 0===i||i<=t)&&(void 0===r||t<=r)){s=n.color,e&&(e.dataClass=a,e.colorIndex=n.colorIndex);break}}else{for(o=this.normalizedValue(t),a=p.length;a--&&!(o>p[a][0]););i=p[a]||p[a+1],o=1-((r=p[a+1]||i)[0]-o)/(r[0]-i[0]||1),s=i.color.tweenTo(r.color,o)}return s},S.prototype.getOffset=function(){var t=this,e=t.legendGroup,o=t.chart.axisOffset[t.side];e&&(t.axisParent=e,C.prototype.getOffset.call(this),t.added||(t.added=!0,t.labelLeft=0,t.labelRight=t.width),t.chart.axisOffset[t.side]=o)},S.prototype.setLegendColor=function(){var t=this.horiz,e=this.reversed,o=e?1:0,e=e?0:1,o=t?[o,0,e,0]:[0,e,0,o];this.legendColor={linearGradient:{x1:o[0],y1:o[1],x2:o[2],y2:o[3]},stops:this.stops}},S.prototype.drawLegendSymbol=function(t,e){var o=t.padding,i=t.options,r=this.horiz,s=v(i.symbolWidth,r?S.defaultLegendLength:12),n=v(i.symbolHeight,r?12:S.defaultLegendLength),a=v(i.labelPadding,r?16:30),i=v(i.itemDistance,10);this.setLegendColor(),e.legendSymbol=this.chart.renderer.rect(0,t.baseline-11,s,n).attr({zIndex:1}).add(e.legendGroup),this.legendItemWidth=s+o+(r?i:a),this.legendItemHeight=n+o+(r?a:0)},S.prototype.setState=function(e){this.series.forEach(function(t){t.setState(e)})},S.prototype.setVisible=function(){},S.prototype.getSeriesExtremes=function(){var t,e,o,i,r,s,n,a,l=this.series,p=l.length;for(this.dataMin=1/0,this.dataMax=-1/0;p--;){if(a=(r=l[p]).colorKey=v(r.options.colorKey,r.colorKey,r.pointValKey,r.zoneAxis,"y"),o=r.pointArrayMap,i=r[a+"Min"]&&r[a+"Max"],r[a+"Data"])t=r[a+"Data"];else if(o){if(t=[],e=o.indexOf(a),s=r.yData,0<=e&&s)for(n=0;n<s.length;n++)t.push(v(s[n][e],s[n]))}else t=r.yData;i?(r.minColorValue=r[a+"Min"],r.maxColorValue=r[a+"Max"]):(a=h.prototype.getExtremes.call(r,t),r.minColorValue=a.dataMin,r.maxColorValue=a.dataMax),void 0!==r.minColorValue&&(this.dataMin=Math.min(this.dataMin,r.minColorValue),this.dataMax=Math.max(this.dataMax,r.maxColorValue)),i||h.prototype.applyExtremes.call(r)}},S.prototype.drawCrosshair=function(t,e){var o,i=this,r=e&&e.plotX,s=e&&e.plotY,n=i.pos,a=i.len;e&&((o=i.toPixels(e.getNestedProperty(e.series.colorKey)))<n?o=n-2:n+a<o&&(o=n+a+2),e.plotX=o,e.plotY=i.len-o,C.prototype.drawCrosshair.call(this,t,e),e.plotX=r,e.plotY=s,i.cross&&!i.cross.addedToColorAxis&&i.legendGroup&&(i.cross.addClass("highcharts-coloraxis-marker").add(i.legendGroup),i.cross.addedToColorAxis=!0,i.chart.styledMode||"object"!=typeof i.crosshair||i.cross.attr({fill:i.crosshair.color})))},S.prototype.getPlotLinePath=function(t){var e=this.left,o=t.translatedValue,i=this.top;return b(o)?this.horiz?[["M",o-4,i-6],["L",o+4,i-6],["L",o,i],["Z"]]:[["M",e,o],["L",e-6,o+6],["L",e-6,o-6],["Z"]]:C.prototype.getPlotLinePath.call(this,t)},S.prototype.update=function(t,e){var o=this,i=o.chart.legend;this.series.forEach(function(t){t.isDirtyData=!0}),(t.dataClasses&&i.allItems||o.dataClasses)&&o.destroyItems(),C.prototype.update.call(this,t,e),o.legendItem&&(o.setLegendColor(),i.colorizeItem(this,!0))},S.prototype.destroyItems=function(){var t=this,e=t.chart;t.legendItem?e.legend.destroyItem(t):t.legendItems&&t.legendItems.forEach(function(t){e.legend.destroyItem(t)}),e.isDirtyLegend=!0},S.prototype.destroy=function(){this.chart.isDirtyLegend=!0,this.destroyItems(),C.prototype.destroy.apply(this,[].slice.call(arguments))},S.prototype.remove=function(t){this.destroyItems(),C.prototype.remove.call(this,t)},S.prototype.getDataClassLegendSymbols=function(){var n,a=this,l=a.chart,p=a.legendItems,t=l.options.legend,h=t.valueDecimals,c=t.valueSuffix||"";return p.length||a.dataClasses.forEach(function(t,e){var o=!0,i=t.from,r=t.to,s=l.numberFormatter;n="",void 0===i?n="< ":void 0===r&&(n="> "),void 0!==i&&(n+=s(i,h)+c),void 0!==i&&void 0!==r&&(n+=" - "),void 0!==r&&(n+=s(r,h)+c),p.push(g({chart:l,name:n,options:{},drawLegendSymbol:d.drawRectangle,visible:!0,setState:y,isDataClass:!0,setVisible:function(){o=a.visible=!o,a.series.forEach(function(t){t.points.forEach(function(t){t.dataClass===e&&t.setVisible(o)})}),l.legend.colorizeItem(this,o)}},t))}),p},S.defaultLegendLength=200,S.defaultColorAxisOptions={lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:a.neutralColor40},labels:{overflow:"justify",rotation:0},minColor:a.highlightColor10,maxColor:a.highlightColor100,tickLength:5,showInLegend:!0},S.keepProps=["legendGroup","legendItemHeight","legendItemWidth","legendItem","legendSymbol"],S);function S(t,e){var o=C.call(this,t,e)||this;return o.beforePadding=!1,o.chart=void 0,o.coll="colorAxis",o.dataClasses=void 0,o.legendItem=void 0,o.legendItems=void 0,o.name="",o.options=void 0,o.stops=void 0,o.visible=!0,o.init(t,e),o}return Array.prototype.push.apply(t.keepProps,A.keepProps),s.ColorAxis=A,["fill","stroke"].forEach(function(t){r.prototype[t+"Setter"]=function(){this.elem.attr(t,m(this.start).tweenTo(m(this.end),this.pos),null,!0)}}),i(e,"afterGetAxes",function(){var o=this,t=o.options;this.colorAxis=[],t.colorAxis&&(t.colorAxis=M(t.colorAxis),t.colorAxis.forEach(function(t,e){t.index=e,new A(o,t)}))}),i(h,"bindAxes",function(){var t=this.axisTypes;t?-1===t.indexOf("colorAxis")&&t.push("colorAxis"):this.axisTypes=["colorAxis"]}),i(n,"afterGetAllItems",function(e){function o(t){-1!==(t=e.allItems.indexOf(t))&&(r.destroyItem(e.allItems[t]),e.allItems.splice(t,1))}var i,t,r=this,s=[],n=this.chart.colorAxis||[];for(n.forEach(function(t){(i=t.options)&&i.showInLegend&&(i.dataClasses&&i.visible?s=s.concat(t.getDataClassLegendSymbols()):i.visible&&s.push(t),t.series.forEach(function(t){t.options.showInLegend&&!i.dataClasses||("point"===t.options.legendType?t.points.forEach(function(t){o(t)}):o(t))}))}),t=s.length;t--;)e.allItems.unshift(s[t])}),i(n,"afterColorizeItem",function(t){t.visible&&t.item.legendColor&&t.item.legendSymbol.attr({fill:t.item.legendColor})}),i(n,"afterUpdate",function(){var t=this.chart.colorAxis;t&&t.forEach(function(t){t.update({},arguments[2])})}),i(h,"afterTranslate",function(){(this.chart.colorAxis&&this.chart.colorAxis.length||this.colorAttribs)&&this.translateColors()}),A}),e(t,"Mixins/ColorMapSeries.js",[t["Core/Globals.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(t,e,o){var i=o.defined,r=o.addEvent,o=t.noop,t=t.seriesTypes;return r(e,"afterSetState",function(t){this.moveToTopOnHover&&this.graphic&&this.graphic.attr({zIndex:t&&"hover"===t.state?1:0})}),{colorMapPointMixin:{dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return null!==this.value&&this.value!==1/0&&this.value!==-1/0}},colorMapSeriesMixin:{pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:o,parallelArrays:["x","y","value"],colorKey:"value",pointAttribs:t.column.prototype.pointAttribs,colorAttribs:function(t){var e={};return!i(t.color)||t.state&&"normal"!==t.state||(e[this.colorProp||"fill"]=t.color),e}}}}),e(t,"Maps/MapNavigationOptionsDefault.js",[t["Core/DefaultOptions.js"],t["Core/Utilities.js"]],function(t,e){var o={buttonOptions:{alignTo:"plotBox",align:"left",verticalAlign:"top",x:0,width:18,height:18,padding:5,style:{fontSize:"15px",fontWeight:"bold"},theme:{"stroke-width":1,"text-align":"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:0},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:28}},mouseWheelSensitivity:1.1};return(0,e.extend)(t.defaultOptions.lang,{zoomIn:"Zoom in",zoomOut:"Zoom out"}),t.defaultOptions.mapNavigation=o}),e(t,"Maps/MapNavigation.js",[t["Core/Chart/Chart.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,e,o){var i=e.doc,c=o.addEvent,d=o.extend,u=o.merge,m=o.objectEach,f=o.pick;function y(t){t&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)}function r(t){this.init(t)}r.prototype.init=function(t){(this.chart=t).mapNavButtons=[]},r.prototype.update=function(t){function r(t){this.handler.call(l,t),y(t)}var s,n,a,l=this.chart,p=l.options.mapNavigation,h=l.mapNavButtons;for(t&&(p=l.options.mapNavigation=u(l.options.mapNavigation,t));h.length;)h.pop().destroy();f(p.enableButtons,p.enabled)&&!l.renderer.forExport&&m(p.buttons,function(t,e){t=u(p.buttonOptions,t),!l.styledMode&&t.theme&&((s=t.theme).style=u(t.theme.style,t.style),a=s.states,n=a&&a.hover,a=a&&a.select,delete s.states);var o,i=l.renderer.button(t.text||"",0,0,r,s,n,a,void 0,"zoomIn"===e?"topbutton":"bottombutton").addClass("highcharts-map-navigation highcharts-"+{zoomIn:"zoom-in",zoomOut:"zoom-out"}[e]).attr({width:t.width,height:t.height,title:l.options.lang[e],padding:t.padding,zIndex:5}).add();i.handler=t.onclick,c(i.element,"dblclick",y),h.push(i),d(t,{width:i.width,height:2*i.height}),l.hasLoaded?i.align(t,!1,t.alignTo):o=c(l,"load",function(){i.element&&i.align(t,!1,t.alignTo),o()})}),this.updateEvents(p)},r.prototype.updateEvents=function(t){var e=this.chart;f(t.enableDoubleClickZoom,t.enabled)||t.enableDoubleClickZoomTo?this.unbindDblClick=this.unbindDblClick||c(e.container,"dblclick",function(t){e.pointer.onContainerDblClick(t)}):this.unbindDblClick&&(this.unbindDblClick=this.unbindDblClick()),f(t.enableMouseWheelZoom,t.enabled)?this.unbindMouseWheel=this.unbindMouseWheel||c(e.container,void 0!==i.onwheel?"wheel":void 0!==i.onmousewheel?"mousewheel":"DOMMouseScroll",function(t){return e.pointer.inClass(t.target,"highcharts-no-mousewheel")||(e.pointer.onContainerMouseWheel(t),y(t)),!1}):this.unbindMouseWheel&&(this.unbindMouseWheel=this.unbindMouseWheel())},d(t.prototype,{fitToBox:function(o,i){return[["x","width"],["y","height"]].forEach(function(t){var e=t[0],t=t[1];o[e]+o[t]>i[e]+i[t]&&(o[t]>i[t]?(o[t]=i[t],o[e]=i[e]):o[e]=i[e]+i[t]-o[t]),o[t]>i[t]&&(o[t]=i[t]),o[e]<i[e]&&(o[e]=i[e])}),o},mapZoom:function(t,e,o,i,r,s){var n=this.xAxis[0],a=n.max-n.min,l=f(e,n.min+a/2),p=a*t,h=this.yAxis[0],c=h.max-h.min,d=f(o,h.min+c/2),u=c*t,a=i?(i-n.pos)/n.len:.5,c=r?(r-h.pos)/h.len:.5,p=this.fitToBox({x:l-p*a,y:d-u*c,width:p,height:u},{x:n.dataMin,y:h.dataMin,width:n.dataMax-n.dataMin,height:h.dataMax-h.dataMin}),u=p.x<=n.dataMin&&p.width>=n.dataMax-n.dataMin&&p.y<=h.dataMin&&p.height>=h.dataMax-h.dataMin;i&&n.mapAxis&&(n.mapAxis.fixTo=[i-n.pos,e]),r&&h.mapAxis&&(h.mapAxis.fixTo=[r-h.pos,o]),void 0===t||u?(n.setExtremes(void 0,void 0,!1),h.setExtremes(void 0,void 0,!1)):(n.setExtremes(p.x,p.x+p.width,!1),h.setExtremes(p.y,p.y+p.height,!1)),this.redraw(s)}}),c(t,"beforeRender",function(){this.mapNavigation=new r(this),this.mapNavigation.update()}),e.MapNavigation=r}),e(t,"Maps/MapPointer.js",[t["Core/Pointer.js"],t["Core/Utilities.js"]],function(t,e){var i,o=e.extend,r=e.pick,e=e.wrap,s=0;o(t.prototype,{onContainerDblClick:function(t){var e=this.chart;t=this.normalize(t),e.options.mapNavigation.enableDoubleClickZoomTo?e.pointer.inClass(t.target,"highcharts-tracker")&&e.hoverPoint&&e.hoverPoint.zoomTo():e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapZoom(.5,e.xAxis[0].toValue(t.chartX),e.yAxis[0].toValue(t.chartY),t.chartX,t.chartY)},onContainerMouseWheel:function(t){var e=this.chart,o=(t=this.normalize(t)).deltaY||t.detail||-t.wheelDelta/120;1<=Math.abs(o)&&(s+=Math.abs(o),i&&clearTimeout(i),i=setTimeout(function(){s=0},50)),s<10&&e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapZoom(Math.pow(e.options.mapNavigation.mouseWheelSensitivity,o),e.xAxis[0].toValue(t.chartX),e.yAxis[0].toValue(t.chartY),t.chartX,t.chartY,!(Math.abs(o)<1)&&void 0)}}),e(t.prototype,"zoomOption",function(t){var e=this.chart.options.mapNavigation;r(e.enableTouchZoom,e.enabled)&&(this.chart.options.chart.pinchType="xy"),t.apply(this,[].slice.call(arguments,1))}),e(t.prototype,"pinchTranslate",function(t,e,o,i,r,s,n){t.call(this,e,o,i,r,s,n),"map"===this.chart.options.chart.type&&this.hasZoom&&(t=i.scaleX>i.scaleY,this.pinchTranslateDirection(!t,e,o,i,r,s,n,t?i.scaleX:i.scaleY))})}),e(t,"Maps/MapSymbols.js",[t["Core/Renderer/SVG/SVGRenderer.js"]],function(t){t=t.prototype.symbols;function s(t,e,o,i,r,s,n,a){return[["M",t+r,e],["L",t+o-s,e],["C",t+o-s/2,e,t+o,e+s/2,t+o,e+s],["L",t+o,e+i-n],["C",t+o,e+i-n/2,t+o-n/2,e+i,t+o-n,e+i],["L",t+a,e+i],["C",t+a/2,e+i,t,e+i-a/2,t,e+i-a],["L",t,e+r],["C",t,e+r/2,t+r/2,e,t+r,e],["Z"]]}return t.bottombutton=function(t,e,o,i,r){return r=r&&r.r||0,s(t-1,e-1,o,i,0,0,r,r)},t.topbutton=function(t,e,o,i,r){return r=r&&r.r||0,s(t-1,e-1,o,i,r,r,0,0)},t}),e(t,"Core/Chart/MapChart.js",[t["Core/Chart/Chart.js"],t["Core/DefaultOptions.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,o,i){var r,s,n,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=e.getOptions,p=i.merge,h=i.pick,t=(a(c,s=t),c.prototype.init=function(t,e){var o={endOnTick:!1,visible:!1,minPadding:0,maxPadding:0,startOnTick:!1},i=l().credits,t=p({chart:{panning:{enabled:!0,type:"xy"},type:"map"},credits:{mapText:h(i.mapText,' Â© <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:h(i.mapTextFull,"{geojson.copyright}")},tooltip:{followTouchMove:!1},xAxis:o,yAxis:p(o,{reversed:!0})},t,{chart:{inverted:!1,alignTicks:!1}});s.prototype.init.call(this,t,e)},c);function c(){return null!==s&&s.apply(this,arguments)||this}return(n=t=t||{}).maps={},n.mapChart=function(t,e,o){return new n(t,e,o)},n.splitPath=function(t){return t="string"==typeof t?(t=t.replace(/([A-Za-z])/g," $1 ").replace(/^\s*/,"").replace(/\s*$/,"")).split(/[ ,;]+/).map(function(t){return/[A-za-z]/.test(t)?t:parseFloat(t)}):t,o.prototype.pathToSegments(t)},t}),e(t,"Series/Map/MapPoint.js",[t["Mixins/ColorMapSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o){var i,r,s=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),t=t.colorMapPointMixin,e=e.seriesTypes.scatter,n=o.extend,s=(r=e.prototype.pointClass,s(a,r),a.prototype.applyOptions=function(t,e){var o=this.series,t=r.prototype.applyOptions.call(this,t,e),e=o.joinBy;return o.mapData&&o.mapMap&&(e=e[1],(e=void 0!==(e=r.prototype.getNestedProperty.call(t,e))&&o.mapMap[e])?(o.xyFromShape&&(t.x=e._midX,t.y=e._midY),n(t,e)):t.value=t.value||null),t},a.prototype.onMouseOver=function(t){o.clearTimeout(this.colorInterval),null!==this.value||this.series.options.nullInteraction?r.prototype.onMouseOver.call(this,t):this.series.onMouseOut(t)},a.prototype.zoomTo=function(){var t=this,e=t.series;e.xAxis.setExtremes(t._minX,t._maxX,!1),e.yAxis.setExtremes(t._minY,t._maxY,!1),e.chart.redraw()},a);function a(){var t=null!==r&&r.apply(this,arguments)||this;return t.options=void 0,t.path=void 0,t.series=void 0,t}return n(s.prototype,{dataLabelOnNull:t.dataLabelOnNull,isValid:t.isValid,moveToTopOnHover:t.moveToTopOnHover}),s}),e(t,"Series/Map/MapSeries.js",[t["Mixins/ColorMapSeries.js"],t["Core/Globals.js"],t["Mixins/LegendSymbol.js"],t["Core/Chart/MapChart.js"],t["Series/Map/MapPoint.js"],t["Core/Color/Palette.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,b,e,o,x,i,v,r,m,s){var n,a,l=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=t.colorMapSeriesMixin,h=b.noop,M=o.maps,f=o.splitPath,t=r.seriesTypes,y=t.column,o=t.scatter,t=s.extend,c=s.fireEvent,C=s.getNestedProperty,A=s.isArray,S=s.isNumber,j=s.merge,_=s.objectEach,g=s.pick,d=s.splat,i=(l(u,a=o),u.prototype.animate=function(t){var e=this.chart,o=this.options.animation,i=this.group,r=this.xAxis,s=this.yAxis,n=r.pos,a=s.pos;e.renderer.isSVG&&(!0===o&&(o={duration:1e3}),t?i.attr({translateX:n+r.len/2,translateY:a+s.len/2,scaleX:.001,scaleY:.001}):i.animate({translateX:n,translateY:a,scaleX:1,scaleY:1},o))},u.prototype.animateDrilldown=function(t){var e=this.chart.plotBox,o=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],i=o.bBox,r=this.chart.options.drilldown.animation;t||(e=Math.min(i.width/e.width,i.height/e.height),o.shapeArgs={scaleX:e,scaleY:e,translateX:i.x,translateY:i.y},this.points.forEach(function(t){t.graphic&&t.graphic.attr(o.shapeArgs).animate({scaleX:1,scaleY:1,translateX:0,translateY:0},r)}))},u.prototype.animateDrillupFrom=function(t){y.prototype.animateDrillupFrom.call(this,t)},u.prototype.animateDrillupTo=function(t){y.prototype.animateDrillupTo.call(this,t)},u.prototype.doFullTranslate=function(){return this.isDirtyData||this.chart.isResizing||this.chart.renderer.isVML||!this.baseTrans},u.prototype.drawMapDataLabels=function(){v.prototype.drawDataLabels.call(this),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)},u.prototype.drawPoints=function(){var o,i,r,s,n,a,l,p,h,c=this,t=c.xAxis,e=c.yAxis,d=c.group,u=c.chart,m=u.renderer,f=this.baseTrans;c.transformGroup||(c.transformGroup=m.g().attr({scaleX:1,scaleY:1}).add(d),c.transformGroup.survive=!0),c.doFullTranslate()?(u.hasRendered&&!u.styledMode&&c.points.forEach(function(t){t.shapeArgs&&(t.shapeArgs.fill=c.pointAttribs(t,t.state).fill)}),c.group=c.transformGroup,y.prototype.drawPoints.apply(c),c.group=d,c.points.forEach(function(t){var e;t.graphic&&(e="",t.name&&(e+="highcharts-name-"+t.name.replace(/ /g,"-").toLowerCase()),t.properties&&t.properties["hc-key"]&&(e+=" highcharts-key-"+t.properties["hc-key"].toLowerCase()),e&&t.graphic.addClass(e),u.styledMode&&t.graphic.css(c.pointAttribs(t,t.selected?"select":void 0)))}),this.baseTrans={originX:t.min-t.minPixelPadding/t.transA,originY:e.min-e.minPixelPadding/e.transA+(e.reversed?0:e.len/e.transA),transAX:t.transA,transAY:e.transA},this.transformGroup.animate({translateX:0,translateY:0,scaleX:1,scaleY:1})):(o=t.transA/f.transAX,i=e.transA/f.transAY,r=t.toPixels(f.originX,!0),s=e.toPixels(f.originY,!0),.99<o&&o<1.01&&.99<i&&i<1.01&&(i=o=1,r=Math.round(r),s=Math.round(s)),n=this.transformGroup,u.renderer.globalAnimation?(a=n.attr("translateX"),l=n.attr("translateY"),p=n.attr("scaleX"),h=n.attr("scaleY"),n.attr({animator:0}).animate({animator:1},{step:function(t,e){n.attr({translateX:a+(r-a)*e.pos,translateY:l+(s-l)*e.pos,scaleX:p+(o-p)*e.pos,scaleY:h+(i-h)*e.pos})}})):n.attr({translateX:r,translateY:s,scaleX:o,scaleY:i})),u.styledMode||d.element.setAttribute("stroke-width",g(c.options[c.pointAttrToOptions&&c.pointAttrToOptions["stroke-width"]||"borderWidth"],1)/(o||1)),this.drawMapDataLabels()},u.prototype.getBox=function(t){var a,l=Number.MAX_VALUE,p=-l,h=l,c=-l,d=l,u=l,e=this.xAxis,o=this.yAxis;(t||[]).forEach(function(t){var e,o,i,r,s,n;t.path&&("string"==typeof t.path?t.path=f(t.path):"M"===t.path[0]&&(t.path=m.prototype.pathToSegments(t.path)),e=t.path||[],o=-l,r=-(i=l),s=l,n=t.properties,t._foundBox||(e.forEach(function(t){var e=t[t.length-2],t=t[t.length-1];"number"==typeof e&&"number"==typeof t&&(i=Math.min(i,e),o=Math.max(o,e),s=Math.min(s,t),r=Math.max(r,t))}),t._midX=i+(o-i)*g(t.middleX,n&&n["hc-middle-x"],.5),t._midY=s+(r-s)*g(t.middleY,n&&n["hc-middle-y"],.5),t._maxX=o,t._minX=i,t._maxY=r,t._minY=s,t.labelrank=g(t.labelrank,(o-i)*(r-s)),t._foundBox=!0),p=Math.max(p,t._maxX),h=Math.min(h,t._minX),c=Math.max(c,t._maxY),d=Math.min(d,t._minY),u=Math.min(t._maxX-t._minX,t._maxY-t._minY,u),a=!0)}),a&&(this.minY=Math.min(d,g(this.minY,l)),this.maxY=Math.max(c,g(this.maxY,-l)),this.minX=Math.min(h,g(this.minX,l)),this.maxX=Math.max(p,g(this.maxX,-l)),e&&void 0===e.options.minRange&&(e.minRange=Math.min(5*u,(this.maxX-this.minX)/5,e.minRange||l)),o&&void 0===o.options.minRange&&(o.minRange=Math.min(5*u,(this.maxY-this.minY)/5,o.minRange||l)))},u.prototype.getExtremes=function(){var t=v.prototype.getExtremes.call(this,this.valueData),e=t.dataMin,t=t.dataMax;return this.chart.hasRendered&&this.isDirtyData&&this.getBox(this.options.data),S(e)&&(this.valueMin=e),S(t)&&(this.valueMax=t),{dataMin:this.minY,dataMax:this.maxY}},u.prototype.hasData=function(){return!!this.processedXData.length},u.prototype.pointAttribs=function(t,e){e=t.series.chart.styledMode?this.colorAttribs(t):y.prototype.pointAttribs.call(this,t,e);return e["stroke-width"]=g(t.options[this.pointAttrToOptions&&this.pointAttrToOptions["stroke-width"]||"borderWidth"],"inherit"),e},u.prototype.render=function(){var t=this,e=v.prototype.render;t.chart.renderer.isVML&&3e3<t.data.length?setTimeout(function(){e.call(t)}):e.call(t)},u.prototype.setData=function(r,t,e,o){var i,s,n,a,l,p=this.options,h=this.chart.options.chart,c=h&&h.map,d=p.mapData,u=this.joinBy,m=p.keys||this.pointArrayMap,f=[],y={},g=this.chart.mapTransforms;if(!d&&c&&(d="string"==typeof c?M[c]:c),r&&r.forEach(function(t,e){var o=0;if(S(t))r[e]={value:t};else if(A(t)){r[e]={},!p.keys&&t.length>m.length&&"string"==typeof t[0]&&(r[e]["hc-key"]=t[0],++o);for(var i=0;i<m.length;++i,++o)m[i]&&void 0!==t[o]&&(0<m[i].indexOf(".")?x.prototype.setNestedProperty(r[e],t[o],m[i]):r[e][m[i]]=t[o])}u&&"_i"===u[0]&&(r[e]._i=e)}),this.getBox(r),this.chart.mapTransforms=g=h.mapTransforms||d&&d["hc-transform"]||g,g&&_(g,function(t){t.rotation&&(t.cosAngle=Math.cos(t.rotation),t.sinAngle=Math.sin(t.rotation))}),d){for("FeatureCollection"===d.type&&(this.mapTitle=d.title,d=b.geojson(d,this.type,this)),this.mapData=d,this.mapMap={},n=0;n<d.length;n++)s=(i=d[n]).properties,i._i=n,u[0]&&s&&s[u[0]]&&(i[u[0]]=s[u[0]]),y[i[u[0]]]=i;this.mapMap=y,r&&u[1]&&(a=u[1],r.forEach(function(t){t=C(a,t);y[t]&&f.push(y[t])})),p.allAreas?(this.getBox(d),r=r||[],u[1]&&(l=u[1],r.forEach(function(t){f.push(C(l,t))})),f="|"+f.map(function(t){return t&&t[u[0]]}).join("|")+"|",d.forEach(function(t){u[0]&&-1!==f.indexOf("|"+t[u[0]]+"|")||(r.push(j(t,{value:null})),o=!1)})):this.getBox(f)}v.prototype.setData.call(this,r,t,e,o)},u.prototype.setOptions=function(t){var e=v.prototype.setOptions.call(this,t),t=e.joinBy;return(t=this.joinBy=d(t=null===t?"_i":t))[1]||(t[1]=t[0]),e},u.prototype.translate=function(){var e=this,o=e.xAxis,i=e.yAxis,r=e.doFullTranslate();e.generatePoints(),e.data.forEach(function(t){S(t._midX)&&S(t._midY)&&(t.plotX=o.toPixels(t._midX,!0),t.plotY=i.toPixels(t._midY,!0)),r&&(t.shapeType="path",t.shapeArgs={d:e.translatePath(t.path)})}),c(e,"afterTranslate")},u.prototype.translatePath=function(t){var e=this.xAxis,o=this.yAxis,i=e.min,r=e.transA,s=e.minPixelPadding,n=o.min,a=o.transA,l=o.minPixelPadding,p=[];return t&&t.forEach(function(t){"M"===t[0]?p.push(["M",(t[1]-(i||0))*r+s,(t[2]-(n||0))*a+l]):"L"===t[0]?p.push(["L",(t[1]-(i||0))*r+s,(t[2]-(n||0))*a+l]):"C"===t[0]?p.push(["C",(t[1]-(i||0))*r+s,(t[2]-(n||0))*a+l,(t[3]-(i||0))*r+s,(t[4]-(n||0))*a+l,(t[5]-(i||0))*r+s,(t[6]-(n||0))*a+l]):"Q"===t[0]?p.push(["Q",(t[1]-(i||0))*r+s,(t[2]-(n||0))*a+l,(t[3]-(i||0))*r+s,(t[4]-(n||0))*a+l]):"Z"===t[0]&&p.push(["Z"])}),p},u.defaultOptions=j(o.defaultOptions,{animation:!1,dataLabels:{crop:!1,formatter:function(){return this.point.value},inside:!0,overflow:!1,padding:0,verticalAlign:"middle"},marker:null,nullColor:i.neutralColor3,stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},turboThreshold:0,allAreas:!0,borderColor:i.neutralColor20,borderWidth:1,joinBy:"hc-key",states:{hover:{halo:null,brightness:.2},normal:{animation:!0},select:{color:i.neutralColor20},inactive:{opacity:1}}}),u);function u(){var t=null!==a&&a.apply(this,arguments)||this;return t.baseTrans=void 0,t.chart=void 0,t.data=void 0,t.group=void 0,t.joinBy=void 0,t.options=void 0,t.points=void 0,t.transformGroup=void 0,t}return t(i.prototype,{type:"map",axisTypes:p.axisTypes,colorAttribs:p.colorAttribs,colorKey:p.colorKey,directTouch:!0,drawDataLabels:h,drawGraph:h,drawLegendSymbol:e.drawRectangle,forceDL:!0,getExtremesFromAll:!0,getSymbol:p.getSymbol,parallelArrays:p.parallelArrays,pointArrayMap:p.pointArrayMap,pointClass:x,preserveAspectRatio:!0,searchPoint:h,trackerGroups:p.trackerGroups,useMapGeometry:!0}),r.registerSeriesType("map",i),i}),e(t,"Series/MapLine/MapLineSeries.js",[t["Series/Map/MapSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(o,t,e){var i,r,s=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=t.series,a=e.extend,e=e.merge,e=(s(l,r=o),l.prototype.pointAttribs=function(t,e){e=o.prototype.pointAttribs.call(this,t,e);return e.fill=this.options.fillColor,e},l.defaultOptions=e(o.defaultOptions,{lineWidth:1,fillColor:"none"}),l);function l(){var t=null!==r&&r.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return a(e.prototype,{type:"mapline",colorProp:"stroke",drawLegendSymbol:n.prototype.drawLegendSymbol,pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"}}),t.registerSeriesType("mapline",e),e}),e(t,"Series/MapPoint/MapPointPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),t=t.seriesTypes.scatter,s=e.merge;function n(){var t=null!==o&&o.apply(this,arguments)||this;return t.options=void 0,t.series=void 0,t}return o=t.prototype.pointClass,r(n,o),n.prototype.applyOptions=function(t,e){t=void 0!==t.lat&&void 0!==t.lon?s(t,this.series.chart.fromLatLonToPoint(t)):t;return o.prototype.applyOptions.call(this,t,e)},n}),e(t,"Series/MapPoint/MapPointSeries.js",[t["Series/MapPoint/MapPointPoint.js"],t["Core/Color/Palette.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o,i){var r,s,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=o.seriesTypes.scatter,l=i.extend,i=i.merge,e=(n(p,s=a),p.prototype.drawDataLabels=function(){s.prototype.drawDataLabels.call(this),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)},p.defaultOptions=i(a.defaultOptions,{dataLabels:{crop:!1,defer:!1,enabled:!0,formatter:function(){return this.point.name},overflow:!1,style:{color:e.neutralColor100}}}),p);function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return l(e.prototype,{type:"mappoint",forceDL:!0,pointClass:t}),o.registerSeriesType("mappoint",e),e}),e(t,"Series/Bubble/BubblePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,t,o){var i,r,s=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),t=t.seriesTypes.scatter.prototype.pointClass,o=o.extend,t=(s(n,r=t),n.prototype.haloPath=function(t){return e.prototype.haloPath.call(this,0===t?0:(this.marker&&this.marker.radius||0)+t)},n);function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.options=void 0,t.series=void 0,t}return o(t.prototype,{ttBelow:!1}),t}),e(t,"Series/Bubble/BubbleLegend.js",[t["Core/Chart/Chart.js"],t["Core/Color/Color.js"],t["Core/FormatUtilities.js"],t["Core/Globals.js"],t["Core/Legend.js"],t["Core/DefaultOptions.js"],t["Core/Color/Palette.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(t,e,r,n,o,i,s,a,l){var c=e.parse,p=n.noop,e=i.setOptions,i=l.addEvent,h=l.arrayMax,d=l.arrayMin,u=l.isNumber,m=l.merge,f=l.objectEach,y=l.pick,g=l.stableSort,l=l.wrap;e({legend:{bubbleLegend:{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"10px",color:s.neutralColor100},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}});b.prototype.init=function(t,e){this.options=t,this.visible=!0,this.chart=e.chart,this.legend=e},b.prototype.addToLegend=function(t){t.splice(this.options.legendIndex,0,this)},b.prototype.drawLegendSymbol=function(t){var e,o=this.chart,i=this.options,r=y(t.options.itemDistance,20),s=i.ranges,n=i.connectorDistance;this.fontMetrics=o.renderer.fontMetrics(i.labels.style.fontSize),s&&s.length&&u(s[0].value)?(g(s,function(t,e){return e.value-t.value}),this.ranges=s,this.setOptions(),this.render(),e=this.getMaxLabelSize(),s=2*(o=this.ranges[0].radius),o=0<(o=n-o+e.width)?o:0,this.maxLabel=e,this.movementX="left"===i.labels.align?o:0,this.legendItemWidth=s+o+r,this.legendItemHeight=s+this.fontMetrics.h/2):t.options.bubbleLegend.autoRanges=!0},b.prototype.setOptions=function(){var o=this.ranges,i=this.options,r=this.chart.series[i.seriesIndex],s=this.legend.baseline,n={zIndex:i.zIndex,"stroke-width":i.borderWidth},a={zIndex:i.zIndex,"stroke-width":i.connectorWidth},l={align:this.legend.options.rtl||"left"===i.labels.align?"right":"left",zIndex:i.zIndex},p=r.options.marker.fillOpacity,h=this.chart.styledMode;o.forEach(function(t,e){h||(n.stroke=y(t.borderColor,i.borderColor,r.color),n.fill=y(t.color,i.color,1!==p?c(r.color).setOpacity(p).get("rgba"):r.color),a.stroke=y(t.connectorColor,i.connectorColor,r.color)),o[e].radius=this.getRangeRadius(t.value),o[e]=m(o[e],{center:o[0].radius-o[e].radius+s}),h||m(!0,o[e],{bubbleAttribs:m(n),connectorAttribs:m(a),labelAttribs:l})},this)},b.prototype.getRangeRadius=function(t){var e=this.options,o=this.options.seriesIndex,i=this.chart.series[o],r=e.ranges[0].value,s=e.ranges[e.ranges.length-1].value,o=e.minSize,e=e.maxSize;return i.getRadius.call(this,s,r,o,e,t)},b.prototype.render=function(){var t=this.chart.renderer,e=this.options.zThreshold;this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),this.legendSymbol=t.g("bubble-legend"),this.legendItem=t.g("bubble-legend-item"),this.legendSymbol.translateX=0,this.legendSymbol.translateY=0,this.ranges.forEach(function(t){t.value>=e&&this.renderRange(t)},this),this.legendSymbol.add(this.legendItem),this.legendItem.add(this.legendGroup),this.hideOverlappingLabels()},b.prototype.renderRange=function(t){var e=this.ranges[0],o=this.legend,i=this.options,r=i.labels,s=this.chart,n=s.series[i.seriesIndex],a=s.renderer,l=this.symbols,p=l.labels,h=t.center,c=Math.abs(t.radius),d=i.connectorDistance||0,u=r.align,m=o.options.rtl||"left"===u?-d:d,f=i.borderWidth,y=i.connectorWidth,s=e.radius||0,o=h-c-f/2+y/2,d=this.fontMetrics,e=d.f/2-(d.h-d.f)/2,f=(o%1?1:.5)-(y%2?0:.5),d=a.styledMode;"center"===u&&(i.connectorDistance=m=0,t.labelAttribs.align="center"),y=o+i.labels.y,u=s+m+i.labels.x,l.bubbleItems.push(a.circle(s,h+f,c).attr(d?{}:t.bubbleAttribs).addClass((d?"highcharts-color-"+n.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(i.className||"")).add(this.legendSymbol)),l.connectors.push(a.path(a.crispLine([["M",s,o],["L",s+m,o]],i.connectorWidth)).attr(d?{}:t.connectorAttribs).addClass((d?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(i.connectorClassName||"")).add(this.legendSymbol)),i=a.text(this.formatLabel(t),u,y+e).attr(d?{}:t.labelAttribs).css(d?{}:r.style).addClass("highcharts-bubble-legend-labels "+(i.labels.className||"")).add(this.legendSymbol),p.push(i),i.placed=!0,i.alignAttr={x:u,y:y+e}},b.prototype.getMaxLabelSize=function(){var e,o;return this.symbols.labels.forEach(function(t){o=t.getBBox(!0),e=!e||o.width>e.width?o:e}),e||{}},b.prototype.formatLabel=function(t){var e=this.options,o=e.labels.formatter,i=e.labels.format,e=this.chart.numberFormatter;return i?r.format(i,t):o?o.call(t):e(t.value,1)},b.prototype.hideOverlappingLabels=function(){var t=this.chart,e=this.options.labels.allowOverlap,o=this.symbols;!e&&o&&(t.hideOverlappingLabels(o.labels),o.labels.forEach(function(t,e){t.newOpacity?t.newOpacity!==t.oldOpacity&&o.connectors[e].show():o.connectors[e].hide()}))},b.prototype.getRanges=function(){var o,e,t=this.legend.bubbleLegend,i=t.chart.series,r=t.options.ranges,s=Number.MAX_VALUE,n=-Number.MAX_VALUE;return i.forEach(function(t){t.isBubble&&!t.ignoreSeries&&(e=t.zData.filter(u)).length&&(s=y(t.options.zMin,Math.min(s,Math.max(d(e),!1===t.options.displayNegative?t.options.zThreshold:-Number.MAX_VALUE))),n=y(t.options.zMax,Math.max(n,h(e))))}),o=s===n?[{value:n}]:[{value:s},{value:(s+n)/2},{value:n,autoRanges:!0}],r.length&&r[0].radius&&o.reverse(),o.forEach(function(t,e){r&&r[e]&&(o[e]=m(r[e],t))}),o},b.prototype.predictBubbleSizes=function(){var t,e=this.chart,o=this.fontMetrics,i=e.legend.options,r=i.floating,s="horizontal"===i.layout,n=s?e.legend.lastLineHeight:0,a=e.plotSizeX,l=e.plotSizeY,p=e.series[this.options.seriesIndex],h=Math.ceil(p.minPxSize),i=Math.ceil(p.maxPxSize),e=p.options.maxSize,p=Math.min(l,a);return r||!/%$/.test(e)?t=i:(e=parseFloat(e),t=(p+n-o.h/2)*e/100/(e/100+1),(s&&a<=l-t||!s&&l<=a-t)&&(t=i)),[h,Math.ceil(t)]},b.prototype.updateRanges=function(t,e){var o=this.legend.options.bubbleLegend;o.minSize=t,o.maxSize=e,o.ranges=this.getRanges()},b.prototype.correctSizes=function(){var t=this.legend,e=this.chart.series[this.options.seriesIndex],o=e.maxPxSize,i=this.options.maxSize;1<Math.abs(Math.ceil(o)-i)&&(this.updateRanges(this.options.minSize,e.maxPxSize),t.render())},s=b;function b(t,e){this.chart=void 0,this.fontMetrics=void 0,this.legend=void 0,this.legendGroup=void 0,this.legendItem=void 0,this.legendItemHeight=void 0,this.legendItemWidth=void 0,this.legendSymbol=void 0,this.maxLabel=void 0,this.movementX=void 0,this.ranges=void 0,this.visible=void 0,this.symbols=void 0,this.options=void 0,this.setState=p,this.init(t,e)}return i(o,"afterGetAllItems",function(t){var e=this,o=e.bubbleLegend,i=e.options,r=i.bubbleLegend,s=e.chart.getVisibleBubbleSeriesIndex();o&&o.ranges&&o.ranges.length&&(r.ranges.length&&(r.autoRanges=!!r.ranges[0].autoRanges),e.destroyItem(o)),0<=s&&i.enabled&&r.enabled&&(r.seriesIndex=s,e.bubbleLegend=new n.BubbleLegend(r,e),e.bubbleLegend.addToLegend(t.allItems))}),t.prototype.getVisibleBubbleSeriesIndex=function(){for(var t=this.series,e=0;e<t.length;){if(t[e]&&t[e].isBubble&&t[e].visible&&t[e].zData.length)return e;e++}return-1},o.prototype.getLinesHeights=function(){for(var t,e=this.allItems,o=[],i=e.length,r=0,s=0,r=0;r<i;r++)if(e[r].legendItemHeight&&(e[r].itemHeight=e[r].legendItemHeight),e[r]===e[i-1]||e[r+1]&&e[r]._legendItemPos[1]!==e[r+1]._legendItemPos[1]){for(o.push({height:0}),t=o[o.length-1];s<=r;s++)e[s].itemHeight>t.height&&(t.height=e[s].itemHeight);t.step=r}return o},o.prototype.retranslateItems=function(o){var i,r,s,t=this.allItems,n=this.options.rtl,a=0;t.forEach(function(t,e){i=t.legendGroup.translateX,r=t._legendItemPos[1],((s=t.movementX)||n&&t.ranges)&&(s=n?i-t.options.maxSize/2:i+s,t.legendGroup.attr({translateX:s})),e>o[a].step&&a++,t.legendGroup.attr({translateY:Math.round(r+o[a].height/2)}),t._legendItemPos[1]=r+o[a].height/2})},i(a,"legendItemClick",function(){var t=this,e=t.chart,o=t.visible,i=t.chart.legend;i&&i.bubbleLegend&&(t.visible=!o,t.ignoreSeries=o,e=0<=e.getVisibleBubbleSeriesIndex(),i.bubbleLegend.visible!==e&&(i.update({bubbleLegend:{enabled:e}}),i.bubbleLegend.visible=e),t.visible=o)}),l(t.prototype,"drawChartBox",function(t,e,o){var i,r=this,s=r.legend,n=0<=r.getVisibleBubbleSeriesIndex();s&&s.options.enabled&&s.bubbleLegend&&s.options.bubbleLegend.autoRanges&&n?(i=s.bubbleLegend.options,n=s.bubbleLegend.predictBubbleSizes(),s.bubbleLegend.updateRanges(n[0],n[1]),i.placed||(s.group.placed=!1,s.allItems.forEach(function(t){t.legendGroup.translateY=null})),s.render(),r.getMargins(),r.axes.forEach(function(t){t.visible&&t.render(),i.placed||(t.setScale(),t.updateNames(),f(t.ticks,function(t){t.isNew=!0,t.isNewLabel=!0}))}),i.placed=!0,r.getMargins(),t.call(r,e,o),s.bubbleLegend.correctSizes(),s.retranslateItems(s.getLinesHeights())):(t.call(r,e,o),s&&s.options.enabled&&s.bubbleLegend&&(s.render(),s.retranslateItems(s.getLinesHeights())))}),n.BubbleLegend=s,n.BubbleLegend}),e(t,"Series/Bubble/BubbleSeries.js",[t["Core/Axis/Axis.js"],t["Series/Bubble/BubblePoint.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o,i,r,s,n){var a,l,p=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),h=o.parse,c=i.noop,d=s.seriesTypes,o=d.column,i=d.scatter,y=n.arrayMax,g=n.arrayMin,b=n.clamp,u=n.extend,x=n.isNumber,d=n.merge,v=n.pick,M=n.pInt,i=(p(m,l=i),m.prototype.animate=function(t){!t&&this.points.length<this.options.animationLimit&&this.points.forEach(function(t){var e=t.graphic;e&&e.width&&(this.hasRendered||e.attr({x:t.plotX,y:t.plotY,width:1,height:1}),e.animate(this.markerAttribs(t),this.options.animation))},this)},m.prototype.getRadii=function(t,e,o){for(var i,r=this.zData,s=this.yData,n=o.minPxSize,a=o.maxPxSize,l=[],p=0,h=r.length;p<h;p++)i=r[p],l.push(this.getRadius(t,e,n,a,i,s[p]));this.radii=l},m.prototype.getRadius=function(t,e,o,i,r,s){var n=this.options,a="width"!==n.sizeBy,l=n.zThreshold,p=e-t,h=.5;if(null===s||null===r)return null;if(x(r)){if(n.sizeByAbsoluteValue&&(r=Math.abs(r-l),e=p=Math.max(e-l,Math.abs(t-l)),t=0),r<t)return o/2-1;0<p&&(h=(r-t)/p)}return a&&0<=h&&(h=Math.sqrt(h)),Math.ceil(o+h*(i-o))/2},m.prototype.hasData=function(){return!!this.processedXData.length},m.prototype.pointAttribs=function(t,e){var o=this.options.marker.fillOpacity,e=r.prototype.pointAttribs.call(this,t,e);return 1!==o&&(e.fill=h(e.fill).setOpacity(o).get("rgba")),e},m.prototype.translate=function(){var t,e,o,i=this.data,r=this.radii;for(l.prototype.translate.call(this),t=i.length;t--;)e=i[t],o=r?r[t]:0,x(o)&&o>=this.minPxSize/2?(e.marker=u(e.marker,{radius:o,width:2*o,height:2*o}),e.dlBox={x:e.plotX-o,y:e.plotY-o,width:2*o,height:2*o}):e.shapeArgs=e.plotY=e.dlBox=void 0},m.defaultOptions=d(i.defaultOptions,{dataLabels:{formatter:function(){return this.point.z},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),m);function m(){var t=null!==l&&l.apply(this,arguments)||this;return t.data=void 0,t.maxPxSize=void 0,t.minPxSize=void 0,t.options=void 0,t.points=void 0,t.radii=void 0,t.yData=void 0,t.zData=void 0,t}return u(i.prototype,{alignDataLabel:o.prototype.alignDataLabel,applyZones:c,bubblePadding:!0,buildKDTree:c,directTouch:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:e,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),t.prototype.beforePadding=function(){var r=this,t=this.len,e=this.chart,s=0,n=t,a=this.isXAxis,l=a?"xData":"yData",p=this.min,h={},c=Math.min(e.plotWidth,e.plotHeight),d=Number.MAX_VALUE,u=-Number.MAX_VALUE,m=this.max-p,f=t/m,o=[];this.series.forEach(function(t){var i=t.options;!t.bubblePadding||!t.visible&&e.options.chart.ignoreHiddenSeries||(r.allowZoomOutside=!0,o.push(t),a&&(["minSize","maxSize"].forEach(function(t){var e=i[t],o=/%$/.test(e),e=M(e);h[t]=o?c*e/100:e}),t.minPxSize=h.minSize,t.maxPxSize=Math.max(h.maxSize,h.minSize),(t=t.zData.filter(x)).length&&(d=v(i.zMin,b(g(t),!1===i.displayNegative?i.zThreshold:-Number.MAX_VALUE,d)),u=v(i.zMax,Math.max(u,y(t))))))}),o.forEach(function(t){var e,o=t[l],i=o.length;if(a&&t.getRadii(d,u,t),0<m)for(;i--;)x(o[i])&&r.dataMin<=o[i]&&o[i]<=r.max&&(e=t.radii?t.radii[i]:0,s=Math.min((o[i]-p)*f-e,s),n=Math.max((o[i]-p)*f+e,n))}),o.length&&0<m&&!this.logarithmic&&(n-=t,f*=(t+Math.max(0,s)-Math.min(n,t))/t,[["min","userMin",s],["max","userMax",n]].forEach(function(t){void 0===v(r.options[t[0]],r[t[1]])&&(r[t[0]]+=t[2]/f)}))},s.registerSeriesType("bubble",i),i}),e(t,"Series/MapBubble/MapBubblePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=t.seriesTypes,t=s.bubble,n=s.map,s=e.extend,a=e.merge,r=(o=t.prototype.pointClass,r(l,o),l.prototype.applyOptions=function(t,e){e=t&&void 0!==t.lat&&void 0!==t.lon?o.prototype.applyOptions.call(this,a(t,this.series.chart.fromLatLonToPoint(t)),e):n.prototype.pointClass.prototype.applyOptions.call(this,t,e);return e},l.prototype.isValid=function(){return"number"==typeof this.z},l);function l(){return null!==o&&o.apply(this,arguments)||this}return s(r.prototype,{ttBelow:!1}),r}),e(t,"Series/MapBubble/MapBubbleSeries.js",[t["Series/Bubble/BubbleSeries.js"],t["Series/MapBubble/MapBubblePoint.js"],t["Series/Map/MapSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o,i,r){var s,n,a=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=r.extend,r=r.merge,t=(a(p,n=t),p.defaultOptions=r(t.defaultOptions,{animationLimit:500,tooltip:{pointFormat:"{point.name}: {point.z}"}}),p);function p(){var t=null!==n&&n.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return l(t.prototype,{type:"mapbubble",getBox:o.prototype.getBox,pointArrayMap:["z"],pointClass:e,setData:o.prototype.setData,setOptions:o.prototype.setOptions,xyFromShape:!0}),i.registerSeriesType("mapbubble",t),t}),e(t,"Series/Heatmap/HeatmapPoint.js",[t["Mixins/ColorMapSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o){var i,r,s=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=t.colorMapPointMixin,t=e.seriesTypes.scatter.prototype.pointClass,h=o.clamp,e=o.extend,c=o.pick,t=(s(a,r=t),a.prototype.applyOptions=function(t,e){e=r.prototype.applyOptions.call(this,t,e);return e.formatPrefix=e.isNull||null===e.value?"null":"point",e},a.prototype.getCellAttributes=function(){var t=this,e=t.series,o=e.options,i=(o.colsize||1)/2,r=(o.rowsize||1)/2,s=e.xAxis,n=e.yAxis,a=t.options.marker||e.options.marker,e=e.pointPlacementToXValue(),l=c(t.pointPadding,o.pointPadding,0),p={x1:h(Math.round(s.len-(s.translate(t.x-i,!1,!0,!1,!0,-e)||0)),-s.len,2*s.len),x2:h(Math.round(s.len-(s.translate(t.x+i,!1,!0,!1,!0,-e)||0)),-s.len,2*s.len),y1:h(Math.round(n.translate(t.y-r,!1,!0,!1,!0)||0),-n.len,2*n.len),y2:h(Math.round(n.translate(t.y+r,!1,!0,!1,!0)||0),-n.len,2*n.len)};return[["width","x"],["height","y"]].forEach(function(t){var e=t[0],o=t[1],i=o+"1",r=o+"2",s=Math.abs(p[i]-p[r]),n=a&&a.lineWidth||0,t=Math.abs(p[i]+p[r])/2;a[e]&&a[e]<s&&(p[i]=t-a[e]/2-n/2,p[r]=t+a[e]/2+n/2),l&&("y"===o&&(i=r,r=o+"1"),p[i]+=l,p[r]-=l)}),p},a.prototype.haloPath=function(t){if(!t)return[];var e=this.shapeArgs;return["M",e.x-t,e.y-t,"L",e.x-t,e.y+e.height+t,e.x+e.width+t,e.y+e.height+t,e.x+e.width+t,e.y-t,"Z"]},a.prototype.isValid=function(){return this.value!==1/0&&this.value!==-1/0},a);function a(){var t=null!==r&&r.apply(this,arguments)||this;return t.options=void 0,t.series=void 0,t.value=void 0,t.x=void 0,t.y=void 0,t}return e(t.prototype,{dataLabelOnNull:n.dataLabelOnNull,moveToTopOnHover:n.moveToTopOnHover}),t}),e(t,"Series/Heatmap/HeatmapSeries.js",[t["Core/Color/Color.js"],t["Mixins/ColorMapSeries.js"],t["Series/Heatmap/HeatmapPoint.js"],t["Mixins/LegendSymbol.js"],t["Core/Color/Palette.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(a,t,e,o,i,r,s,n){var l,p,h=this&&this.__extends||(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=t.colorMapSeriesMixin,d=r.series,u=r.seriesTypes,t=u.column,u=u.scatter,m=s.prototype.symbols,f=n.extend,y=n.fireEvent,g=n.isNumber,b=n.merge,x=n.pick,i=(h(v,p=u),v.prototype.drawPoints=function(){var e=this;((this.options.marker||{}).enabled||this._hasPointMarkers)&&(d.prototype.drawPoints.call(this),this.points.forEach(function(t){t.graphic&&(t.graphic[e.chart.styledMode?"css":"animate"](e.colorAttribs(t)),e.options.borderRadius&&t.graphic.attr({r:e.options.borderRadius}),null===t.value&&t.graphic.addClass("highcharts-null-point"))}))},v.prototype.getExtremes=function(){var t=d.prototype.getExtremes.call(this,this.valueData),e=t.dataMin,t=t.dataMax;return g(e)&&(this.valueMin=e),g(t)&&(this.valueMax=t),d.prototype.getExtremes.call(this)},v.prototype.getValidPoints=function(t,e){return d.prototype.getValidPoints.call(this,t,e,!0)},v.prototype.hasData=function(){return!!this.processedXData.length},v.prototype.init=function(){var t;d.prototype.init.apply(this,arguments),(t=this.options).pointRange=x(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1,m.ellipse=m.circle},v.prototype.markerAttribs=function(t,e){var o,i,r=t.marker||{},s=this.options.marker||{},n=t.shapeArgs||{},a=t.hasImage,l={};return a?{x:t.plotX,y:t.plotY}:(e&&(o=s.states[e]||{},i=r.states&&r.states[e]||{},[["width","x"],["height","y"]].forEach(function(t){l[t[0]]=(i[t[0]]||o[t[0]]||n[t[0]])+(i[t[0]+"Plus"]||o[t[0]+"Plus"]||0),l[t[1]]=n[t[1]]+(n[t[0]]-l[t[0]])/2})),e?l:n)},v.prototype.pointAttribs=function(t,e){var o=d.prototype.pointAttribs.call(this,t,e),i=this.options||{},r=this.chart.options.plotOptions||{},s=r.series||{},n=r.heatmap||{},r=i.borderColor||n.borderColor||s.borderColor,s=i.borderWidth||n.borderWidth||s.borderWidth||o["stroke-width"];return o.stroke=t&&t.marker&&t.marker.lineColor||i.marker&&i.marker.lineColor||r||this.color,o["stroke-width"]=s,e&&(e=(t=b(i.states[e],i.marker&&i.marker.states[e],t&&t.options.states&&t.options.states[e]||{})).brightness,o.fill=t.color||a.parse(o.fill).brighten(e||0).get(),o.stroke=t.lineColor),o},v.prototype.setClip=function(t){var e=this,o=e.chart;d.prototype.setClip.apply(e,arguments),!1===e.options.clip&&!t||e.markerGroup.clip((t||e.clipBox)&&e.sharedClipKey?o.sharedClips[e.sharedClipKey]:o.clipRect)},v.prototype.translate=function(){var t=this.options,s=t.marker&&t.marker.symbol||"rect",n=m[s]?s:"rect",a=-1!==["circle","square"].indexOf(n);this.generatePoints(),this.points.forEach(function(t){var e,o,i=t.getCellAttributes(),r={};r.x=Math.min(i.x1,i.x2),r.y=Math.min(i.y1,i.y2),r.width=Math.max(Math.abs(i.x2-i.x1),0),r.height=Math.max(Math.abs(i.y2-i.y1),0),o=t.hasImage=0===(t.marker&&t.marker.symbol||s||"").indexOf("url"),a&&(e=Math.abs(r.width-r.height),r.x=Math.min(i.x1,i.x2)+(r.width<r.height?0:e/2),r.y=Math.min(i.y1,i.y2)+(r.width<r.height?e/2:0),r.width=r.height=Math.min(r.width,r.height)),i={plotX:(i.x1+i.x2)/2,plotY:(i.y1+i.y2)/2,clientX:(i.x1+i.x2)/2,shapeType:"path",shapeArgs:b(!0,r,{d:m[n](r.x,r.y,r.width,r.height)})},o&&(t.marker={width:r.width,height:r.height}),f(t,i)}),y(this,"afterTranslate")},v.defaultOptions=b(u.defaultOptions,{animation:!1,borderRadius:0,borderWidth:0,nullColor:i.neutralColor3,dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}}}),v);function v(){var t=null!==p&&p.apply(this,arguments)||this;return t.colorAxis=void 0,t.data=void 0,t.options=void 0,t.points=void 0,t.valueMax=NaN,t.valueMin=NaN,t}return f(i.prototype,{alignDataLabel:t.prototype.alignDataLabel,axisTypes:c.axisTypes,colorAttribs:c.colorAttribs,colorKey:c.colorKey,directTouch:!0,drawLegendSymbol:o.drawRectangle,getExtremesFromAll:!0,getSymbol:d.prototype.getSymbol,parallelArrays:c.parallelArrays,pointArrayMap:["y","value"],pointClass:e,trackerGroups:c.trackerGroups}),r.registerSeriesType("heatmap",i),i}),e(t,"Extensions/GeoJSON.js",[t["Core/Chart/Chart.js"],t["Core/FormatUtilities.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,e,o,i){var l=e.format,r=o.win,s=i.error,p=i.extend,n=i.merge,i=i.wrap;function a(t,e){for(var o=!1,i=t.x,r=t.y,s=0,n=e.length-1;s<e.length;n=s++)e[s][1]>r!=e[n][1]>r&&i<(e[n][0]-e[s][0])*(r-e[s][1])/(e[n][1]-e[s][1])+e[s][0]&&(o=!o);return o}t.prototype.transformFromLatLon=function(t,e){var o=this.userOptions.chart&&this.userOptions.chart.proj4||r.proj4;if(!o)return s(21,!1,this),{x:0,y:null};var i=o(e.crs,[t.lon,t.lat]),o=e.cosAngle||e.rotation&&Math.cos(e.rotation),t=e.sinAngle||e.rotation&&Math.sin(e.rotation),i=e.rotation?[i[0]*o+i[1]*t,-i[0]*t+i[1]*o]:i;return{x:((i[0]-(e.xoffset||0))*(e.scale||1)+(e.xpan||0))*(e.jsonres||1)+(e.jsonmarginX||0),y:(((e.yoffset||0)-i[1])*(e.scale||1)+(e.ypan||0))*(e.jsonres||1)-(e.jsonmarginY||0)}},t.prototype.transformToLatLon=function(t,e){if(void 0!==r.proj4){var o={x:((t.x-(e.jsonmarginX||0))/(e.jsonres||1)-(e.xpan||0))/(e.scale||1)+(e.xoffset||0),y:((-t.y-(e.jsonmarginY||0))/(e.jsonres||1)+(e.ypan||0))/(e.scale||1)+(e.yoffset||0)},i=e.cosAngle||e.rotation&&Math.cos(e.rotation),t=e.sinAngle||e.rotation&&Math.sin(e.rotation),o=r.proj4(e.crs,"WGS84",e.rotation?{x:o.x*i+o.y*-t,y:o.x*t+o.y*i}:o);return{lat:o.y,lon:o.x}}s(21,!1,this)},t.prototype.fromPointToLatLon=function(t){var e,o=this.mapTransforms;if(o){for(e in o)if(Object.hasOwnProperty.call(o,e)&&o[e].hitZone&&a({x:t.x,y:-t.y},o[e].hitZone.coordinates[0]))return this.transformToLatLon(t,o[e]);return this.transformToLatLon(t,o.default)}s(22,!1,this)},t.prototype.fromLatLonToPoint=function(t){var e,o,i=this.mapTransforms;if(!i)return s(22,!1,this),{x:0,y:null};for(e in i)if(Object.hasOwnProperty.call(i,e)&&i[e].hitZone&&a({x:(o=this.transformFromLatLon(t,i[e])).x,y:-o.y},i[e].hitZone.coordinates[0]))return o;return this.transformFromLatLon(t,i.default)},o.geojson=function(t,r,e){function s(t){t.forEach(function(t,e){0===e?a.push(["M",t[0],-t[1]]):a.push(["L",t[0],-t[1]])})}var n=[],a=[];return r=r||"map",t.features.forEach(function(t){var e,o=t.geometry,i=o.type,o=o.coordinates,t=t.properties;a=[],"map"===r||"mapbubble"===r?("Polygon"===i?(o.forEach(s),a.push(["Z"])):"MultiPolygon"===i&&(o.forEach(function(t){t.forEach(s)}),a.push(["Z"])),a.length&&(e={path:a})):"mapline"===r?("LineString"===i?s(o):"MultiLineString"===i&&o.forEach(s),a.length&&(e={path:a})):"mappoint"===r&&"Point"===i&&(e={x:o[0],y:-o[1]}),e&&n.push(p(e,{name:t.name||t.NAME,properties:t}))}),e&&t.copyrightShort&&(e.chart.mapCredits=l(e.chart.options.credits.mapText,{geojson:t}),e.chart.mapCreditsFull=l(e.chart.options.credits.mapTextFull,{geojson:t})),n},i(t.prototype,"addCredits",function(t,e){e=n(!0,this.options.credits,e),this.mapCredits&&(e.href=null),t.call(this,e),this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})})}),e(t,"masters/modules/map.src.js",[t["Core/Globals.js"],t["Core/Chart/MapChart.js"]],function(t,e){t.MapChart=e,t.mapChart=t.Map=e.mapChart,t.maps=e.maps})});