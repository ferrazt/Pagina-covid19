"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/funnel",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){t=t?t._modules:{};function e(t,e,i,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,i))}e(t,"Series/Funnel/FunnelSeries.js",[t["Core/Chart/Chart.js"],t["Core/Globals.js"],t["Core/Color/Palette.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i,p,o){var n,r,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),O=e.noop,u=p.series,s=p.seriesTypes.pie,l=o.addEvent,c=o.extend,D=o.fireEvent,d=o.isArray,e=o.merge,S=o.pick,i=(a(h,r=s),h.prototype.alignDataLabel=function(t,e,i,o,n){var r=t.series,a=r.options.reversed,s=t.dlBox||t.shapeArgs,l=i.align,p=i.verticalAlign,c=((r.options||{}).dataLabels||{}).inside,d=r.center[1],h=a?2*d-t.plotY:t.plotY,d=r.getWidthAt(h-s.height/2+e.height),r="middle"===p?(s.topWidth-s.bottomWidth)/4:(d-s.bottomWidth)/2,h=s.y,d=s.x;"middle"===p?h=s.y-s.height/2+e.height/2:"top"===p&&(h=s.y-s.height+e.height+i.padding),("top"===p&&!a||"bottom"===p&&a||"middle"===p)&&("right"===l?d=s.x-i.padding+r:"left"===l&&(d=s.x+i.padding-r)),o={x:d,y:a?h-s.height:h,width:s.bottomWidth,height:s.height},i.verticalAlign="bottom",c&&!t.visible||u.prototype.alignDataLabel.call(this,t,e,i,o,n),c&&(!t.visible&&t.dataLabel&&(t.dataLabel.placed=!1),t.contrastColor&&e.css({color:t.contrastColor}))},h.prototype.drawDataLabels=function(){var t,e,i,o,n,r=this,a=r.data,s=r.options.dataLabels.distance,l=a.length;for(r.center[2]-=2*s;l--;)e=(t=(i=a[l]).half)?1:-1,n=i.plotY,i.labelDistance=S(i.options.dataLabels&&i.options.dataLabels.distance,s),r.maxLabelDistance=Math.max(i.labelDistance,r.maxLabelDistance||0),o=r.getX(n,t,i),i.labelPosition={natural:{x:0,y:n},final:{},alignment:t?"right":"left",connectorPosition:{breakAt:{x:o+(i.labelDistance-5)*e,y:n},touchingSliceAt:{x:o+i.labelDistance*e,y:n}}};p.seriesTypes[r.options.dataLabels.inside?"column":"pie"].prototype.drawDataLabels.call(this)},h.prototype.translate=function(){var e,i,o,n,r,a,s,l,p,c=0,d=this,t=d.chart,h=d.options,u=h.reversed,f=h.ignoreHiddenPoint,g=t.plotWidth,y=t.plotHeight,b=0,t=h.center,v=C(t[0],g),m=C(t[1],y),L=C(h.width,g),_=C(h.height,y),x=C(h.neckWidth,g),A=C(h.neckHeight,y),W=m-_/2+_-A,y=d.data,j="left"===h.dataLabels.position?1:0;function C(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)}d.getWidthAt=function(t){return W<t||_===A?x:x+(L-x)*(1-(t-(m-_/2))/(_-A))},d.getX=function(t,e,i){return v+(e?-1:1)*(d.getWidthAt(u?2*m-t:t)/2+i.labelDistance)},d.center=[v,m,_],d.centerX=v,y.forEach(function(t){f&&!1===t.visible||(c+=t.y)}),y.forEach(function(t){p=null,i=c?t.y/c:0,s=(n=m-_/2+b*_)+i*_,e=d.getWidthAt(n),r=(o=v-e/2)+e,e=d.getWidthAt(s),l=(a=v-e/2)+e,W<n?(o=a=v-x/2,r=l=v+x/2):W<s&&(p=s,e=d.getWidthAt(W),l=(a=v-e/2)+e,s=W),u&&(n=2*m-n,s=2*m-s,null!==p&&(p=2*m-p)),e=[["M",o,n],["L",r,n],["L",l,s]],null!==p&&e.push(["L",l,p],["L",a,p]),e.push(["L",a,s],["Z"]),t.shapeType="path",t.shapeArgs={d:e},t.percentage=100*i,t.plotX=v,t.plotY=(n+(p||s))/2,t.tooltipPos=[v,t.plotY],t.dlBox={x:a,y:n,topWidth:r-o,bottomWidth:l-a,height:Math.abs(S(p,s)-n),width:NaN},t.slice=O,t.half=j,f&&!1===t.visible||(b+=i)}),D(d,"afterTranslate")},h.prototype.sortByAngle=function(t){t.sort(function(t,e){return t.plotY-e.plotY})},h.defaultOptions=e(s.defaultOptions,{animation:!1,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,size:!0,dataLabels:{connectorWidth:1,verticalAlign:"middle"},states:{select:{color:i.neutralColor20,borderColor:i.neutralColor100}}}),h);function h(){var t=null!==r&&r.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return c(i.prototype,{animate:O}),l(t,"afterHideAllOverlappingLabels",function(){this.series.forEach(function(t){var e=t.options&&t.options.dataLabels;d(e)&&(e=e[0]),t.is("pie")&&t.placeDataLabels&&e&&!e.inside&&t.placeDataLabels()})}),p.registerSeriesType("funnel",i),i}),e(t,"Series/Pyramid/PyramidSeries.js",[t["Series/Funnel/FunnelSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i){var o,n,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),i=i.merge,t=(r(a,n=t),a.defaultOptions=i(t.defaultOptions,{neckWidth:"0%",neckHeight:"0%",reversed:!0}),a);function a(){var t=null!==n&&n.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return e.registerSeriesType("pyramid",t),t}),e(t,"masters/modules/funnel.src.js",[],function(){})});