"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/boost-canvas",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,o,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,o))}e(t=t?t._modules:{},"Extensions/BoostCanvas.js",[t["Core/Chart/Chart.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Color/Palette.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,F,Q,Z,e,o,$){var tt,et=F.parse,n=Q.doc,ot=Q.noop,i=o.seriesTypes,it=$.addEvent,rt=$.extend,st=$.fireEvent,at=$.isNumber,nt=$.merge,ct=$.pick,c=$.wrap;return function(){Q.seriesTypes.heatmap&&c(Q.seriesTypes.heatmap.prototype,"drawPoints",function(){var s=this.chart,a=this.getContext(),n=this.chart.inverted,c=this.xAxis,l=this.yAxis;a?(this.points.forEach(function(t){var e,o,i,r=t.plotY;void 0!==r&&!isNaN(r)&&null!==t.y&&a&&(r=void 0===(r=(i=t.shapeArgs||{}).x)?0:r,e=void 0===(e=i.y)?0:e,o=void 0===(o=i.width)?0:o,i=void 0===(i=i.height)?0:i,t=s.styledMode?t.series.colorAttribs(t):t.series.pointAttribs(t),a.fillStyle=t.fill,n?a.fillRect(l.len-e+c.left,c.len-r+l.top,-i,-o):a.fillRect(r+c.left,e+l.top,o,i))}),this.canvasToSVG()):this.chart.showLoading("Your browser doesn't support HTML5 canvas, <br>please use a modern browser")}),rt(e.prototype,{getContext:function(){function e(t,e,o,i,r,s,a){t.call(this,o,e,i,r,s,a)}var t=this.chart,o=t.chartWidth,i=t.chartHeight,r=t.seriesGroup||this.group,s=this;t.isChartSeriesBoosting()&&(r=(s=t).seriesGroup);var a=s.ctx;return s.canvas||(s.canvas=n.createElement("canvas"),s.renderTarget=t.renderer.image("",0,0,o,i).addClass("highcharts-boost-canvas").add(r),s.ctx=a=s.canvas.getContext("2d"),t.inverted&&["moveTo","lineTo","rect","arc"].forEach(function(t){c(a,t,e)}),s.boostCopy=function(){s.renderTarget.attr({href:s.canvas.toDataURL("image/png")})},s.boostClear=function(){a.clearRect(0,0,s.canvas.width,s.canvas.height),s===this&&s.renderTarget.attr({href:""})},s.boostClipRect=t.renderer.clipRect(),s.renderTarget.clip(s.boostClipRect)),s.canvas.width!==o&&(s.canvas.width=o),s.canvas.height!==i&&(s.canvas.height=i),s.renderTarget.attr({x:0,y:0,width:o,height:i,style:"pointer-events: none",href:""}),s.boostClipRect.attr(t.getBoostClipRect(s)),a},canvasToSVG:function(){this.chart.isChartSeriesBoosting()?this.boostClear&&this.boostClear():(this.boostCopy||this.chart.boostCopy)&&(this.boostCopy||this.chart.boostCopy)()},cvsLineTo:function(t,e,o){t.lineTo(e,o)},renderCanvas:function(){var p,r,d=this,t=d.options,u=d.chart,v=this.xAxis,g=this.yAxis,o=(u.options.boost||{}).timeRendering||!1,s=0,e=d.processedXData,f=d.processedYData,i=t.data,a=v.getExtremes(),y=a.min,b=a.max,m=(a=g.getExtremes()).min,C=a.max,n={},x=!!d.sampling,c=t.marker&&t.marker.radius,l=this.cvsDrawPoint,h=t.lineWidth?this.cvsLineTo:void 0,T=c&&c<=1?this.cvsMarkerSquare:this.cvsMarkerCircle,w=this.cvsStrokeBatch||1e3,S=!1!==t.enableMouseTracking;a=t.threshold;var k=g.getThreshold(a),M=at(a),D=k,P=this.fill,R=d.pointArrayMap&&"low,high"===d.pointArrayMap.join(","),A=!!t.stacking,j=d.cropStart||0;a=u.options.loading;function E(){P?(J.fillStyle=K,J.fill()):(J.strokeStyle=d.color,J.lineWidth=t.lineWidth,J.stroke())}function G(t,e,o,i){0===s&&(J.beginPath(),h&&(J.lineJoin="round")),u.scroller&&"highcharts-navigator-series"===d.options.className?(e+=u.scroller.top,o&&(o+=u.scroller.top)):e+=u.plotTop,t+=u.plotLeft,N?J.moveTo(t,e):l?l(J,t,e,o,r):h?h(J,t,e):T&&T.call(d,J,t,e,c,i),(s+=1)===w&&(E(),s=0),r={clientX:t,plotY:e,yBottom:o}}function B(t,e,o){H=U?t:t+","+e,S&&!n[H]&&(n[H]=!0,u.inverted&&(t=v.len-t,e=g.len-e),z.push({x:!!_&&_[j+o],clientX:t,plotX:t,plotY:e,i:j+o}))}var N,X,L,Y,O,H,V=d.requireSorting,W=t.connectNulls,q=!e,I=A?d.data:e||i,K=d.fillOpacity?new F(d.color).setOpacity(ct(t.fillOpacity,.75)).get():d.color,U="x"===t.findNearestPointBy,_=this.xData||this.options.xData||this.processedXData||!1;this.renderTarget&&this.renderTarget.attr({href:""}),(this.points||this.graph)&&this.destroyGraphics(),d.plotGroup("group","series",d.visible?"visible":"hidden",t.zIndex,u.seriesGroup),d.markerGroup=d.group,it(d,"destroy",function(){d.markerGroup=null});var z=this.points=[],J=this.getContext();d.buildKDTree=ot,this.boostClear&&this.boostClear(),this.visible&&(99999<i.length&&(u.options.loading=nt(a,{labelStyle:{backgroundColor:et(Z.backgroundColor).setOpacity(.75).get(),padding:"1em",borderRadius:"0.5em"},style:{backgroundColor:"none",opacity:1}}),$.clearTimeout(tt),u.showLoading("Drawing..."),u.options.loading=a),o&&console.time("canvas rendering"),Q.eachAsync(I,function(t,e){var o,i,r,s=!1,a=!1,n=!1,c=!1,l=void 0===u.index,h=!0;return l||(q?(o=t[0],r=t[1],I[e+1]&&(n=I[e+1][0]),I[e-1]&&(c=I[e-1][0])):(o=t,r=f[e],I[e+1]&&(n=I[e+1]),I[e-1]&&(c=I[e-1])),n&&y<=n&&n<=b&&(s=!0),c&&y<=c&&c<=b&&(a=!0),R?(i=(r=q?t.slice(1,3):r)[0],r=r[1]):A&&(o=t.x,i=(r=t.stackY)-t.y),V||(h=m<=r&&r<=C),!(t=null===r)&&(y<=o&&o<=b&&h||s||a)&&(o=Math.round(v.toPixels(o,!0)),x?(void 0!==Y&&o!==p||(R||(i=r),(void 0===O||L<r)&&(L=r,O=e),(void 0===Y||i<X)&&(X=i,Y=e)),o!==p&&(void 0!==Y&&(r=g.toPixels(L,!0),k=g.toPixels(X,!0),G(o,M?Math.min(r,D):r,M?Math.max(k,D):k,e),B(o,r,O),k!==r&&B(o,k,Y)),Y=O=void 0,p=o)):(r=Math.round(g.toPixels(r,!0)),G(o,r,k,e),B(o,r,e))),N=t&&!W,0==e%5e4&&(d.boostCopy||d.chart.boostCopy)&&(d.boostCopy||d.chart.boostCopy)()),!l},function(){var t=u.loadingDiv,e=u.loadingShown;E(),d.canvasToSVG(),o&&console.timeEnd("canvas rendering"),st(d,"renderedCanvas"),e&&(rt(t.style,{transition:"opacity 250ms",opacity:0}),u.loadingShown=!1,tt=setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t),u.loadingDiv=u.loadingSpan=null},250)),delete d.buildKDTree,d.buildKDTree()},u.renderer.forExport?Number.MAX_VALUE:void 0))}}),i.scatter.prototype.cvsMarkerCircle=function(t,e,o,i){t.moveTo(e,o),t.arc(e,o,i,0,2*Math.PI,!1)},i.scatter.prototype.cvsMarkerSquare=function(t,e,o,i){t.rect(e-i,o-i,2*i,2*i)},i.scatter.prototype.fill=!0,i.bubble&&(i.bubble.prototype.cvsMarkerCircle=function(t,e,o,i,r){t.moveTo(e,o),t.arc(e,o,this.radii&&this.radii[r],0,2*Math.PI,!1)},i.bubble.prototype.cvsStrokeBatch=1),rt(i.area.prototype,{cvsDrawPoint:function(t,e,o,i,r){r&&e!==r.clientX&&(t.moveTo(r.clientX,r.yBottom),t.lineTo(r.clientX,r.plotY),t.lineTo(e,o),t.lineTo(e,i))},fill:!0,fillOpacity:!0,sampling:!0}),rt(i.column.prototype,{cvsDrawPoint:function(t,e,o,i){t.rect(e-1,o,1,i-o)},fill:!0,sampling:!0}),t.prototype.callbacks.push(function(t){it(t,"predraw",function(){t.renderTarget&&t.renderTarget.attr({href:""}),t.canvas&&t.canvas.getContext("2d").clearRect(0,0,t.canvas.width,t.canvas.height)}),it(t,"render",function(){t.boostCopy&&t.boostCopy()})})}}),e(t,"masters/modules/boost-canvas.src.js",[],function(){})});