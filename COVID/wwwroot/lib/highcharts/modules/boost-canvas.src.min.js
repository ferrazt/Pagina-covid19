"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/boost-canvas",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){t=t?t._modules:{};function e(t,e,o,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,o))}e(t,"Extensions/BoostCanvas.js",[t["Core/Chart/Chart.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Color/Palette.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,F,Q,Z,e,o,$){var tt,et=F.parse,a=Q.doc,ot=Q.noop,i=o.seriesTypes,it=$.addEvent,rt=$.extend,st=$.fireEvent,nt=$.isNumber,at=$.merge,ct=$.pick,c=$.wrap;return function(){Q.seriesTypes.heatmap&&c(Q.seriesTypes.heatmap.prototype,"drawPoints",function(){var s=this.chart,n=this.getContext(),a=this.chart.inverted,c=this.xAxis,l=this.yAxis;n?(this.points.forEach(function(t){var e,o,i,r=t.plotY;void 0!==r&&!isNaN(r)&&null!==t.y&&n&&(e=void 0===(o=(i=t.shapeArgs||{}).x)?0:o,o=void 0===(r=i.y)?0:r,r=void 0===(r=i.width)?0:r,i=void 0===(i=i.height)?0:i,t=s.styledMode?t.series.colorAttribs(t):t.series.pointAttribs(t),n.fillStyle=t.fill,a?n.fillRect(l.len-o+c.left,c.len-e+l.top,-i,-r):n.fillRect(e+c.left,o+l.top,r,i))}),this.canvasToSVG()):this.chart.showLoading("Your browser doesn't support HTML5 canvas, <br>please use a modern browser")}),rt(e.prototype,{getContext:function(){function e(t,e,o,i,r,s,n){t.call(this,o,e,i,r,s,n)}var o,t=this.chart,i=t.chartWidth,r=t.chartHeight,s=t.seriesGroup||this.group,n=this;return t.isChartSeriesBoosting()&&(s=(n=t).seriesGroup),o=n.ctx,n.canvas||(n.canvas=a.createElement("canvas"),n.renderTarget=t.renderer.image("",0,0,i,r).addClass("highcharts-boost-canvas").add(s),n.ctx=o=n.canvas.getContext("2d"),t.inverted&&["moveTo","lineTo","rect","arc"].forEach(function(t){c(o,t,e)}),n.boostCopy=function(){n.renderTarget.attr({href:n.canvas.toDataURL("image/png")})},n.boostClear=function(){o.clearRect(0,0,n.canvas.width,n.canvas.height),n===this&&n.renderTarget.attr({href:""})},n.boostClipRect=t.renderer.clipRect(),n.renderTarget.clip(n.boostClipRect)),n.canvas.width!==i&&(n.canvas.width=i),n.canvas.height!==r&&(n.canvas.height=r),n.renderTarget.attr({x:0,y:0,width:i,height:r,style:"pointer-events: none",href:""}),n.boostClipRect.attr(t.getBoostClipRect(n)),o},canvasToSVG:function(){this.chart.isChartSeriesBoosting()?this.boostClear&&this.boostClear():(this.boostCopy||this.chart.boostCopy)&&(this.boostCopy||this.chart.boostCopy)()},cvsLineTo:function(t,e,o){t.lineTo(e,o)},renderCanvas:function(){function r(){O?(s.fillStyle=_,s.fill()):(s.strokeStyle=C.color,s.lineWidth=t.lineWidth,s.stroke())}function d(t,e,o,i){0===c&&(s.beginPath(),E&&(s.lineJoin="round")),x.scroller&&"highcharts-navigator-series"===C.options.className?(e+=x.scroller.top,o&&(o+=x.scroller.top)):e+=x.plotTop,t+=x.plotLeft,g?s.moveTo(t,e):j?j(s,t,e,o,n):E?E(s,t,e):G&&G.call(C,s,t,e,A,i),(c+=1)===B&&(r(),c=0),n={clientX:t,plotY:e,yBottom:o}}function u(t,e,o){a=z?t:t+","+e,N&&!p[a]&&(p[a]=!0,x.inverted&&(t=T.len-t,e=S.len-e),i.push({x:!!J&&J[W+o],clientX:t,plotX:t,plotY:e,i:W+o}))}var s,v,i,n,g,f,y,b,m,a,C=this,t=C.options,x=C.chart,T=this.xAxis,S=this.yAxis,e=x.options.boost||{},o=e.timeRendering||!1,c=(e.timeSeriesProcessing,e.timeSetup,0),l=C.processedXData,w=C.processedYData,h=t.data,e=T.getExtremes(),k=e.min,M=e.max,e=S.getExtremes(),D=e.min,P=e.max,p={},R=!!C.sampling,A=t.marker&&t.marker.radius,j=this.cvsDrawPoint,E=t.lineWidth?this.cvsLineTo:void 0,G=A&&A<=1?this.cvsMarkerSquare:this.cvsMarkerCircle,B=this.cvsStrokeBatch||1e3,N=!1!==t.enableMouseTracking,e=t.threshold,X=S.getThreshold(e),L=nt(e),Y=X,O=this.fill,H=C.pointArrayMap&&"low,high"===C.pointArrayMap.join(","),V=!!t.stacking,W=C.cropStart||0,e=x.options.loading,q=C.requireSorting,I=t.connectNulls,K=!l,U=V?C.data:l||h,_=C.fillOpacity?new F(C.color).setOpacity(ct(t.fillOpacity,.75)).get():C.color,z="x"===t.findNearestPointBy,J=this.xData||this.options.xData||this.processedXData||!1;this.renderTarget&&this.renderTarget.attr({href:""}),(this.points||this.graph)&&this.destroyGraphics(),C.plotGroup("group","series",C.visible?"visible":"hidden",t.zIndex,x.seriesGroup),C.markerGroup=C.group,it(C,"destroy",function(){C.markerGroup=null}),i=this.points=[],s=this.getContext(),C.buildKDTree=ot,this.boostClear&&this.boostClear(),this.visible&&(99999<h.length&&(x.options.loading=at(e,{labelStyle:{backgroundColor:et(Z.backgroundColor).setOpacity(.75).get(),padding:"1em",borderRadius:"0.5em"},style:{backgroundColor:"none",opacity:1}}),$.clearTimeout(tt),x.showLoading("Drawing..."),x.options.loading=e),o&&console.time("canvas rendering"),Q.eachAsync(U,function(t,e){var o,i,r,s,n=!1,a=!1,c=!1,l=!1,h=void 0===x.index,p=!0;return h||(K?(i=t[0],o=t[1],U[e+1]&&(c=U[e+1][0]),U[e-1]&&(l=U[e-1][0])):(i=t,o=w[e],U[e+1]&&(c=U[e+1]),U[e-1]&&(l=U[e-1])),c&&k<=c&&c<=M&&(n=!0),l&&k<=l&&l<=M&&(a=!0),H?(s=(o=K?t.slice(1,3):o)[0],o=o[1]):V&&(i=t.x,s=(o=t.stackY)-t.y),q||(p=D<=o&&o<=P),!(t=null===o)&&(k<=i&&i<=M&&p||n||a)&&(i=Math.round(T.toPixels(i,!0)),R?(void 0!==b&&i!==v||(H||(s=o),(void 0===m||y<o)&&(y=o,m=e),(void 0===b||s<f)&&(f=s,b=e)),i!==v&&(void 0!==b&&(r=S.toPixels(y,!0),X=S.toPixels(f,!0),d(i,L?Math.min(r,Y):r,L?Math.max(X,Y):X,e),u(i,r,m),X!==r&&u(i,X,b)),b=m=void 0,v=i)):(r=Math.round(S.toPixels(o,!0)),d(i,r,X,e),u(i,r,e))),g=t&&!I,e%5e4==0&&(C.boostCopy||C.chart.boostCopy)&&(C.boostCopy||C.chart.boostCopy)()),!h},function(){var t=x.loadingDiv,e=x.loadingShown;r(),C.canvasToSVG(),o&&console.timeEnd("canvas rendering"),st(C,"renderedCanvas"),e&&(rt(t.style,{transition:"opacity 250ms",opacity:0}),x.loadingShown=!1,tt=setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t),x.loadingDiv=x.loadingSpan=null},250)),delete C.buildKDTree,C.buildKDTree()},x.renderer.forExport?Number.MAX_VALUE:void 0))}}),i.scatter.prototype.cvsMarkerCircle=function(t,e,o,i){t.moveTo(e,o),t.arc(e,o,i,0,2*Math.PI,!1)},i.scatter.prototype.cvsMarkerSquare=function(t,e,o,i){t.rect(e-i,o-i,2*i,2*i)},i.scatter.prototype.fill=!0,i.bubble&&(i.bubble.prototype.cvsMarkerCircle=function(t,e,o,i,r){t.moveTo(e,o),t.arc(e,o,this.radii&&this.radii[r],0,2*Math.PI,!1)},i.bubble.prototype.cvsStrokeBatch=1),rt(i.area.prototype,{cvsDrawPoint:function(t,e,o,i,r){r&&e!==r.clientX&&(t.moveTo(r.clientX,r.yBottom),t.lineTo(r.clientX,r.plotY),t.lineTo(e,o),t.lineTo(e,i))},fill:!0,fillOpacity:!0,sampling:!0}),rt(i.column.prototype,{cvsDrawPoint:function(t,e,o,i){t.rect(e-1,o,1,i-o)},fill:!0,sampling:!0}),t.prototype.callbacks.push(function(t){it(t,"predraw",function(){t.renderTarget&&t.renderTarget.attr({href:""}),t.canvas&&t.canvas.getContext("2d").clearRect(0,0,t.canvas.width,t.canvas.height)}),it(t,"render",function(){t.boostCopy&&t.boostCopy()})})}}),e(t,"masters/modules/boost-canvas.src.js",[],function(){})});