"use strict";!function(i){"object"==typeof module&&module.exports?module.exports=i.default=i:"function"==typeof define&&define.amd?define("highcharts/modules/grid-axis",["highcharts"],function(t){return i(t),i.Highcharts=t,i}):i("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){t=t?t._modules:{};function i(t,i,e,r){t.hasOwnProperty(i)||(t[i]=r.apply(null,e))}i(t,"Core/Axis/GridAxis.js",[t["Core/Axis/Axis.js"],t["Core/Axis/AxisDefaults.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(P,y,w,i){var t,e=w.dateFormats,B=i.addEvent,L=i.defined,S=i.erase,O=i.find,A=i.isArray,z=i.isNumber,T=i.merge,W=i.pick,C=i.timeUnits,M=i.wrap;function E(t){return i.isObject(t,!0)}return function(x){var t;function r(r,t){var o={width:0,height:0};return t.forEach(function(t){var i,e=r[t],t=0;E(e)&&(i=(e=E(e.label)?e.label:{}).getBBox?e.getBBox().height:0,e.textStr&&!z(e.textPxLength)&&(e.textPxLength=e.getBBox().width),t=z(e.textPxLength)?Math.round(e.textPxLength):0,e.textStr&&(t=Math.round(e.getBBox().width)),o.height=Math.max(i,o.height),o.width=Math.max(t,o.width))}),"treegrid"===this.options.type&&this.treeGrid&&this.treeGrid.mapOfPosToGridNode&&(t=this.treeGrid.mapOfPosToGridNode[-1].height||0,o.width+=this.options.labels.indentation*(t-1)),o}function o(){var t=this.grid;(t&&t.columns||[]).forEach(function(t){t.getOffset()})}function n(t){var i,e,r,o,n,s,a,d,l,h,c,g,f,u,p=this;!0===(p.options.grid||{}).enabled&&(u=p.axisTitle,i=p.height,e=p.horiz,r=p.left,o=p.offset,n=p.opposite,s=p.options,a=p.top,d=p.width,l=p.tickSize(),h=u&&u.getBBox().width,c=s.title.x,g=s.title.y,f=W(s.title.margin,e?5:10),u=p.chart.renderer.fontMetrics(s.title.style.fontSize,u).f,p=(e?a+i:r)+(e?1:-1)*(n?-1:1)*(l?l[0]/2:0)+(p.side===x.Side.bottom?u:0),t.titlePosition.x=e?r-(h||0)/2-f+c:p+(n?d:0)+o+c,t.titlePosition.y=e?p-(n?i:0)+(n?u:-u)/2+o+g:a-f+g)}function s(){var t,i=this,e=i.chart,r=i.options.grid,o=void 0===r?{}:r,n=i.userOptions;if(o.enabled&&((r=(t=i).options).labels.align=W(r.labels.align,"center"),t.categories||(r.showLastLabel=!1),t.labelRotation=0,r.labels.rotation=0),o.columns)for(var s=i.grid.columns=[],a=i.grid.columnIndex=0;++a<o.columns.length;){var d=T(n,o.columns[o.columns.length-a-1],{linkedTo:0,type:"category",scrollbar:{enabled:!1}});delete d.grid.columns;d=new P(i.chart,d);d.grid.isColumn=!0,d.grid.columnIndex=a,S(e.axes,d),S(e[i.coll],d),s.push(d)}}function a(){var t,i,e,r,o,n,s,a=this,d=a.grid,l=a.options;!0===(l.grid||{}).enabled&&(t=a.min||0,i=a.max||0,a.maxLabelDimensions=a.getMaxLabelDimensions(a.ticks,a.tickPositions),a.rightWall&&a.rightWall.destroy(),a.grid&&a.grid.isOuterAxis()&&a.axisLine&&((r=l.lineWidth)&&(o=(s=a.getLinePath(r))[0],e=s[1],r=((a.tickSize("tick")||[1])[0]-1)*(a.side===x.Side.top||a.side===x.Side.left?-1:1),"M"===o[0]&&"L"===e[0]&&(a.horiz?(o[2]+=r,e[2]+=r):(o[1]+=r,e[1]+=r)),!a.horiz&&a.chart.marginRight&&(o=[o,["L",a.left,o[2]||0]],n=["L",a.chart.chartWidth-a.chart.marginRight,a.toPixels(i+a.tickmarkOffset)],n=[["M",e[1]||0,a.toPixels(i+a.tickmarkOffset)],n],a.grid.upperBorder||t%1==0||(a.grid.upperBorder=a.grid.renderBorder(o)),a.grid.upperBorder&&(a.grid.upperBorder.attr({stroke:l.lineColor,"stroke-width":l.lineWidth}),a.grid.upperBorder.animate({d:o})),a.grid.lowerBorder||i%1==0||(a.grid.lowerBorder=a.grid.renderBorder(n)),a.grid.lowerBorder&&(a.grid.lowerBorder.attr({stroke:l.lineColor,"stroke-width":l.lineWidth}),a.grid.lowerBorder.animate({d:n}))),a.grid.axisLineExtra?(a.grid.axisLineExtra.attr({stroke:l.lineColor,"stroke-width":l.lineWidth}),a.grid.axisLineExtra.animate({d:s})):a.grid.axisLineExtra=a.grid.renderBorder(s),a.axisLine[a.showAxis?"show":"hide"](!0))),(d&&d.columns||[]).forEach(function(t){t.render()}),!a.horiz&&a.chart.hasRendered&&(a.scrollbar||a.linkedParent&&a.linkedParent.scrollbar)&&(n=a.tickmarkOffset,l=a.tickPositions[a.tickPositions.length-1],s=a.tickPositions[0],(d=a.ticks[s].label)&&(n<t-s?d.hide():d.show()),(d=a.ticks[l].label)&&(n<l-i?d.hide():d.show()),(d=a.ticks[l].mark)&&(l-i<n&&0<l-i&&a.ticks[l].isLast?d.hide():a.ticks[l-1]&&d.show())))}function d(){var t=this,i=t.tickPositions&&t.tickPositions.info,e=t.options,r=e.grid||{},o=t.userOptions.labels||{};r.enabled&&(t.horiz?(t.series.forEach(function(t){t.options.pointRange=0}),i&&e.dateTimeLabelFormats&&e.labels&&!L(o.align)&&(!1===e.dateTimeLabelFormats[i.unitName].range||1<i.count)&&(e.labels.align="left",L(o.x)||(e.labels.x=3))):"treegrid"!==this.options.type&&t.grid&&t.grid.columns&&(this.minPointOffset=this.tickInterval))}function l(t){var l,i=this.options,e=t.userOptions,t=i&&E(i.grid)?i.grid:{};!0===t.enabled&&(l=T(!0,{className:"highcharts-grid-axis "+(e.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B","%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"13px"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},e),"xAxis"===this.coll&&(L(e.linkedTo)&&!L(e.tickPixelInterval)&&(l.tickPixelInterval=350),L(e.tickPixelInterval)||!L(e.linkedTo)||L(e.tickPositioner)||L(e.tickInterval)||(l.tickPositioner=function(t,i){var e=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(e){for(var r=l.units||[],o=void 0,n=void 0,s=void 0,a=0;a<r.length;a++)if(r[a][0]===e.unitName){o=a;break}r[o+1]?(s=r[o+1][0],n=(r[o+1][1]||[1])[0]):"year"===e.unitName&&(s="year",n=10*e.count);var d=C[s];return this.tickInterval=d*n,this.getTimeTicks({unitRange:d,count:n,unitName:s},t,i,this.options.startOfWeek)}})),T(!0,this.options,l),this.horiz&&(i.minPadding=W(e.minPadding,0),i.maxPadding=W(e.maxPadding,0)),z(i.grid.borderWidth)&&(i.tickWidth=i.lineWidth=t.borderWidth))}function h(t){var i=t.userOptions,t=i&&i.grid||{},i=t.columns;t.enabled&&i&&T(!0,this.options,i[i.length-1])}function c(){(this.grid.columns||[]).forEach(function(t){t.setScale()})}function g(t){var i=y.defaultLeftAxisOptions,e=this.horiz,r=this.maxLabelDimensions,o=this.options.grid,o=void 0===o?{}:o;o.enabled&&r&&(i=2*Math.abs(i.labels.x),r=e?o.cellHeight||i+r.height:i+r.width,A(t.tickSize)?t.tickSize[0]=r:t.tickSize=[r,0])}function f(){this.axes.forEach(function(t){(t.grid&&t.grid.columns||[]).forEach(function(t){t.setAxisSize(),t.setAxisTranslation()})})}function u(i){var t=this.grid;(t.columns||[]).forEach(function(t){t.destroy(i.keepEvents)}),t.columns=void 0}function p(t){var i=t.userOptions||{},t=i.grid||{};t.enabled&&L(t.borderColor)&&(i.tickColor=i.lineColor=t.borderColor),this.grid||(this.grid=new e(this))}function m(t){var i,e,r,o,n=this.label,s=this.axis,a=s.reversed,d=s.chart,l=s.options.grid||{},h=s.options.labels,c=h.align,g=x.Side[s.side],f=t.tickmarkOffset,u=s.tickPositions,p=this.pos-f,m=z(u[t.index+1])?u[t.index+1]-f:(s.max||0)+f,u=s.tickSize("tick"),f=u?u[0]:0,u=u?u[1]/2:0;!0===l.enabled&&("top"===g?e=(i=s.top+s.offset)-f:"bottom"===g?i=(e=d.chartHeight-s.bottom+s.offset)+f:(i=s.top+s.len-(s.translate(a?m:p)||0),e=s.top+s.len-(s.translate(a?p:m)||0)),"right"===g?o=(r=d.chartWidth-s.right+s.offset)+f:"left"===g?r=(o=s.left+s.offset)-f:(r=Math.round(s.left+(s.translate(a?m:p)||0))-u,o=Math.min(Math.round(s.left+(s.translate(a?p:m)||0))-u,s.left+s.len)),this.slotWidth=o-r,t.pos.x="left"===c?r:"right"===c?o:r+(o-r)/2,t.pos.y=e+(i-e)/2,d=d.renderer.fontMetrics(h.style.fontSize,n&&n.element),n=n?n.getBBox().height:0,h.useHTML?t.pos.y+=d.b+-n/2:(n=Math.round(n/d.h),t.pos.y+=(d.b-(d.h-d.f))/2+-((n-1)*d.h)/2),t.pos.x+=s.horiz&&h.x||0)}function k(t){var i,e,r,o,n,s=t.axis,a=t.value;s.options.grid&&s.options.grid.enabled&&(o=s.tickPositions,i=(s.linkedParent||s).series[0],e=a===o[0],r=a===o[o.length-1],n=void 0,(o=i&&O(i.options.data,function(t){return t[s.isXAxis?"x":"y"]===a}))&&i.is("gantt")&&(n=T(o),w.seriesTypes.gantt.prototype.pointClass.setGanttPointAliases(n)),t.isFirst=e,t.isLast=r,t.point=n)}function b(){var t=this,i=t.options,e=i.grid||{},r=t.categories,o=t.tickPositions,n=o[0],s=o[o.length-1],a=t.linkedParent&&t.linkedParent.min,d=t.linkedParent&&t.linkedParent.max,l=a||t.min,a=d||t.max,d=t.tickInterval,s=a<s&&s-d<a;!0!==e.enabled||r||!t.horiz&&!t.isLinked||(n<l&&l<n+d&&!i.startOnTick&&(o[0]=l),s&&!i.endOnTick&&(o[o.length-1]=a))}function v(t){var i=this.options.grid;return!0===(void 0===i?{}:i).enabled&&this.categories?this.tickInterval:t.apply(this,(t=arguments,Array.prototype.slice.call(t,1)))}(t=x.Side||(x.Side={}))[t.top=0]="top",t[t.right=1]="right",t[t.bottom=2]="bottom",t[t.left=3]="left",x.compose=function(t,i,e){return-1===t.keepProps.indexOf("grid")&&(t.keepProps.push("grid"),t.prototype.getMaxLabelDimensions=r,M(t.prototype,"unsquish",v),B(t,"init",p),B(t,"afterGetOffset",o),B(t,"afterGetTitlePosition",n),B(t,"afterInit",s),B(t,"afterRender",a),B(t,"afterSetAxisTranslation",d),B(t,"afterSetOptions",l),B(t,"afterSetOptions",h),B(t,"afterSetScale",c),B(t,"afterTickSize",g),B(t,"trimTicks",b),B(t,"destroy",u)),B(i,"afterSetChartSize",f),B(e,"afterGetLabelPosition",m),B(e,"labelFormat",k),t};var e=(i.prototype.isOuterAxis=function(){var e=this.axis,t=e.chart,i=e.grid.columnIndex,r=e.linkedParent&&e.linkedParent.grid.columns||e.grid.columns,o=i?e.linkedParent:e,n=-1,s=0;return t[e.coll].forEach(function(t,i){t.side!==e.side||t.options.isInternal||(s=i,t===o&&(n=i))}),s===n&&(!z(i)||r.length===i)},i.prototype.renderBorder=function(t){var i=this.axis,e=i.chart.renderer,r=i.options,i=e.path(t).addClass("highcharts-axis-line").add(i.axisBorder);return e.styledMode||i.attr({stroke:r.lineColor,"stroke-width":r.lineWidth,zIndex:7}),i},i);function i(t){this.axis=t}x.Additions=e}(t=t||{}),e.E=function(t){return this.dateFormat("%a",t,!0).charAt(0)},e.W=function(t){var i=new this.Date(t),e=(this.get("Day",i)+6)%7,t=new this.Date(i.valueOf());this.set("Date",t,this.get("Date",i)-e+3);e=new this.Date(this.get("FullYear",t),0,1);return 4!==this.get("Day",e)&&(this.set("Month",i,0),this.set("Date",i,1+(11-this.get("Day",e))%7)),(1+Math.floor((t.valueOf()-e.valueOf())/6048e5)).toString()},t}),i(t,"masters/modules/grid-axis.src.js",[t["Core/Globals.js"],t["Core/Axis/GridAxis.js"]],function(t,i){i.compose(t.Axis,t.Chart,t.Tick)})});