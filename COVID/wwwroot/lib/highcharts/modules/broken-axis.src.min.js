"use strict";!function(n){"object"==typeof module&&module.exports?module.exports=n.default=n:"function"==typeof define&&define.amd?define("highcharts/modules/broken-axis",["highcharts"],function(i){return n(i),n.Highcharts=i,n}):n("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(i){i=i?i._modules:{};function n(i,n,e,t){i.hasOwnProperty(n)||(i[n]=t.apply(null,e))}n(i,"Core/Axis/BrokenAxis.js",[i["Core/Axis/Axis.js"],i["Core/Series/Series.js"],i["Extensions/Stacking.js"],i["Core/Utilities.js"]],function(p,k,l,i){var n,v=i.addEvent,e=i.find,x=i.fireEvent,A=i.isArray,m=i.isNumber,b=i.pick;return function(i){function t(){void 0!==this.brokenAxis&&this.brokenAxis.setBreaks(this.options.breaks,!1)}function s(){var i=this;i.brokenAxis&&i.brokenAxis.hasBreaks&&(i.options.ordinal=!1)}function r(){var i=this,n=i.brokenAxis;if(n&&n.hasBreaks){for(var e=i.tickPositions,t=i.tickPositions.info,s=[],r=0;r<e.length;r++)n.isInAnyBreak(e[r])||s.push(e[r]);i.tickPositions=s,i.tickPositions.info=t}}function o(){var i=this;i.brokenAxis||(i.brokenAxis=new n(i))}function a(){var i=this,n=i.isDirty,e=i.options.connectNulls,t=i.points,s=i.xAxis,r=i.yAxis;if(n)for(var o=t.length;o--;){var a=t[o],f=!(null===a.y&&!1===e)&&(s&&s.brokenAxis&&s.brokenAxis.isInAnyBreak(a.x,!0)||r&&r.brokenAxis&&r.brokenAxis.isInAnyBreak(a.y,!0));a.visible=!f&&!1!==a.options.visible}}function f(){this.drawBreaks(this.xAxis,["x"]),this.drawBreaks(this.yAxis,b(this.pointArrayMap,["y"]))}function u(e,i){var t,s,r,o,n,a=this,f=a.points;e&&e.brokenAxis&&e.brokenAxis.hasBreaks&&(n=e.brokenAxis,i.forEach(function(i){t=n&&n.breakArray||[],s=e.isXAxis?e.min:b(a.options.threshold,e.min),f.forEach(function(n){o=b(n["stack"+i.toUpperCase()],n[i]),t.forEach(function(i){m(s)&&m(o)&&(r=!1,s<i.from&&o>i.to||s>i.from&&o<i.from?r="pointBreak":(s<i.from&&o>i.from&&o<i.to||s>i.from&&o>i.to&&o<i.from)&&(r="pointInBreak"),r&&x(e,r,{point:n,brk:i}))})})}))}function h(){var i=this.currentDataGrouping,i=i&&i.gapSize,n=this.points.slice(),e=this.yAxis,t=this.options.gapSize,s=n.length-1;if(t&&0<s){"value"!==this.options.gapUnit&&(t*=this.basePointRange),i&&t<i&&i>=this.basePointRange&&(t=i);for(var r,o,a=void 0;s--;)a&&!1!==a.visible||(a=n[s+1]),r=n[s],!1!==a.visible&&!1!==r.visible&&(a.x-r.x>t&&(o=(r.x+a.x)/2,n.splice(s+1,0,{isNull:!0,x:o}),e.stacking&&this.options.stacking&&((e.stacking.stacks[this.stackKey][o]=new l(e,e.options.stackLabels,!1,o,this.stack)).total=0)),a=r)}return this.getGraphPath(n)}i.compose=function(i,n){var e;return-1===i.keepProps.indexOf("brokenAxis")&&(i.keepProps.push("brokenAxis"),(e=k.prototype).drawBreaks=u,e.gappedPath=h,v(i,"init",o),v(i,"afterInit",t),v(i,"afterSetTickPositions",r),v(i,"afterSetOptions",s),v(n,"afterGeneratePoints",a),v(n,"afterRender",f)),i};var n=(c.isInBreak=function(i,n){var e=i.repeat||1/0,t=i.from,s=i.to-i.from,e=t<=n?(n-t)%e:e-(t-n)%e,e=i.inclusive?e<=s:e<s&&0!=e;return e},c.lin2Val=function(i){var n=this.brokenAxis,e=n&&n.breakArray;if(!e||!m(i))return i;for(var t,s=i,r=0;r<e.length&&!((t=e[r]).from>=s);r++)(t.to<s||c.isInBreak(t,s))&&(s+=t.len);return s},c.val2Lin=function(i){var n=this.brokenAxis,e=n&&n.breakArray;if(!e||!m(i))return i;for(var t,s=i,r=0;r<e.length;r++)if((t=e[r]).to<=i)s-=t.len;else{if(t.from>=i)break;if(c.isInBreak(t,i)){s-=i-t.from;break}}return s},c.prototype.findBreakAt=function(n,i){return e(i,function(i){return i.from<n&&n<i.to})},c.prototype.isInAnyBreak=function(i,n){var e,t,s,r=this.axis,o=r.options.breaks||[],a=o.length;if(a&&m(i)){for(;a--;)c.isInBreak(o[a],i)&&(e=!0,t=t||b(o[a].showPoints,!r.isXAxis));s=e&&n?e&&!t:e}return s},c.prototype.setBreaks=function(i,n){var k=this,l=k.axis,e=A(i)&&!!i.length;l.isDirty=k.hasBreaks!==e,k.hasBreaks=e,l.options.breaks=l.userOptions.breaks=i,l.forceRedraw=!0,l.series.forEach(function(i){i.isDirty=!0}),e||l.val2lin!==c.val2Lin||(delete l.val2lin,delete l.lin2val),e&&(l.userOptions.ordinal=!1,l.lin2val=c.lin2Val,l.val2lin=c.val2Lin,l.setExtremes=function(i,n,e,t,s){if(k.hasBreaks){for(var r=this.options.breaks||[],o=void 0;o=k.findBreakAt(i,r);)i=o.to;for(;o=k.findBreakAt(n,r);)n=o.from;n<i&&(n=i)}p.prototype.setExtremes.call(this,i,n,e,t,s)},l.setAxisTranslation=function(){var i,n,e,t,s,r,o,a,f,u,h;p.prototype.setAxisTranslation.call(this),k.unitLength=void 0,k.hasBreaks&&(i=l.options.breaks||[],n=[],e=[],t=b(l.pointRangePadding,0),s=0,a=l.userMin||l.min,f=l.userMax||l.max,i.forEach(function(i){o=i.repeat||1/0,m(a)&&m(f)&&(c.isInBreak(i,a)&&(a+=i.to%o-a%o),c.isInBreak(i,f)&&(f-=f%o-i.from%o))}),i.forEach(function(i){if(u=i.from,o=i.repeat||1/0,m(a)&&m(f)){for(;a<u-o;)u-=o;for(;u<a;)u+=o;for(h=u;h<f;h+=o)n.push({value:h,move:"in"}),n.push({value:h+i.to-i.from,move:"out",size:i.breakSize})}}),n.sort(function(i,n){return i.value===n.value?("in"===i.move?0:1)-("in"===n.move?0:1):i.value-n.value}),r=0,u=a,n.forEach(function(i){1===(r+="in"===i.move?1:-1)&&"in"===i.move&&(u=i.value),0===r&&m(u)&&(e.push({from:u,to:i.value,len:i.value-u-(i.size||0)}),s+=i.value-u-(i.size||0))}),k.breakArray=e,m(a)&&m(f)&&m(l.min)&&(k.unitLength=f-a-s+t,x(l,"afterBreaks"),l.staticScale?l.transA=l.staticScale:k.unitLength&&(l.transA*=(f-l.min+t)/k.unitLength),t&&(l.minPixelPadding=l.transA*(l.minPointOffset||0)),l.min=a,l.max=f))}),b(n,!0)&&l.chart.redraw()},c);function c(i){this.hasBreaks=!1,this.axis=i}i.Additions=n}(n=n||{}),n}),n(i,"masters/modules/broken-axis.src.js",[i["Core/Globals.js"],i["Core/Axis/BrokenAxis.js"]],function(i,n){n.compose(i.Axis,i.Series)})});