"use strict";!function(i){"object"==typeof module&&module.exports?module.exports=i.default=i:"function"==typeof define&&define.amd?define("highcharts/modules/wordcloud",["highcharts"],function(t){return i(t),i.Highcharts=t,i}):i("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){t=t?t._modules:{};function i(t,i,e,o){t.hasOwnProperty(i)||(t[i]=o.apply(null,e))}i(t,"Mixins/Polygon.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,i){function n(t,i){return i=u(i)?i:14,i=Math.pow(10,i),Math.round(t*i)/i}function o(t,o){return t=t.map(function(t){return i=t,e=t[0],i=t[1],e*o[0]+i*o[1];var i,e}),{min:Math.min.apply(this,t),max:Math.max.apply(this,t)}}function r(t,i){var e=t[0],o=t[1],t=d*-i,i=Math.cos(t),t=Math.sin(t);return[n(e*i-o*t),n(e*t+o*i)]}function s(t,i,e){var o=t[0]-i[0],t=t[1]-i[1];return[(e=r([o,t],e))[0]+i[0],e[1]+i[1]]}function a(t){var n=t.axes;return e(n)||(n=[],t.concat([t[0]]).reduce(function(t,i){var e,o=(e=t,t=i[0]-e[0],[[-(e=i[1]-e[1]),t],[e,-t]])[0];return l(n,function(t){return i=o,(t=t)[0]===i[0]&&t[1]===i[1];var i})||n.push(o),i}),t.axes=n),n}var l=i.find,e=i.isArray,u=i.isNumber,d=t.deg2rad;return{getBoundingBoxFromPolygon:function(t){return t.reduce(function(t,i){var e=i[0],i=i[1];return t.left=Math.min(e,t.left),t.right=Math.max(e,t.right),t.bottom=Math.max(i,t.bottom),t.top=Math.min(i,t.top),t},{left:Number.MAX_VALUE,right:-Number.MAX_VALUE,bottom:-Number.MAX_VALUE,top:Number.MAX_VALUE})},getPolygon:function(t,i,e,o,n){var r=[t,i],a=t-e/2,t=t+e/2,e=i-o/2,o=i+o/2;return[[a,e],[t,e],[t,o],[a,o]].map(function(t){return s(t,r,-n)})},isPolygonsColliding:function(i,e){var t=function(t,i){t=a(t),i=a(i);return t.concat(i)}(i,e);return!l(t,function(t){return function(t,i,e){i=o(i,t),t=o(e,t);return!!(t.min>i.max||t.max<i.min)}(t,i,e)})},movePolygon:function(i,e,t){return t.map(function(t){return[t[0]+i,t[1]+e]})},rotate2DToOrigin:r,rotate2DToPoint:s}}),i(t,"Mixins/DrawPoint.js",[],function(){function u(t){return"function"==typeof t}function i(t){var i,e=this,o=t.animatableAttribs,n=t.onComplete,r=t.css,a=t.renderer,s=this.series&&this.series.chart.hasRendered?void 0:this.series&&this.series.options.animation,l=this.graphic;this.shouldDraw()?(l||(this.graphic=l=a[t.shapeType](t.shapeArgs).add(t.group)),l.css(r).attr(t.attribs).animate(o,!t.isNew&&s,n)):l&&(i=function(){e.graphic=l=l&&l.destroy(),u(n)&&n()},Object.keys(o).length?l.animate(o,void 0,function(){i()}):i())}return{draw:i,drawPoint:function(t){(t.attribs=t.attribs||{}).class=this.getClassName(),i.call(this,t)},isFn:u}}),i(t,"Series/Wordcloud/WordcloudPoint.js",[t["Mixins/DrawPoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,i,e){var o,n,r=this&&this.__extends||(o=function(t,i){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}o(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),i=i.seriesTypes.column,e=e.extend,r=(n=i.prototype.pointClass,r(a,n),a.prototype.shouldDraw=function(){return!this.isNull},a.prototype.isValid=function(){return!0},a);function a(){var t=null!==n&&n.apply(this,arguments)||this;return t.dimensions=void 0,t.options=void 0,t.polygon=void 0,t.rect=void 0,t.series=void 0,t}return e(r.prototype,{draw:t.drawPoint,weight:1}),r}),i(t,"Series/Wordcloud/WordcloudUtils.js",[t["Mixins/Polygon.js"],t["Core/Utilities.js"]],function(t,i){var e,s=t.isPolygonsColliding,d=t.movePolygon,c=i.extend,l=i.find,r=i.isNumber,h=i.isObject,a=i.merge;function u(t,i){return!(i.left>t.right||i.right<t.left||i.top>t.bottom||i.bottom<t.top)}function p(e,t){function o(t){var i=u(n,t.rect);return i=i&&(e.rotation%90||t.rotation%90)?s(r,t.polygon):i}var i=!1,n=e.rect,r=e.polygon,a=e.lastCollidedWith;return a&&((i=o(a))||delete e.lastCollidedWith),i=i||!!l(t,function(t){var i=o(t);return i&&(e.lastCollidedWith=t),i})}function o(t,i){function e(t){return"boolean"==typeof t}var o=4*t,n=Math.ceil((Math.sqrt(o)-1)/2),r=2*n+1,a=Math.pow(r,2),s=!1;return--r,t<=1e4&&(e(s)&&a-r<=o&&(s={x:n-(a-o),y:-n}),a-=r,e(s)&&a-r<=o&&(s={x:-n,y:a-o-n}),a-=r,(s=e(s)?a-r<=o?{x:a-o-n,y:n}:{x:n,y:n-(a-o-r)}:s).x*=5,s.y*=5),s}function g(t,i){var e=-i.width/2,o=i.width/2,n=-i.height/2,i=i.height/2;return!(e<t.left&&o>t.right&&n<t.top&&i>t.bottom)}return(i=e=e||{}).isRectanglesIntersecting=u,i.intersectsAnyWord=p,i.archimedeanSpiral=function(t,i){var e=i.field,o=!1,i=e.width*e.width+e.height*e.height,e=.8*t;return t<=1e4&&(o={x:e*Math.cos(e),y:e*Math.sin(e)},Math.min(Math.abs(o.x),Math.abs(o.y))<i||(o=!1)),o},i.squareSpiral=o,i.rectangularSpiral=function(t,i){return t=o(t),i=i.field,t&&(t.x*=i.ratioX,t.y*=i.ratioY),t},i.getRandomPosition=function(t){return Math.round(t*(Math.random()+.5)/2)},i.getScale=function(t,i,e){var o=2*Math.max(Math.abs(e.top),Math.abs(e.bottom)),e=2*Math.max(Math.abs(e.left),Math.abs(e.right));return Math.min(0<e?1/e*t:1,0<o?1/o*i:1)},i.getPlayingField=function(t,i,e){var o=e.reduce(function(t,i){var e=i.dimensions,i=Math.max(e.width,e.height);return t.maxHeight=Math.max(t.maxHeight,e.height),t.maxWidth=Math.max(t.maxWidth,e.width),t.area+=i*i,t},{maxHeight:0,maxWidth:0,area:0});return{width:(e=Math.max(o.maxHeight,o.maxWidth,.85*Math.sqrt(o.area)))*(o=i<t?t/i:1),height:e*(t=t<i?i/t:1),ratioX:o,ratioY:t}},i.getRotation=function(t,i,e,o){var n=!1;return n=r(t)&&r(i)&&r(e)&&r(o)&&0<t&&-1<i&&e<o?e+i%t*((o-e)/(t-1||1)):n},i.getSpiral=function(t,i){for(var e=[],o=1;o<1e4;o++)e.push(t(o,i));return function(t){return t<=1e4&&e[t-1]}},i.outsidePlayingField=g,i.intersectionTesting=function(t,i){var e=i.placed,o=i.field,n=i.rectangle,r=i.polygon,a=i.spiral,s=1,l={x:0,y:0},u=t.rect=c({},n);for(t.polygon=r,t.rotation=i.rotation;!1!==l&&(p(t,e)||g(u,o));)l=a(s),h(l)&&(u.left=n.left+l.x,u.right=n.right+l.x,u.top=n.top+l.y,u.bottom=n.bottom+l.y,t.polygon=d(l.x,l.y,r)),s++;return l},i.extendPlayingField=function(t,i){var e,o,n;return t=h(t)&&h(i)?(n=i.bottom-i.top,e=i.right-i.left,o=t.ratioX,i=t.ratioY,a(t,{width:t.width+2*((n=n*i<e*o?e:n)*o),height:t.height+2*(n*i)})):t},i.updateFieldBoundaries=function(t,i){return(!r(t.left)||t.left>i.left)&&(t.left=i.left),(!r(t.right)||t.right<i.right)&&(t.right=i.right),(!r(t.top)||t.top>i.top)&&(t.top=i.top),(!r(t.bottom)||t.bottom<i.bottom)&&(t.bottom=i.bottom),t},e}),i(t,"Series/Wordcloud/WordcloudSeries.js",[t["Core/Globals.js"],t["Mixins/Polygon.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Series/Wordcloud/WordcloudPoint.js"],t["Series/Wordcloud/WordcloudUtils.js"]],function(e,t,i,o,n,r,M){var a,s,l=this&&this.__extends||(a=function(t,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)},function(t,i){function e(){this.constructor=t}a(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}),u=e.noop,P=t.getBoundingBoxFromPolygon,S=t.getPolygon,d=t.isPolygonsColliding,c=t.rotate2DToOrigin,h=t.rotate2DToPoint,t=o.seriesTypes.column,A=n.extend,p=(n.find,n.isArray),j=n.isNumber,F=n.isObject,n=n.merge,t=(l(g,s=t),g.prototype.bindAxes=function(){var t={endOnTick:!1,gridLineWidth:0,lineWidth:0,maxPadding:0,startOnTick:!1,title:void 0,tickPositions:[]};i.prototype.bindAxes.call(this),A(this.yAxis.options,t),A(this.xAxis.options,t)},g.prototype.pointAttribs=function(t,i){i=e.seriesTypes.column.prototype.pointAttribs.call(this,t,i);return delete i.stroke,delete i["stroke-width"],i},g.prototype.deriveFontSize=function(t,i,e){t=j(t)?t:0,i=j(i)?i:1,e=j(e)?e:1;return Math.floor(Math.max(e,t*i))},g.prototype.drawPoints=function(){var l,u,d=this,c=d.hasRendered,t=d.xAxis,i=d.yAxis,e=d.chart,h=d.group,p=d.options,g=p.animation,f=p.allowExtendPlayingField,y=e.renderer,o=y.text().add(h),m=[],x=d.placementStrategy[p.placementStrategy],b=p.rotation,e=d.points.map(function(t){return t.weight}),v=Math.max.apply(null,e),w=d.points.concat().sort(function(t,i){return i.weight-t.weight});d.group.attr({scaleX:1,scaleY:1}),w.forEach(function(t){var i=1/v*t.weight,i=d.deriveFontSize(i,p.maxFontSize,p.minFontSize),i=A({fontSize:i+"px"},p.style);o.css(i).attr({x:0,y:0,text:t.name}),i=o.getBBox(!0),t.dimensions={height:i.height,width:i.width}}),u=M.getPlayingField(t.len,i.len,w),l=M.getSpiral(d.spirals[p.spiral],{field:u}),w.forEach(function(t){var i,e=1/v*t.weight,o=d.deriveFontSize(e,p.maxFontSize,p.minFontSize),n=A({fontSize:o+"px"},p.style),r=x(t,{data:w,field:u,placed:m,rotation:b}),a=A(d.pointAttribs(t,t.selected&&"select"),{align:"center","alignment-baseline":"middle",x:r.x,y:r.y,text:t.name,rotation:j(r.rotation)?r.rotation:void 0}),s=S(r.x,r.y,t.dimensions.width,t.dimensions.height,r.rotation),e=P(s),o=M.intersectionTesting(t,{rectangle:e,polygon:s,field:u,placed:m,spiral:l,rotation:r.rotation});!o&&f&&(u=M.extendPlayingField(u,e),o=M.intersectionTesting(t,{rectangle:e,polygon:s,field:u,placed:m,spiral:l,rotation:r.rotation})),F(o)?(a.x=(a.x||0)+o.x,a.y=(a.y||0)+o.y,e.left+=o.x,e.right+=o.x,e.top+=o.y,e.bottom+=o.y,u=M.updateFieldBoundaries(u,e),m.push(t),t.isNull=!1,t.isInside=!0):t.isNull=!0,g&&(i={x:a.x,y:a.y},c?(delete a.x,delete a.y):(a.x=0,a.y=0)),t.draw({animatableAttribs:i,attribs:a,css:n,group:h,renderer:y,shapeArgs:void 0,shapeType:"text"})}),o=o.destroy(),i=M.getScale(t.len,i.len,u),d.group.attr({scaleX:i,scaleY:i})},g.prototype.hasData=function(){return F(this)&&!0===this.visible&&p(this.points)&&0<this.points.length},g.prototype.getPlotBox=function(){var t=this.chart,i=t.inverted,e=this[i?"yAxis":"xAxis"],o=this[i?"xAxis":"yAxis"],n=e?e.len:t.plotWidth,i=o?o.len:t.plotHeight;return{translateX:(e?e.left:t.plotLeft)+n/2,translateY:(o?o.top:t.plotTop)+i/2,scaleX:1,scaleY:1}},g.defaultOptions=n(t.defaultOptions,{allowExtendPlayingField:!0,animation:{duration:500},borderWidth:0,clip:!1,colorByPoint:!0,minFontSize:1,maxFontSize:25,placementStrategy:"center",rotation:{from:0,orientations:2,to:90},showInLegend:!1,spiral:"rectangular",style:{fontFamily:"sans-serif",fontWeight:"900",whiteSpace:"nowrap"},tooltip:{followPointer:!0,pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.weight}</b><br/>'}}),g);function g(){var t=null!==s&&s.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return A(t.prototype,{animate:i.prototype.animate,animateDrilldown:u,animateDrillupFrom:u,pointClass:r,setClip:u,placementStrategy:{random:function(t,i){var e=i.field,i=i.rotation;return{x:M.getRandomPosition(e.width)-e.width/2,y:M.getRandomPosition(e.height)-e.height/2,rotation:M.getRotation(i.orientations,t.index,i.from,i.to)}},center:function(t,i){i=i.rotation;return{x:0,y:0,rotation:M.getRotation(i.orientations,t.index,i.from,i.to)}}},pointArrayMap:["weight"],spirals:{archimedean:M.archimedeanSpiral,rectangular:M.rectangularSpiral,square:M.squareSpiral},utils:{extendPlayingField:M.extendPlayingField,getRotation:M.getRotation,isPolygonsColliding:d,rotate2DToOrigin:c,rotate2DToPoint:h}}),o.registerSeriesType("wordcloud",t),t}),i(t,"masters/modules/wordcloud.src.js",[],function(){})});