"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/wordcloud",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,i,o){t.hasOwnProperty(e)||(t[e]=o.apply(null,i))}e(t=t?t._modules:{},"Mixins/Polygon.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,e){function n(t,e){return e=u(e)?e:14,e=Math.pow(10,e),Math.round(t*e)/e}function r(t,e){return t=t.map(function(t){return t[0]*e[0]+t[1]*e[1]}),{min:Math.min.apply(this,t),max:Math.max.apply(this,t)}}function o(t,e){var i=t[0];t=t[1];var o=d*-e;return e=Math.cos(o),o=Math.sin(o),[n(i*e-t*o),n(i*o+t*e)]}function s(t,e,i){return[(t=o([t[0]-e[0],t[1]-e[1]],i))[0]+e[0],t[1]+e[1]]}function a(t){var n=t.axes;return i(n)||(n=[],t.concat([t[0]]).reduce(function(t,e){var i,o=(i=t,t=e[0]-i[0],[-(i=e[1]-i[1]),t]);return l(n,function(t){return t[0]===o[0]&&t[1]===o[1]})||n.push(o),e}),t.axes=n),n}var l=e.find,i=e.isArray,u=e.isNumber,d=t.deg2rad;return{getBoundingBoxFromPolygon:function(t){return t.reduce(function(t,e){var i=e[0];return e=e[1],t.left=Math.min(i,t.left),t.right=Math.max(i,t.right),t.bottom=Math.max(e,t.bottom),t.top=Math.min(e,t.top),t},{left:Number.MAX_VALUE,right:-Number.MAX_VALUE,bottom:-Number.MAX_VALUE,top:Number.MAX_VALUE})},getPolygon:function(t,e,i,o,n){var r=[t,e],a=t-i/2;return t+=i/2,[[a,i=e-o/2],[t,i],[t,e+=o/2],[a,e]].map(function(t){return s(t,r,-n)})},isPolygonsColliding:function(i,o){var t,e,e=(t=i,e=o,t=a(i),e=a(e),t.concat(e));return!l(e,function(t){var e=r(i,t);return!!((t=r(o,t)).min>e.max||t.max<e.min)})},movePolygon:function(e,i,t){return t.map(function(t){return[t[0]+e,t[1]+i]})},rotate2DToOrigin:o,rotate2DToPoint:s}}),e(t,"Mixins/DrawPoint.js",[],function(){function u(t){return"function"==typeof t}function e(t){var e,i=this,o=t.animatableAttribs,n=t.onComplete,r=t.css,a=t.renderer,s=this.series&&this.series.chart.hasRendered?void 0:this.series&&this.series.options.animation,l=this.graphic;this.shouldDraw()?(l||(this.graphic=l=a[t.shapeType](t.shapeArgs).add(t.group)),l.css(r).attr(t.attribs).animate(o,!t.isNew&&s,n)):l&&(e=function(){i.graphic=l=l&&l.destroy(),u(n)&&n()},Object.keys(o).length?l.animate(o,void 0,function(){e()}):e())}return{draw:e,drawPoint:function(t){(t.attribs=t.attribs||{}).class=this.getClassName(),e.call(this,t)},isFn:u}}),e(t,"Series/Wordcloud/WordcloudPoint.js",[t["Mixins/DrawPoint.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,i){var o,n,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function a(){var t=null!==n&&n.apply(this,arguments)||this;return t.dimensions=void 0,t.options=void 0,t.polygon=void 0,t.rect=void 0,t.series=void 0,t}return i=i.extend,n=e.seriesTypes.column.prototype.pointClass,r(a,n),a.prototype.shouldDraw=function(){return!this.isNull},a.prototype.isValid=function(){return!0},i((e=a).prototype,{draw:t.drawPoint,weight:1}),e}),e(t,"Series/Wordcloud/WordcloudUtils.js",[t["Mixins/Polygon.js"],t["Core/Utilities.js"]],function(t,e){var i,s=t.isPolygonsColliding,d=t.movePolygon,h=e.extend,l=e.find,r=e.isNumber,c=e.isObject,a=e.merge;function u(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}function p(i,t){function o(t){var e=u(n,t.rect);return e=e&&(i.rotation%90||t.rotation%90)?s(r,t.polygon):e}var e=!1,n=i.rect,r=i.polygon,a=i.lastCollidedWith;return a&&((e=o(a))||delete i.lastCollidedWith),e=e||!!l(t,function(t){var e=o(t);return e&&(i.lastCollidedWith=t),e})}function o(t,e){e=4*t;var i=Math.ceil((Math.sqrt(e)-1)/2),o=2*i+1,n=Math.pow(o,2),r=!1;return--o,t<=1e4&&("boolean"==typeof r&&n-o<=e&&(r={x:i-(n-e),y:-i}),n-=o,"boolean"==typeof r&&n-o<=e&&(r={x:-i,y:n-e-i}),n-=o,(r="boolean"==typeof r?n-o<=e?{x:n-e-i,y:i}:{x:i,y:i-(n-e-o)}:r).x*=5,r.y*=5),r}function g(t,e){var i=e.width/2,o=-e.height/2,n=e.height/2;return!(-e.width/2<t.left&&i>t.right&&o<t.top&&n>t.bottom)}return(e=i=i||{}).isRectanglesIntersecting=u,e.intersectsAnyWord=p,e.archimedeanSpiral=function(t,e){var i=e.field;e=!1;var i=i.width*i.width+i.height*i.height,o=.8*t;return t<=1e4&&(e={x:o*Math.cos(o),y:o*Math.sin(o)},Math.min(Math.abs(e.x),Math.abs(e.y))<i||(e=!1)),e},e.squareSpiral=o,e.rectangularSpiral=function(t,e){return t=o(t),e=e.field,t&&(t.x*=e.ratioX,t.y*=e.ratioY),t},e.getRandomPosition=function(t){return Math.round(t*(Math.random()+.5)/2)},e.getScale=function(t,e,i){var o=2*Math.max(Math.abs(i.top),Math.abs(i.bottom));return i=2*Math.max(Math.abs(i.left),Math.abs(i.right)),Math.min(0<i?1/i*t:1,0<o?1/o*e:1)},e.getPlayingField=function(t,e,i){i=i.reduce(function(t,e){e=e.dimensions;var i=Math.max(e.width,e.height);return t.maxHeight=Math.max(t.maxHeight,e.height),t.maxWidth=Math.max(t.maxWidth,e.width),t.area+=i*i,t},{maxHeight:0,maxWidth:0,area:0});var o=e<t?t/e:1;return{width:(i=Math.max(i.maxHeight,i.maxWidth,.85*Math.sqrt(i.area)))*o,height:i*(t=t<e?e/t:1),ratioX:o,ratioY:t}},e.getRotation=function(t,e,i,o){var n=!1;return n=r(t)&&r(e)&&r(i)&&r(o)&&0<t&&-1<e&&i<o?i+e%t*((o-i)/(t-1||1)):n},e.getSpiral=function(t,e){for(var i=[],o=1;o<1e4;o++)i.push(t(o,e));return function(t){return t<=1e4&&i[t-1]}},e.outsidePlayingField=g,e.intersectionTesting=function(t,e){var i=e.placed,o=e.field,n=e.rectangle,r=e.polygon,a=e.spiral,s=1,l={x:0,y:0},u=t.rect=h({},n);for(t.polygon=r,t.rotation=e.rotation;!1!==l&&(p(t,i)||g(u,o));)l=a(s),c(l)&&(u.left=n.left+l.x,u.right=n.right+l.x,u.top=n.top+l.y,u.bottom=n.bottom+l.y,t.polygon=d(l.x,l.y,r)),s++;return l},e.extendPlayingField=function(t,e){var i,o,n;return c(t)&&c(e)&&(n=e.bottom-e.top,i=e.right-e.left,e=t.ratioX,o=t.ratioY,t=a(t,{width:t.width+(n=n*o<i*e?i:n)*e*2,height:t.height+n*o*2})),t},e.updateFieldBoundaries=function(t,e){return(!r(t.left)||t.left>e.left)&&(t.left=e.left),(!r(t.right)||t.right<e.right)&&(t.right=e.right),(!r(t.top)||t.top>e.top)&&(t.top=e.top),(!r(t.bottom)||t.bottom<e.bottom)&&(t.bottom=e.bottom),t},i}),e(t,"Series/Wordcloud/WordcloudSeries.js",[t["Core/Globals.js"],t["Mixins/Polygon.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"],t["Series/Wordcloud/WordcloudPoint.js"],t["Series/Wordcloud/WordcloudUtils.js"]],function(i,t,e,o,n,r,M){var a,s=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l=i.noop,P=t.getBoundingBoxFromPolygon,S=t.getPolygon,u=t.isPolygonsColliding,d=t.rotate2DToOrigin;t=t.rotate2DToPoint;var h,c=o.seriesTypes.column,A=n.extend,p=n.isArray,j=n.isNumber,F=n.isObject,g=n.merge;function f(){var t=null!==h&&h.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return s(f,h=c),f.prototype.bindAxes=function(){var t={endOnTick:!1,gridLineWidth:0,lineWidth:0,maxPadding:0,startOnTick:!1,title:void 0,tickPositions:[]};e.prototype.bindAxes.call(this),A(this.yAxis.options,t),A(this.xAxis.options,t)},f.prototype.pointAttribs=function(t,e){return delete(t=i.seriesTypes.column.prototype.pointAttribs.call(this,t,e)).stroke,delete t["stroke-width"],t},f.prototype.deriveFontSize=function(t,e,i){return t=j(t)?t:0,e=j(e)?e:1,i=j(i)?i:1,Math.floor(Math.max(i,t*e))},f.prototype.drawPoints=function(){var l=this,u=l.hasRendered,t=l.xAxis,e=l.yAxis,d=l.group,h=l.options,c=h.animation,p=h.allowExtendPlayingField,g=l.chart.renderer,i=g.text().add(d),f=[],y=l.placementStrategy[h.placementStrategy],m=h.rotation,o=l.points.map(function(t){return t.weight}),x=Math.max.apply(null,o),b=l.points.concat().sort(function(t,e){return e.weight-t.weight});l.group.attr({scaleX:1,scaleY:1}),b.forEach(function(t){var e=l.deriveFontSize(1/x*t.weight,h.maxFontSize,h.minFontSize),e=A({fontSize:e+"px"},h.style);i.css(e).attr({x:0,y:0,text:t.name}),e=i.getBBox(!0),t.dimensions={height:e.height,width:e.width}});var v=M.getPlayingField(t.len,e.len,b),w=M.getSpiral(l.spirals[h.spiral],{field:v});b.forEach(function(t){var e,i=l.deriveFontSize(1/x*t.weight,h.maxFontSize,h.minFontSize),i=A({fontSize:i+"px"},h.style),o=y(t,{data:b,field:v,placed:f,rotation:m}),n=A(l.pointAttribs(t,t.selected&&"select"),{align:"center","alignment-baseline":"middle",x:o.x,y:o.y,text:t.name,rotation:j(o.rotation)?o.rotation:void 0}),r=S(o.x,o.y,t.dimensions.width,t.dimensions.height,o.rotation),a=P(r),s=M.intersectionTesting(t,{rectangle:a,polygon:r,field:v,placed:f,spiral:w,rotation:o.rotation});!s&&p&&(v=M.extendPlayingField(v,a),s=M.intersectionTesting(t,{rectangle:a,polygon:r,field:v,placed:f,spiral:w,rotation:o.rotation})),F(s)?(n.x=(n.x||0)+s.x,n.y=(n.y||0)+s.y,a.left+=s.x,a.right+=s.x,a.top+=s.y,a.bottom+=s.y,v=M.updateFieldBoundaries(v,a),f.push(t),t.isNull=!1,t.isInside=!0):t.isNull=!0,c&&(e={x:n.x,y:n.y},u?(delete n.x,delete n.y):(n.x=0,n.y=0)),t.draw({animatableAttribs:e,attribs:n,css:i,group:d,renderer:g,shapeArgs:void 0,shapeType:"text"})}),i=i.destroy(),t=M.getScale(t.len,e.len,v),l.group.attr({scaleX:t,scaleY:t})},f.prototype.hasData=function(){return F(this)&&!0===this.visible&&p(this.points)&&0<this.points.length},f.prototype.getPlotBox=function(){var t=this.chart,e=this[(i=t.inverted)?"yAxis":"xAxis"],i=this[i?"xAxis":"yAxis"];return{translateX:(e?e.left:t.plotLeft)+(e?e.len:t.plotWidth)/2,translateY:(i?i.top:t.plotTop)+(i?i.len:t.plotHeight)/2,scaleX:1,scaleY:1}},f.defaultOptions=g(c.defaultOptions,{allowExtendPlayingField:!0,animation:{duration:500},borderWidth:0,clip:!1,colorByPoint:!0,minFontSize:1,maxFontSize:25,placementStrategy:"center",rotation:{from:0,orientations:2,to:90},showInLegend:!1,spiral:"rectangular",style:{fontFamily:"sans-serif",fontWeight:"900",whiteSpace:"nowrap"},tooltip:{followPointer:!0,pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.weight}</b><br/>'}}),A((n=f).prototype,{animate:e.prototype.animate,animateDrilldown:l,animateDrillupFrom:l,pointClass:r,setClip:l,placementStrategy:{random:function(t,e){var i=e.field;return e=e.rotation,{x:M.getRandomPosition(i.width)-i.width/2,y:M.getRandomPosition(i.height)-i.height/2,rotation:M.getRotation(e.orientations,t.index,e.from,e.to)}},center:function(t,e){return e=e.rotation,{x:0,y:0,rotation:M.getRotation(e.orientations,t.index,e.from,e.to)}}},pointArrayMap:["weight"],spirals:{archimedean:M.archimedeanSpiral,rectangular:M.rectangularSpiral,square:M.squareSpiral},utils:{extendPlayingField:M.extendPlayingField,getRotation:M.getRotation,isPolygonsColliding:u,rotate2DToOrigin:d,rotate2DToPoint:t}}),o.registerSeriesType("wordcloud",n),n}),e(t,"masters/modules/wordcloud.src.js",[],function(){})});