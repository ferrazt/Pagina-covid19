"use strict";!function(e){"object"==typeof module&&module.exports?module.exports=e.default=e:"function"==typeof define&&define.amd?define("highcharts/modules/map",["highcharts"],function(t){return e(t),e.Highcharts=t,e}):e("undefined"!=typeof Highcharts?Highcharts:void 0)}(function(t){function e(t,e,o,i){t.hasOwnProperty(e)||(t[e]=i.apply(null,o))}e(t=t?t._modules:{},"Core/Axis/MapAxis.js",[t["Core/Axis/Axis.js"],t["Core/Utilities.js"]],function(t,e){var o=e.addEvent,n=e.pick,i=function(t){this.axis=t};function r(){}return r.compose=function(t){t.keepProps.push("mapAxis"),o(t,"init",function(){this.mapAxis||(this.mapAxis=new i(this))}),o(t,"getSeriesExtremes",function(){var o;this.mapAxis&&(o=[],this.isXAxis&&(this.series.forEach(function(t,e){t.useMapGeometry&&(o[e]=t.xData,t.xData=[])}),this.mapAxis.seriesXData=o))}),o(t,"afterGetSeriesExtremes",function(){var o,i,r,s;this.mapAxis&&(o=this.mapAxis.seriesXData||[],this.isXAxis&&(r=n(this.dataMin,Number.MAX_VALUE),s=n(this.dataMax,-Number.MAX_VALUE),this.series.forEach(function(t,e){t.useMapGeometry&&(r=Math.min(r,n(t.minX,r)),s=Math.max(s,n(t.maxX,s)),t.xData=o[e],i=!0)}),i&&(this.dataMin=r,this.dataMax=s),this.mapAxis.seriesXData=void 0))}),o(t,"afterSetAxisTranslation",function(){var t,e,o;this.mapAxis&&(t=(o=this.chart).plotWidth/o.plotHeight,o=o.xAxis[0],"yAxis"===this.coll&&void 0!==o.transA&&this.series.forEach(function(t){t.preserveAspectRatio&&(e=!0)}),e&&(this.transA=o.transA=Math.min(this.transA,o.transA),o=((t=(t/=(o.max-o.min)/(this.max-this.min))<1?this:o).max-t.min)*t.transA,t.mapAxis.pixelPadding=t.len-o,t.minPixelPadding=t.mapAxis.pixelPadding/2,o=t.mapAxis.fixTo)&&(o=o[1]-t.toValue(o[0],!0),o*=t.transA,(Math.abs(o)>t.minPixelPadding||t.min===t.dataMin&&t.max===t.dataMax)&&(o=0),t.minPixelPadding-=o))}),o(t,"render",function(){this.mapAxis&&(this.mapAxis.fixTo=void 0)})},(e=r).compose(t),e}),e(t,"Mixins/ColorSeries.js",[],function(){return{colorPointMixin:{setVisible:function(t){var e=this,o=t?"show":"hide";e.visible=e.options.visible=!!t,["graphic","dataLabel"].forEach(function(t){e[t]&&e[t][o]()}),this.series.buildKDTree()}},colorSeriesMixin:{optionalAxis:"colorAxis",colorAxis:0,translateColors:function(){var o=this,i=this.options.nullColor,r=this.colorAxis,s=this.colorKey;(this.data.length?this.data:this.points).forEach(function(t){var e=t.getNestedProperty(s);(e=t.options.color||(t.isNull||null===t.value?i:r&&void 0!==e?r.toColor(e,t):t.color||o.color))&&t.color!==e&&(t.color=e,"point"===o.options.legendType&&t.legendItem&&o.chart.legend.colorizeItem(t,t.visible))})}}}}),e(t,"Core/Axis/ColorAxis.js",[t["Core/Axis/Axis.js"],t["Core/Chart/Chart.js"],t["Core/Color/Color.js"],t["Mixins/ColorSeries.js"],t["Core/Animation/Fx.js"],t["Core/Globals.js"],t["Core/Legend.js"],t["Mixins/LegendSymbol.js"],t["Core/Color/Palette.js"],t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(t,e,o,i,r,s,n,d,a,l,p,h){var c,u=this&&this.__extends||(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),m=o.parse;o=i.colorPointMixin,i=i.colorSeriesMixin;var f=s.noop,y=h.addEvent,g=h.extend,b=h.isNumber,x=h.merge,v=h.pick,M=h.splat;g(p.prototype,i),g(l.prototype,o),e.prototype.collectionsWithUpdate.push("colorAxis"),e.prototype.collectionsWithInit.colorAxis=[e.prototype.addColorAxis];var C,A=(u(S,C=t),S.prototype.init=function(t,e){var o=t.options.legend||{},i=e.layout?"vertical"!==e.layout:"vertical"!==o.layout,o=x(S.defaultColorAxisOptions,e,{showEmpty:!1,title:null,visible:o.enabled&&(!e||!1!==e.visible)});this.coll="colorAxis",this.side=e.side||i?2:1,this.reversed=e.reversed||!i,this.opposite=!i,C.prototype.init.call(this,t,o),e.dataClasses&&this.initDataClasses(e),this.initStops(),this.horiz=i,this.zoomEnabled=!1},S.prototype.initDataClasses=function(t){var o,i=this.chart,r=0,s=i.options.chart.colorCount,n=this.options,a=t.dataClasses.length;this.dataClasses=o=[],this.legendItems=[],t.dataClasses.forEach(function(t,e){t=x(t),o.push(t),!i.styledMode&&t.color||("category"===n.dataClassColor?(i.styledMode||(e=i.options.colors,s=e.length,t.color=e[r]),t.colorIndex=r,++r===s&&(r=0)):t.color=m(n.minColor).tweenTo(m(n.maxColor),a<2?.5:e/(a-1)))})},S.prototype.hasData=function(){return!!(this.tickPositions||[]).length},S.prototype.setTickPositions=function(){if(!this.dataClasses)return C.prototype.setTickPositions.call(this)},S.prototype.initStops=function(){this.stops=this.options.stops||[[0,this.options.minColor],[1,this.options.maxColor]],this.stops.forEach(function(t){t.color=m(t[1])})},S.prototype.setOptions=function(t){C.prototype.setOptions.call(this,t),this.options.crosshair=this.options.marker},S.prototype.setAxisSize=function(){var t,e,o=this.legendSymbol,i=this.chart,r=i.options.legend||{};o?(this.left=r=o.attr("x"),this.top=t=o.attr("y"),this.width=e=o.attr("width"),this.height=o=o.attr("height"),this.right=i.chartWidth-r-e,this.bottom=i.chartHeight-t-o,this.len=this.horiz?e:o,this.pos=this.horiz?r:t):this.len=(this.horiz?r.symbolWidth:r.symbolHeight)||S.defaultLegendLength},S.prototype.normalizedValue=function(t){return this.logarithmic&&(t=this.logarithmic.log2lin(t)),1-(this.max-t)/(this.max-this.min||1)},S.prototype.toColor=function(t,e){var o,i=this.dataClasses,r=this.stops;if(i)for(o=i.length;o--;){var s=i[o],n=s.from,r=s.to;if((void 0===n||n<=t)&&(void 0===r||t<=r)){var a=s.color;e&&(e.dataClass=o,e.colorIndex=s.colorIndex);break}}else{for(t=this.normalizedValue(t),o=r.length;o--&&!(t>r[o][0]););n=r[o]||r[o+1],t=1-((r=r[o+1]||n)[0]-t)/(r[0]-n[0]||1),a=n.color.tweenTo(r.color,t)}return a},S.prototype.getOffset=function(){var t=this.legendGroup,e=this.chart.axisOffset[this.side];t&&(this.axisParent=t,C.prototype.getOffset.call(this),this.added||(this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=e)},S.prototype.setLegendColor=function(){var t=(e=this.reversed)?1:0,e=e?0:1,t=this.horiz?[t,0,e,0]:[0,e,0,t];this.legendColor={linearGradient:{x1:t[0],y1:t[1],x2:t[2],y2:t[3]},stops:this.stops}},S.prototype.drawLegendSymbol=function(t,e){var o=t.padding,i=t.options,r=this.horiz,s=v(i.symbolWidth,r?S.defaultLegendLength:12),n=v(i.symbolHeight,r?12:S.defaultLegendLength),a=v(i.labelPadding,r?16:30),i=v(i.itemDistance,10);this.setLegendColor(),e.legendSymbol=this.chart.renderer.rect(0,t.baseline-11,s,n).attr({zIndex:1}).add(e.legendGroup),this.legendItemWidth=s+o+(r?i:a),this.legendItemHeight=n+o+(r?a:0)},S.prototype.setState=function(e){this.series.forEach(function(t){t.setState(e)})},S.prototype.setVisible=function(){},S.prototype.getSeriesExtremes=function(){var t,e=this.series,o=e.length;for(this.dataMin=1/0,this.dataMax=-1/0;o--;){var i=e[o],r=i.colorKey=v(i.options.colorKey,i.colorKey,i.pointValKey,i.zoneAxis,"y"),s=i.pointArrayMap,n=i[r+"Min"]&&i[r+"Max"];if(i[r+"Data"])var a=i[r+"Data"];else if(s){var a=[],s=s.indexOf(r),l=i.yData;if(0<=s&&l)for(t=0;t<l.length;t++)a.push(v(l[t][s],l[t]))}else a=i.yData;n?(i.minColorValue=i[r+"Min"],i.maxColorValue=i[r+"Max"]):(a=p.prototype.getExtremes.call(i,a),i.minColorValue=a.dataMin,i.maxColorValue=a.dataMax),void 0!==i.minColorValue&&(this.dataMin=Math.min(this.dataMin,i.minColorValue),this.dataMax=Math.max(this.dataMax,i.maxColorValue)),n||p.prototype.applyExtremes.call(i)}},S.prototype.drawCrosshair=function(t,e){var o,i=e&&e.plotX,r=e&&e.plotY,s=this.pos,n=this.len;e&&((o=this.toPixels(e.getNestedProperty(e.series.colorKey)))<s?o=s-2:s+n<o&&(o=s+n+2),e.plotX=o,e.plotY=this.len-o,C.prototype.drawCrosshair.call(this,t,e),e.plotX=i,e.plotY=r,this.cross&&!this.cross.addedToColorAxis&&this.legendGroup&&(this.cross.addClass("highcharts-coloraxis-marker").add(this.legendGroup),this.cross.addedToColorAxis=!0,this.chart.styledMode||"object"!=typeof this.crosshair||this.cross.attr({fill:this.crosshair.color})))},S.prototype.getPlotLinePath=function(t){var e=this.left,o=t.translatedValue,i=this.top;return b(o)?this.horiz?[["M",o-4,i-6],["L",o+4,i-6],["L",o,i],["Z"]]:[["M",e,o],["L",e-6,o+6],["L",e-6,o-6],["Z"]]:C.prototype.getPlotLinePath.call(this,t)},S.prototype.update=function(t,e){var o=this.chart.legend;this.series.forEach(function(t){t.isDirtyData=!0}),(t.dataClasses&&o.allItems||this.dataClasses)&&this.destroyItems(),C.prototype.update.call(this,t,e),this.legendItem&&(this.setLegendColor(),o.colorizeItem(this,!0))},S.prototype.destroyItems=function(){var e=this.chart;this.legendItem?e.legend.destroyItem(this):this.legendItems&&this.legendItems.forEach(function(t){e.legend.destroyItem(t)}),e.isDirtyLegend=!0},S.prototype.destroy=function(){this.chart.isDirtyLegend=!0,this.destroyItems(),C.prototype.destroy.apply(this,[].slice.call(arguments))},S.prototype.remove=function(t){this.destroyItems(),C.prototype.remove.call(this,t)},S.prototype.getDataClassLegendSymbols=function(){var n,a=this,l=a.chart,p=a.legendItems,t=l.options.legend,h=t.valueDecimals,c=t.valueSuffix||"";return p.length||a.dataClasses.forEach(function(t,e){var o=!0,i=t.from,r=t.to,s=l.numberFormatter;n="",void 0===i?n="< ":void 0===r&&(n="> "),void 0!==i&&(n+=s(i,h)+c),void 0!==i&&void 0!==r&&(n+=" - "),void 0!==r&&(n+=s(r,h)+c),p.push(g({chart:l,name:n,options:{},drawLegendSymbol:d.drawRectangle,visible:!0,setState:f,isDataClass:!0,setVisible:function(){o=a.visible=!o,a.series.forEach(function(t){t.points.forEach(function(t){t.dataClass===e&&t.setVisible(o)})}),l.legend.colorizeItem(this,o)}},t))}),p},S.defaultLegendLength=200,S.defaultColorAxisOptions={lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},width:.01,color:a.neutralColor40},labels:{overflow:"justify",rotation:0},minColor:a.highlightColor10,maxColor:a.highlightColor100,tickLength:5,showInLegend:!0},S.keepProps=["legendGroup","legendItemHeight","legendItemWidth","legendItem","legendSymbol"],S);function S(t,e){var o=C.call(this,t,e)||this;return o.beforePadding=!1,o.chart=void 0,o.coll="colorAxis",o.dataClasses=void 0,o.legendItem=void 0,o.legendItems=void 0,o.name="",o.options=void 0,o.stops=void 0,o.visible=!0,o.init(t,e),o}return Array.prototype.push.apply(t.keepProps,A.keepProps),s.ColorAxis=A,["fill","stroke"].forEach(function(t){r.prototype[t+"Setter"]=function(){this.elem.attr(t,m(this.start).tweenTo(m(this.end),this.pos),null,!0)}}),y(e,"afterGetAxes",function(){var o=this,t=o.options;this.colorAxis=[],t.colorAxis&&(t.colorAxis=M(t.colorAxis),t.colorAxis.forEach(function(t,e){t.index=e,new A(o,t)}))}),y(p,"bindAxes",function(){var t=this.axisTypes;t?-1===t.indexOf("colorAxis")&&t.push("colorAxis"):this.axisTypes=["colorAxis"]}),y(n,"afterGetAllItems",function(e){function o(t){-1!==(t=e.allItems.indexOf(t))&&(r.destroyItem(e.allItems[t]),e.allItems.splice(t,1))}var i,t,r=this,s=[];for((this.chart.colorAxis||[]).forEach(function(t){(i=t.options)&&i.showInLegend&&(i.dataClasses&&i.visible?s=s.concat(t.getDataClassLegendSymbols()):i.visible&&s.push(t),t.series.forEach(function(t){t.options.showInLegend&&!i.dataClasses||("point"===t.options.legendType?t.points.forEach(function(t){o(t)}):o(t))}))}),t=s.length;t--;)e.allItems.unshift(s[t])}),y(n,"afterColorizeItem",function(t){t.visible&&t.item.legendColor&&t.item.legendSymbol.attr({fill:t.item.legendColor})}),y(n,"afterUpdate",function(){var t=this.chart.colorAxis;t&&t.forEach(function(t,e,o){t.update({},o)})}),y(p,"afterTranslate",function(){(this.chart.colorAxis&&this.chart.colorAxis.length||this.colorAttribs)&&this.translateColors()}),A}),e(t,"Mixins/ColorMapSeries.js",[t["Core/Globals.js"],t["Core/Series/Point.js"],t["Core/Utilities.js"]],function(t,e,o){var i=o.defined;o=o.addEvent;var r=t.noop;return t=t.seriesTypes,o(e,"afterSetState",function(t){this.moveToTopOnHover&&this.graphic&&this.graphic.attr({zIndex:t&&"hover"===t.state?1:0})}),{colorMapPointMixin:{dataLabelOnNull:!0,moveToTopOnHover:!0,isValid:function(){return null!==this.value&&1/0!==this.value&&-1/0!==this.value}},colorMapSeriesMixin:{pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:r,parallelArrays:["x","y","value"],colorKey:"value",pointAttribs:t.column.prototype.pointAttribs,colorAttribs:function(t){var e={};return!i(t.color)||t.state&&"normal"!==t.state||(e[this.colorProp||"fill"]=t.color),e}}}}),e(t,"Maps/MapNavigationOptionsDefault.js",[t["Core/DefaultOptions.js"],t["Core/Utilities.js"]],function(t,e){return(e=e.extend)(t.defaultOptions.lang,{zoomIn:"Zoom in",zoomOut:"Zoom out"}),t.defaultOptions.mapNavigation={buttonOptions:{alignTo:"plotBox",align:"left",verticalAlign:"top",x:0,width:18,height:18,padding:5,style:{fontSize:"15px",fontWeight:"bold"},theme:{"stroke-width":1,"text-align":"center"}},buttons:{zoomIn:{onclick:function(){this.mapZoom(.5)},text:"+",y:0},zoomOut:{onclick:function(){this.mapZoom(2)},text:"-",y:28}},mouseWheelSensitivity:1.1}}),e(t,"Maps/MapNavigation.js",[t["Core/Chart/Chart.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,e,o){function c(t){t&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)}function i(t){this.init(t)}var r=e.doc,d=o.addEvent,u=o.extend,m=o.merge,f=o.objectEach,y=o.pick;i.prototype.init=function(t){(this.chart=t).mapNavButtons=[]},i.prototype.update=function(t){function r(t){this.handler.call(l,t),c(t)}var s,n,a,l=this.chart,p=l.options.mapNavigation,h=l.mapNavButtons;for(t&&(p=l.options.mapNavigation=m(l.options.mapNavigation,t));h.length;)h.pop().destroy();y(p.enableButtons,p.enabled)&&!l.renderer.forExport&&f(p.buttons,function(t,e){t=m(p.buttonOptions,t),!l.styledMode&&t.theme&&((s=t.theme).style=m(t.theme.style,t.style),n=(a=s.states)&&a.hover,a=a&&a.select,delete s.states);var o,i=l.renderer.button(t.text||"",0,0,r,s,n,a,void 0,"zoomIn"===e?"topbutton":"bottombutton").addClass("highcharts-map-navigation highcharts-"+{zoomIn:"zoom-in",zoomOut:"zoom-out"}[e]).attr({width:t.width,height:t.height,title:l.options.lang[e],padding:t.padding,zIndex:5}).add();i.handler=t.onclick,d(i.element,"dblclick",c),h.push(i),u(t,{width:i.width,height:2*i.height}),l.hasLoaded?i.align(t,!1,t.alignTo):o=d(l,"load",function(){i.element&&i.align(t,!1,t.alignTo),o()})}),this.updateEvents(p)},i.prototype.updateEvents=function(t){var e=this.chart;y(t.enableDoubleClickZoom,t.enabled)||t.enableDoubleClickZoomTo?this.unbindDblClick=this.unbindDblClick||d(e.container,"dblclick",function(t){e.pointer.onContainerDblClick(t)}):this.unbindDblClick&&(this.unbindDblClick=this.unbindDblClick()),y(t.enableMouseWheelZoom,t.enabled)?this.unbindMouseWheel=this.unbindMouseWheel||d(e.container,void 0!==r.onwheel?"wheel":void 0!==r.onmousewheel?"mousewheel":"DOMMouseScroll",function(t){return e.pointer.inClass(t.target,"highcharts-no-mousewheel")||(e.pointer.onContainerMouseWheel(t),c(t)),!1}):this.unbindMouseWheel&&(this.unbindMouseWheel=this.unbindMouseWheel())},u(t.prototype,{fitToBox:function(o,i){return[["x","width"],["y","height"]].forEach(function(t){var e=t[0];t=t[1],o[e]+o[t]>i[e]+i[t]&&(o[t]>i[t]?(o[t]=i[t],o[e]=i[e]):o[e]=i[e]+i[t]-o[t]),o[t]>i[t]&&(o[t]=i[t]),o[e]<i[e]&&(o[e]=i[e])}),o},mapZoom:function(t,e,o,i,r,s){var n=this.xAxis[0],a=n.max-n.min,l=y(e,n.min+a/2),p=a*t,h=(a=this.yAxis[0]).max-a.min,c=y(o,a.min+h/2),p=(l=this.fitToBox({x:l-p*(i?(i-n.pos)/n.len:.5),y:c-(h*=t)*(r?(r-a.pos)/a.len:.5),width:p,height:h},{x:n.dataMin,y:a.dataMin,width:n.dataMax-n.dataMin,height:a.dataMax-a.dataMin})).x<=n.dataMin&&l.width>=n.dataMax-n.dataMin&&l.y<=a.dataMin&&l.height>=a.dataMax-a.dataMin;i&&n.mapAxis&&(n.mapAxis.fixTo=[i-n.pos,e]),r&&a.mapAxis&&(a.mapAxis.fixTo=[r-a.pos,o]),void 0===t||p?(n.setExtremes(void 0,void 0,!1),a.setExtremes(void 0,void 0,!1)):(n.setExtremes(l.x,l.x+l.width,!1),a.setExtremes(l.y,l.y+l.height,!1)),this.redraw(s)}}),d(t,"beforeRender",function(){this.mapNavigation=new i(this),this.mapNavigation.update()}),e.MapNavigation=i}),e(t,"Maps/MapPointer.js",[t["Core/Pointer.js"],t["Core/Utilities.js"]],function(t,e){var o=e.extend,i=e.pick;e=e.wrap;var r,s=0;o(t.prototype,{onContainerDblClick:function(t){var e=this.chart;t=this.normalize(t),e.options.mapNavigation.enableDoubleClickZoomTo?e.pointer.inClass(t.target,"highcharts-tracker")&&e.hoverPoint&&e.hoverPoint.zoomTo():e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapZoom(.5,e.xAxis[0].toValue(t.chartX),e.yAxis[0].toValue(t.chartY),t.chartX,t.chartY)},onContainerMouseWheel:function(t){var e=this.chart,o=(t=this.normalize(t)).deltaY||t.detail||-t.wheelDelta/120;1<=Math.abs(o)&&(s+=Math.abs(o),r&&clearTimeout(r),r=setTimeout(function(){s=0},50)),s<10&&e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&e.mapZoom(Math.pow(e.options.mapNavigation.mouseWheelSensitivity,o),e.xAxis[0].toValue(t.chartX),e.yAxis[0].toValue(t.chartY),t.chartX,t.chartY,!(Math.abs(o)<1)&&void 0)}}),e(t.prototype,"zoomOption",function(t){var e=this.chart.options.mapNavigation;i(e.enableTouchZoom,e.enabled)&&(this.chart.options.chart.pinchType="xy"),t.apply(this,[].slice.call(arguments,1))}),e(t.prototype,"pinchTranslate",function(t,e,o,i,r,s,n){t.call(this,e,o,i,r,s,n),"map"===this.chart.options.chart.type&&this.hasZoom&&(t=i.scaleX>i.scaleY,this.pinchTranslateDirection(!t,e,o,i,r,s,n,t?i.scaleX:i.scaleY))})}),e(t,"Maps/MapSymbols.js",[t["Core/Renderer/SVG/SVGRenderer.js"]],function(t){function s(t,e,o,i,r,s,n,a){return[["M",t+r,e],["L",t+o-s,e],["C",t+o-s/2,e,t+o,e+s/2,t+o,e+s],["L",t+o,e+i-n],["C",t+o,e+i-n/2,t+o-n/2,e+i,t+o-n,e+i],["L",t+a,e+i],["C",t+a/2,e+i,t,e+i-a/2,t,e+i-a],["L",t,e+r],["C",t,e+r/2,t+r/2,e,t+r,e],["Z"]]}return(t=t.prototype.symbols).bottombutton=function(t,e,o,i,r){return s(t-1,e-1,o,i,0,0,r=r&&r.r||0,r)},t.topbutton=function(t,e,o,i,r){return s(t-1,e-1,o,i,r=r&&r.r||0,r,0,0)},t}),e(t,"Core/Chart/MapChart.js",[t["Core/Chart/Chart.js"],t["Core/DefaultOptions.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,e,o,i){var r,s,n,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=e.getOptions,p=i.merge,h=i.pick;function c(){return null!==s&&s.apply(this,arguments)||this}return a(c,s=t),c.prototype.init=function(t,e){var o={endOnTick:!1,visible:!1,minPadding:0,maxPadding:0,startOnTick:!1},i=l().credits;t=p({chart:{panning:{enabled:!0,type:"xy"},type:"map"},credits:{mapText:h(i.mapText,' © <a href="{geojson.copyrightUrl}">{geojson.copyrightShort}</a>'),mapTextFull:h(i.mapTextFull,"{geojson.copyright}")},tooltip:{followTouchMove:!1},xAxis:o,yAxis:p(o,{reversed:!0})},t,{chart:{inverted:!1,alignTicks:!1}}),s.prototype.init.call(this,t,e)},(n=t=(t=c)||{}).maps={},n.mapChart=function(t,e,o){return new n(t,e,o)},n.splitPath=function(t){return"string"==typeof t&&(t=(t=t.replace(/([A-Za-z])/g," $1 ").replace(/^\s*/,"").replace(/\s*$/,"")).split(/[ ,;]+/).map(function(t){return/[A-za-z]/.test(t)?t:parseFloat(t)})),o.prototype.pathToSegments(t)},t}),e(t,"Series/Map/MapPoint.js",[t["Mixins/ColorMapSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o){var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});t=t.colorMapPointMixin;var s,n=o.extend;function a(){var t=null!==s&&s.apply(this,arguments)||this;return t.options=void 0,t.path=void 0,t.series=void 0,t}return s=e.seriesTypes.scatter.prototype.pointClass,r(a,s),a.prototype.applyOptions=function(t,e){var o=this.series;return t=s.prototype.applyOptions.call(this,t,e),e=o.joinBy,o.mapData&&o.mapMap&&((e=void 0!==(e=s.prototype.getNestedProperty.call(t,e[1]))&&o.mapMap[e])?(o.xyFromShape&&(t.x=e._midX,t.y=e._midY),n(t,e)):t.value=t.value||null),t},a.prototype.onMouseOver=function(t){o.clearTimeout(this.colorInterval),null!==this.value||this.series.options.nullInteraction?s.prototype.onMouseOver.call(this,t):this.series.onMouseOut(t)},a.prototype.zoomTo=function(){var t=this.series;t.xAxis.setExtremes(this._minX,this._maxX,!1),t.yAxis.setExtremes(this._minY,this._maxY,!1),t.chart.redraw()},n((e=a).prototype,{dataLabelOnNull:t.dataLabelOnNull,isValid:t.isValid,moveToTopOnHover:t.moveToTopOnHover}),e}),e(t,"Series/Map/MapSeries.js",[t["Mixins/ColorMapSeries.js"],t["Core/Globals.js"],t["Mixins/LegendSymbol.js"],t["Core/Chart/MapChart.js"],t["Series/Map/MapPoint.js"],t["Core/Color/Palette.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(t,f,e,o,y,i,g,r,m,s){var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});t=t.colorMapSeriesMixin;var l=f.noop,b=o.maps,x=o.splitPath,v=(o=r.seriesTypes).column,p=o.scatter;o=s.extend;var h,c=s.fireEvent,M=s.getNestedProperty,C=s.isArray,A=s.isNumber,S=s.merge,j=s.objectEach,_=s.pick,d=s.splat;function u(){var t=null!==h&&h.apply(this,arguments)||this;return t.baseTrans=void 0,t.chart=void 0,t.data=void 0,t.group=void 0,t.joinBy=void 0,t.options=void 0,t.points=void 0,t.transformGroup=void 0,t}return a(u,h=p),u.prototype.animate=function(t){var e=this.options.animation,o=this.group,i=this.xAxis,r=this.yAxis,s=i.pos,n=r.pos;this.chart.renderer.isSVG&&(!0===e&&(e={duration:1e3}),t?o.attr({translateX:s+i.len/2,translateY:n+r.len/2,scaleX:.001,scaleY:.001}):o.animate({translateX:s,translateY:n,scaleX:1,scaleY:1},e))},u.prototype.animateDrilldown=function(t){var e=this.chart.plotBox,o=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],i=o.bBox,r=this.chart.options.drilldown.animation;t||(t=Math.min(i.width/e.width,i.height/e.height),o.shapeArgs={scaleX:t,scaleY:t,translateX:i.x,translateY:i.y},this.points.forEach(function(t){t.graphic&&t.graphic.attr(o.shapeArgs).animate({scaleX:1,scaleY:1,translateX:0,translateY:0},r)}))},u.prototype.animateDrillupFrom=function(t){v.prototype.animateDrillupFrom.call(this,t)},u.prototype.animateDrillupTo=function(t){v.prototype.animateDrillupTo.call(this,t)},u.prototype.doFullTranslate=function(){return this.isDirtyData||this.chart.isResizing||this.chart.renderer.isVML||!this.baseTrans},u.prototype.drawMapDataLabels=function(){g.prototype.drawDataLabels.call(this),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)},u.prototype.drawPoints=function(){var o,i,r,s,n,a,l,p,h,c=this,t=c.xAxis,e=c.yAxis,d=c.group,u=c.chart,m=u.renderer,f=this.baseTrans;c.transformGroup||(c.transformGroup=m.g().attr({scaleX:1,scaleY:1}).add(d),c.transformGroup.survive=!0),c.doFullTranslate()?(u.hasRendered&&!u.styledMode&&c.points.forEach(function(t){t.shapeArgs&&(t.shapeArgs.fill=c.pointAttribs(t,t.state).fill)}),c.group=c.transformGroup,v.prototype.drawPoints.apply(c),c.group=d,c.points.forEach(function(t){var e;t.graphic&&(e="",t.name&&(e+="highcharts-name-"+t.name.replace(/ /g,"-").toLowerCase()),t.properties&&t.properties["hc-key"]&&(e+=" highcharts-key-"+t.properties["hc-key"].toLowerCase()),e&&t.graphic.addClass(e),u.styledMode&&t.graphic.css(c.pointAttribs(t,t.selected?"select":void 0)))}),this.baseTrans={originX:t.min-t.minPixelPadding/t.transA,originY:e.min-e.minPixelPadding/e.transA+(e.reversed?0:e.len/e.transA),transAX:t.transA,transAY:e.transA},this.transformGroup.animate({translateX:0,translateY:0,scaleX:1,scaleY:1})):(o=t.transA/f.transAX,i=e.transA/f.transAY,r=t.toPixels(f.originX,!0),s=e.toPixels(f.originY,!0),.99<o&&o<1.01&&.99<i&&i<1.01&&(i=o=1,r=Math.round(r),s=Math.round(s)),n=this.transformGroup,u.renderer.globalAnimation?(a=n.attr("translateX"),l=n.attr("translateY"),p=n.attr("scaleX"),h=n.attr("scaleY"),n.attr({animator:0}).animate({animator:1},{step:function(t,e){n.attr({translateX:a+(r-a)*e.pos,translateY:l+(s-l)*e.pos,scaleX:p+(o-p)*e.pos,scaleY:h+(i-h)*e.pos})}})):n.attr({translateX:r,translateY:s,scaleX:o,scaleY:i})),u.styledMode||d.element.setAttribute("stroke-width",_(c.options[c.pointAttrToOptions&&c.pointAttrToOptions["stroke-width"]||"borderWidth"],1)/(o||1)),this.drawMapDataLabels()},u.prototype.getBox=function(t){var a,l=Number.MAX_VALUE,p=-l,h=l,c=-l,d=l,u=l,e=this.xAxis,o=this.yAxis;(t||[]).forEach(function(t){var e,o,i,r,s,n;t.path&&("string"==typeof t.path?t.path=x(t.path):"M"===t.path[0]&&(t.path=m.prototype.pathToSegments(t.path)),e=t.path||[],o=-l,r=-(i=l),s=l,n=t.properties,t._foundBox||(e.forEach(function(t){var e=t[t.length-2];t=t[t.length-1],"number"==typeof e&&"number"==typeof t&&(i=Math.min(i,e),o=Math.max(o,e),s=Math.min(s,t),r=Math.max(r,t))}),t._midX=i+(o-i)*_(t.middleX,n&&n["hc-middle-x"],.5),t._midY=s+(r-s)*_(t.middleY,n&&n["hc-middle-y"],.5),t._maxX=o,t._minX=i,t._maxY=r,t._minY=s,t.labelrank=_(t.labelrank,(o-i)*(r-s)),t._foundBox=!0),p=Math.max(p,t._maxX),h=Math.min(h,t._minX),c=Math.max(c,t._maxY),d=Math.min(d,t._minY),u=Math.min(t._maxX-t._minX,t._maxY-t._minY,u),a=!0)}),a&&(this.minY=Math.min(d,_(this.minY,l)),this.maxY=Math.max(c,_(this.maxY,-l)),this.minX=Math.min(h,_(this.minX,l)),this.maxX=Math.max(p,_(this.maxX,-l)),e&&void 0===e.options.minRange&&(e.minRange=Math.min(5*u,(this.maxX-this.minX)/5,e.minRange||l)),o&&void 0===o.options.minRange&&(o.minRange=Math.min(5*u,(this.maxY-this.minY)/5,o.minRange||l)))},u.prototype.getExtremes=function(){var t=(e=g.prototype.getExtremes.call(this,this.valueData)).dataMin,e=e.dataMax;return this.chart.hasRendered&&this.isDirtyData&&this.getBox(this.options.data),A(t)&&(this.valueMin=t),A(e)&&(this.valueMax=e),{dataMin:this.minY,dataMax:this.maxY}},u.prototype.hasData=function(){return!!this.processedXData.length},u.prototype.pointAttribs=function(t,e){return(e=t.series.chart.styledMode?this.colorAttribs(t):v.prototype.pointAttribs.call(this,t,e))["stroke-width"]=_(t.options[this.pointAttrToOptions&&this.pointAttrToOptions["stroke-width"]||"borderWidth"],"inherit"),e},u.prototype.render=function(){var t=this,e=g.prototype.render;t.chart.renderer.isVML&&3e3<t.data.length?setTimeout(function(){e.call(t)}):e.call(t)},u.prototype.setData=function(r,t,e,o){var i,s,n=this.options,a=this.chart.options.chart,l=a&&a.map,p=n.mapData,h=this.joinBy,c=n.keys||this.pointArrayMap,d=[],u={},m=this.chart.mapTransforms;if(!p&&l&&(p="string"==typeof l?b[l]:l),r&&r.forEach(function(t,e){var o=0;if(A(t))r[e]={value:t};else if(C(t)){r[e]={},!n.keys&&t.length>c.length&&"string"==typeof t[0]&&(r[e]["hc-key"]=t[0],++o);for(var i=0;i<c.length;++i,++o)c[i]&&void 0!==t[o]&&(0<c[i].indexOf(".")?y.prototype.setNestedProperty(r[e],t[o],c[i]):r[e][c[i]]=t[o])}h&&"_i"===h[0]&&(r[e]._i=e)}),this.getBox(r),(this.chart.mapTransforms=m=a.mapTransforms||p&&p["hc-transform"]||m)&&j(m,function(t){t.rotation&&(t.cosAngle=Math.cos(t.rotation),t.sinAngle=Math.sin(t.rotation))}),p){for("FeatureCollection"===p.type&&(this.mapTitle=p.title,p=f.geojson(p,this.type,this)),this.mapData=p,this.mapMap={},m=0;m<p.length;m++)l=(a=p[m]).properties,a._i=m,h[0]&&l&&l[h[0]]&&(a[h[0]]=l[h[0]]),u[a[h[0]]]=a;this.mapMap=u,r&&h[1]&&(i=h[1],r.forEach(function(t){t=M(i,t),u[t]&&d.push(u[t])})),n.allAreas?(this.getBox(p),r=r||[],h[1]&&(s=h[1],r.forEach(function(t){d.push(M(s,t))})),d="|"+d.map(function(t){return t&&t[h[0]]}).join("|")+"|",p.forEach(function(t){h[0]&&-1!==d.indexOf("|"+t[h[0]]+"|")||(r.push(S(t,{value:null})),o=!1)})):this.getBox(d)}g.prototype.setData.call(this,r,t,e,o)},u.prototype.setOptions=function(t){var e=(t=g.prototype.setOptions.call(this,t)).joinBy;return(e=this.joinBy=d(e=null===e?"_i":e))[1]||(e[1]=e[0]),t},u.prototype.translate=function(){var e=this,o=e.xAxis,i=e.yAxis,r=e.doFullTranslate();e.generatePoints(),e.data.forEach(function(t){A(t._midX)&&A(t._midY)&&(t.plotX=o.toPixels(t._midX,!0),t.plotY=i.toPixels(t._midY,!0)),r&&(t.shapeType="path",t.shapeArgs={d:e.translatePath(t.path)})}),c(e,"afterTranslate")},u.prototype.translatePath=function(t){var e=this.xAxis,o=this.yAxis,i=e.min,r=e.transA,s=e.minPixelPadding,n=o.min,a=o.transA,l=o.minPixelPadding,p=[];return t&&t.forEach(function(t){"M"===t[0]?p.push(["M",(t[1]-(i||0))*r+s,(t[2]-(n||0))*a+l]):"L"===t[0]?p.push(["L",(t[1]-(i||0))*r+s,(t[2]-(n||0))*a+l]):"C"===t[0]?p.push(["C",(t[1]-(i||0))*r+s,(t[2]-(n||0))*a+l,(t[3]-(i||0))*r+s,(t[4]-(n||0))*a+l,(t[5]-(i||0))*r+s,(t[6]-(n||0))*a+l]):"Q"===t[0]?p.push(["Q",(t[1]-(i||0))*r+s,(t[2]-(n||0))*a+l,(t[3]-(i||0))*r+s,(t[4]-(n||0))*a+l]):"Z"===t[0]&&p.push(["Z"])}),p},u.defaultOptions=S(p.defaultOptions,{animation:!1,dataLabels:{crop:!1,formatter:function(){return this.point.value},inside:!0,overflow:!1,padding:0,verticalAlign:"middle"},marker:null,nullColor:i.neutralColor3,stickyTracking:!1,tooltip:{followPointer:!0,pointFormat:"{point.name}: {point.value}<br/>"},turboThreshold:0,allAreas:!0,borderColor:i.neutralColor20,borderWidth:1,joinBy:"hc-key",states:{hover:{halo:null,brightness:.2},normal:{animation:!0},select:{color:i.neutralColor20},inactive:{opacity:1}}}),o((s=u).prototype,{type:"map",axisTypes:t.axisTypes,colorAttribs:t.colorAttribs,colorKey:t.colorKey,directTouch:!0,drawDataLabels:l,drawGraph:l,drawLegendSymbol:e.drawRectangle,forceDL:!0,getExtremesFromAll:!0,getSymbol:t.getSymbol,parallelArrays:t.parallelArrays,pointArrayMap:t.pointArrayMap,pointClass:y,preserveAspectRatio:!0,searchPoint:l,trackerGroups:t.trackerGroups,useMapGeometry:!0}),r.registerSeriesType("map",s),s}),e(t,"Series/MapLine/MapLineSeries.js",[t["Series/Map/MapSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(o,t,e){var i,r,s=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=t.series,a=e.extend,l=e.merge;function p(){var t=null!==r&&r.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return s(p,r=o),p.prototype.pointAttribs=function(t,e){return(t=o.prototype.pointAttribs.call(this,t,e)).fill=this.options.fillColor,t},p.defaultOptions=l(o.defaultOptions,{lineWidth:1,fillColor:"none"}),a((e=p).prototype,{type:"mapline",colorProp:"stroke",drawLegendSymbol:n.prototype.drawLegendSymbol,pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"}}),t.registerSeriesType("mapline",e),e}),e(t,"Series/MapPoint/MapPointPoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){var i,o,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),s=e.merge;return o=t.seriesTypes.scatter.prototype.pointClass,r(n,o),n.prototype.applyOptions=function(t,e){return t=void 0!==t.lat&&void 0!==t.lon?s(t,this.series.chart.fromLatLonToPoint(t)):t,o.prototype.applyOptions.call(this,t,e)},n;function n(){var t=null!==o&&o.apply(this,arguments)||this;return t.options=void 0,t.series=void 0,t}}),e(t,"Series/MapPoint/MapPointSeries.js",[t["Series/MapPoint/MapPointPoint.js"],t["Core/Color/Palette.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o,i){var r,s,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=o.seriesTypes.scatter,l=i.extend,p=i.merge;function h(){var t=null!==s&&s.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return n(h,s=a),h.prototype.drawDataLabels=function(){s.prototype.drawDataLabels.call(this),this.dataLabelsGroup&&this.dataLabelsGroup.clip(this.chart.clipRect)},h.defaultOptions=p(a.defaultOptions,{dataLabels:{crop:!1,defer:!1,enabled:!0,formatter:function(){return this.point.name},overflow:!1,style:{color:e.neutralColor100}}}),l((i=h).prototype,{type:"mappoint",forceDL:!0,pointClass:t}),o.registerSeriesType("mappoint",i),i}),e(t,"Series/Bubble/BubblePoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(e,t,o){var i,r,s=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.options=void 0,t.series=void 0,t}return o=o.extend,r=t.seriesTypes.scatter.prototype.pointClass,s(n,r),n.prototype.haloPath=function(t){return e.prototype.haloPath.call(this,0===t?0:(this.marker&&this.marker.radius||0)+t)},o((t=n).prototype,{ttBelow:!1}),t}),e(t,"Series/Bubble/BubbleLegend.js",[t["Core/Chart/Chart.js"],t["Core/Color/Color.js"],t["Core/FormatUtilities.js"],t["Core/Globals.js"],t["Core/Legend.js"],t["Core/DefaultOptions.js"],t["Core/Color/Palette.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],function(t,e,r,s,o,i,n,a,l){var c=e.parse,p=s.noop;i=i.setOptions,e=l.addEvent;var h=l.arrayMax,d=l.arrayMin,u=l.isNumber,m=l.merge,f=l.objectEach,y=l.pick,g=l.stableSort;function b(t,e){this.options=this.symbols=this.visible=this.ranges=this.movementX=this.maxLabel=this.legendSymbol=this.legendItemWidth=this.legendItemHeight=this.legendItem=this.legendGroup=this.legend=this.fontMetrics=this.chart=void 0,this.setState=p,this.init(t,e)}return l=l.wrap,i({legend:{bubbleLegend:{borderColor:void 0,borderWidth:2,className:void 0,color:void 0,connectorClassName:void 0,connectorColor:void 0,connectorDistance:60,connectorWidth:1,enabled:!1,labels:{className:void 0,allowOverlap:!1,format:"",formatter:void 0,align:"right",style:{fontSize:"10px",color:n.neutralColor100},x:0,y:0},maxSize:60,minSize:10,legendIndex:0,ranges:{value:void 0,borderColor:void 0,color:void 0,connectorColor:void 0},sizeBy:"area",sizeByAbsoluteValue:!1,zIndex:1,zThreshold:0}}}),b.prototype.init=function(t,e){this.options=t,this.visible=!0,this.chart=e.chart,this.legend=e},b.prototype.addToLegend=function(t){t.splice(this.options.legendIndex,0,this)},b.prototype.drawLegendSymbol=function(t){var e=this.chart,o=this.options,i=y(t.options.itemDistance,20),r=o.ranges,s=o.connectorDistance;this.fontMetrics=e.renderer.fontMetrics(o.labels.style.fontSize),r&&r.length&&u(r[0].value)?(g(r,function(t,e){return e.value-t.value}),this.ranges=r,this.setOptions(),this.render(),e=this.getMaxLabelSize(),t=2*(r=this.ranges[0].radius),s=0<(s=s-r+e.width)?s:0,this.maxLabel=e,this.movementX="left"===o.labels.align?s:0,this.legendItemWidth=t+s+i,this.legendItemHeight=t+this.fontMetrics.h/2):t.options.bubbleLegend.autoRanges=!0},b.prototype.setOptions=function(){var o=this.ranges,i=this.options,r=this.chart.series[i.seriesIndex],s=this.legend.baseline,n={zIndex:i.zIndex,"stroke-width":i.borderWidth},a={zIndex:i.zIndex,"stroke-width":i.connectorWidth},l={align:this.legend.options.rtl||"left"===i.labels.align?"right":"left",zIndex:i.zIndex},p=r.options.marker.fillOpacity,h=this.chart.styledMode;o.forEach(function(t,e){h||(n.stroke=y(t.borderColor,i.borderColor,r.color),n.fill=y(t.color,i.color,1!==p?c(r.color).setOpacity(p).get("rgba"):r.color),a.stroke=y(t.connectorColor,i.connectorColor,r.color)),o[e].radius=this.getRangeRadius(t.value),o[e]=m(o[e],{center:o[0].radius-o[e].radius+s}),h||m(!0,o[e],{bubbleAttribs:m(n),connectorAttribs:m(a),labelAttribs:l})},this)},b.prototype.getRangeRadius=function(t){var e=this.options;return this.chart.series[this.options.seriesIndex].getRadius.call(this,e.ranges[e.ranges.length-1].value,e.ranges[0].value,e.minSize,e.maxSize,t)},b.prototype.render=function(){var t=this.chart.renderer,e=this.options.zThreshold;this.symbols||(this.symbols={connectors:[],bubbleItems:[],labels:[]}),this.legendSymbol=t.g("bubble-legend"),this.legendItem=t.g("bubble-legend-item"),this.legendSymbol.translateX=0,this.legendSymbol.translateY=0,this.ranges.forEach(function(t){t.value>=e&&this.renderRange(t)},this),this.legendSymbol.add(this.legendItem),this.legendItem.add(this.legendGroup),this.hideOverlappingLabels()},b.prototype.renderRange=function(t){var e=this.options,o=e.labels,i=(n=this.chart).series[e.seriesIndex],r=n.renderer,s=this.symbols,n=s.labels,a=t.center,l=Math.abs(t.radius),p=e.connectorDistance||0,h=o.align,p=this.legend.options.rtl||"left"===h?-p:p,c=e.connectorWidth,d=this.ranges[0].radius||0,u=a-l-e.borderWidth/2+c/2,m=(m=this.fontMetrics).f/2-(m.h-m.f)/2,f=r.styledMode;"center"===h&&(e.connectorDistance=p=0,t.labelAttribs.align="center");var h=u+e.labels.y,y=d+p+e.labels.x;s.bubbleItems.push(r.circle(d,a+((u%1?1:.5)-(c%2?0:.5)),l).attr(f?{}:t.bubbleAttribs).addClass((f?"highcharts-color-"+i.colorIndex+" ":"")+"highcharts-bubble-legend-symbol "+(e.className||"")).add(this.legendSymbol)),s.connectors.push(r.path(r.crispLine([["M",d,u],["L",d+p,u]],e.connectorWidth)).attr(f?{}:t.connectorAttribs).addClass((f?"highcharts-color-"+this.options.seriesIndex+" ":"")+"highcharts-bubble-legend-connectors "+(e.connectorClassName||"")).add(this.legendSymbol)),t=r.text(this.formatLabel(t),y,h+m).attr(f?{}:t.labelAttribs).css(f?{}:o.style).addClass("highcharts-bubble-legend-labels "+(e.labels.className||"")).add(this.legendSymbol),n.push(t),t.placed=!0,t.alignAttr={x:y,y:h+m}},b.prototype.getMaxLabelSize=function(){var e,o;return this.symbols.labels.forEach(function(t){o=t.getBBox(!0),e=!e||o.width>e.width?o:e}),e||{}},b.prototype.formatLabel=function(t){var e=(o=this.options).labels.formatter,o=o.labels.format,i=this.chart.numberFormatter;return o?r.format(o,t):e?e.call(t):i(t.value,1)},b.prototype.hideOverlappingLabels=function(){var t=this.chart,o=this.symbols;!this.options.labels.allowOverlap&&o&&(t.hideOverlappingLabels(o.labels),o.labels.forEach(function(t,e){t.newOpacity?t.newOpacity!==t.oldOpacity&&o.connectors[e].show():o.connectors[e].hide()}))},b.prototype.getRanges=function(){var e,t=this.legend.bubbleLegend,o=t.options.ranges,i=Number.MAX_VALUE,r=-Number.MAX_VALUE;t.chart.series.forEach(function(t){t.isBubble&&!t.ignoreSeries&&((e=t.zData.filter(u)).length&&(i=y(t.options.zMin,Math.min(i,Math.max(d(e),!1===t.options.displayNegative?t.options.zThreshold:-Number.MAX_VALUE))),r=y(t.options.zMax,Math.max(r,h(e)))))});var s=i===r?[{value:r}]:[{value:i},{value:(i+r)/2},{value:r,autoRanges:!0}];return o.length&&o[0].radius&&s.reverse(),s.forEach(function(t,e){o&&o[e]&&(s[e]=m(o[e],t))}),s},b.prototype.predictBubbleSizes=function(){var t=this.chart,e=this.fontMetrics,o=t.legend.options,i="horizontal"===o.layout,r=i?t.legend.lastLineHeight:0,s=t.plotSizeX,n=t.plotSizeY,a=t.series[this.options.seriesIndex],t=Math.ceil(a.minPxSize),l=Math.ceil(a.maxPxSize),a=a.options.maxSize,p=Math.min(n,s);return o.floating||!/%$/.test(a)?e=l:(a=parseFloat(a),e=(p+r-e.h/2)*a/100/(a/100+1),(i&&s<=n-e||!i&&n<=s-e)&&(e=l)),[t,Math.ceil(e)]},b.prototype.updateRanges=function(t,e){var o=this.legend.options.bubbleLegend;o.minSize=t,o.maxSize=e,o.ranges=this.getRanges()},b.prototype.correctSizes=function(){var t=this.legend,e=this.chart.series[this.options.seriesIndex];1<Math.abs(Math.ceil(e.maxPxSize)-this.options.maxSize)&&(this.updateRanges(this.options.minSize,e.maxPxSize),t.render())},n=b,e(o,"afterGetAllItems",function(t){var e=this.bubbleLegend,o=this.options,i=o.bubbleLegend,r=this.chart.getVisibleBubbleSeriesIndex();e&&e.ranges&&e.ranges.length&&(i.ranges.length&&(i.autoRanges=!!i.ranges[0].autoRanges),this.destroyItem(e)),0<=r&&o.enabled&&i.enabled&&(i.seriesIndex=r,this.bubbleLegend=new s.BubbleLegend(i,this),this.bubbleLegend.addToLegend(t.allItems))}),t.prototype.getVisibleBubbleSeriesIndex=function(){for(var t=this.series,e=0;e<t.length;){if(t[e]&&t[e].isBubble&&t[e].visible&&t[e].zData.length)return e;e++}return-1},o.prototype.getLinesHeights=function(){for(var t=this.allItems,e=[],o=t.length,i=0,r=0;r<o;r++)if(t[r].legendItemHeight&&(t[r].itemHeight=t[r].legendItemHeight),t[r]===t[o-1]||t[r+1]&&t[r]._legendItemPos[1]!==t[r+1]._legendItemPos[1]){e.push({height:0});for(var s=e[e.length-1];i<=r;i++)t[i].itemHeight>s.height&&(s.height=t[i].itemHeight);s.step=r}return e},o.prototype.retranslateItems=function(o){var i,r,s,n=this.options.rtl,a=0;this.allItems.forEach(function(t,e){i=t.legendGroup.translateX,r=t._legendItemPos[1],((s=t.movementX)||n&&t.ranges)&&(s=n?i-t.options.maxSize/2:i+s,t.legendGroup.attr({translateX:s})),e>o[a].step&&a++,t.legendGroup.attr({translateY:Math.round(r+o[a].height/2)}),t._legendItemPos[1]=r+o[a].height/2})},e(a,"legendItemClick",function(){var t=this.chart,e=this.visible,o=this.chart.legend;o&&o.bubbleLegend&&(this.visible=!e,this.ignoreSeries=e,t=0<=t.getVisibleBubbleSeriesIndex(),o.bubbleLegend.visible!==t&&(o.update({bubbleLegend:{enabled:t}}),o.bubbleLegend.visible=t),this.visible=e)}),l(t.prototype,"drawChartBox",function(t,e,o){var i,r=this.legend,s=0<=this.getVisibleBubbleSeriesIndex();r&&r.options.enabled&&r.bubbleLegend&&r.options.bubbleLegend.autoRanges&&s?(i=r.bubbleLegend.options,s=r.bubbleLegend.predictBubbleSizes(),r.bubbleLegend.updateRanges(s[0],s[1]),i.placed||(r.group.placed=!1,r.allItems.forEach(function(t){t.legendGroup.translateY=null})),r.render(),this.getMargins(),this.axes.forEach(function(t){t.visible&&t.render(),i.placed||(t.setScale(),t.updateNames(),f(t.ticks,function(t){t.isNew=!0,t.isNewLabel=!0}))}),i.placed=!0,this.getMargins(),t.call(this,e,o),r.bubbleLegend.correctSizes(),r.retranslateItems(r.getLinesHeights())):(t.call(this,e,o),r&&r.options.enabled&&r.bubbleLegend&&(r.render(),r.retranslateItems(r.getLinesHeights())))}),s.BubbleLegend=n,s.BubbleLegend}),e(t,"Series/Bubble/BubbleSeries.js",[t["Core/Axis/Axis.js"],t["Series/Bubble/BubblePoint.js"],t["Core/Color/Color.js"],t["Core/Globals.js"],t["Core/Series/Series.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o,i,r,s,n){var a,l=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=o.parse;o=i.noop;var h=s.seriesTypes;i=h.column;var c,d=h.scatter,y=n.arrayMax,g=n.arrayMin,b=n.clamp,u=n.extend,x=n.isNumber,h=n.merge,v=n.pick,M=n.pInt;function m(){var t=null!==c&&c.apply(this,arguments)||this;return t.data=void 0,t.maxPxSize=void 0,t.minPxSize=void 0,t.options=void 0,t.points=void 0,t.radii=void 0,t.yData=void 0,t.zData=void 0,t}return l(m,c=d),m.prototype.animate=function(t){!t&&this.points.length<this.options.animationLimit&&this.points.forEach(function(t){var e=t.graphic;e&&e.width&&(this.hasRendered||e.attr({x:t.plotX,y:t.plotY,width:1,height:1}),e.animate(this.markerAttribs(t),this.options.animation))},this)},m.prototype.getRadii=function(t,e,o){var i=this.zData,r=this.yData,s=o.minPxSize,n=o.maxPxSize,a=[],l=0;for(o=i.length;l<o;l++){var p=i[l];a.push(this.getRadius(t,e,s,n,p,r[l]))}this.radii=a},m.prototype.getRadius=function(t,e,o,i,r,s){var n=this.options,a="width"!==n.sizeBy,l=n.zThreshold,p=e-t,h=.5;if(null===s||null===r)return null;if(x(r)){if(n.sizeByAbsoluteValue&&(r=Math.abs(r-l),p=Math.max(e-l,Math.abs(t-l)),t=0),r<t)return o/2-1;0<p&&(h=(r-t)/p)}return a&&0<=h&&(h=Math.sqrt(h)),Math.ceil(o+h*(i-o))/2},m.prototype.hasData=function(){return!!this.processedXData.length},m.prototype.pointAttribs=function(t,e){var o=this.options.marker.fillOpacity;return t=r.prototype.pointAttribs.call(this,t,e),1!==o&&(t.fill=p(t.fill).setOpacity(o).get("rgba")),t},m.prototype.translate=function(){var t,e=this.data,o=this.radii;for(c.prototype.translate.call(this),t=e.length;t--;){var i=e[t],r=o?o[t]:0;x(r)&&r>=this.minPxSize/2?(i.marker=u(i.marker,{radius:r,width:2*r,height:2*r}),i.dlBox={x:i.plotX-r,y:i.plotY-r,width:2*r,height:2*r}):i.shapeArgs=i.plotY=i.dlBox=void 0}},m.defaultOptions=h(d.defaultOptions,{dataLabels:{formatter:function(){return this.point.z},inside:!0,verticalAlign:"middle"},animationLimit:250,marker:{lineColor:null,lineWidth:1,fillOpacity:.5,radius:null,states:{hover:{radiusPlus:0}},symbol:"circle"},minSize:8,maxSize:"20%",softThreshold:!1,states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),u((n=m).prototype,{alignDataLabel:i.prototype.alignDataLabel,applyZones:o,bubblePadding:!0,buildKDTree:o,directTouch:!0,isBubble:!0,pointArrayMap:["y","z"],pointClass:e,parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],specialGroup:"group",zoneAxis:"z"}),t.prototype.beforePadding=function(){var r=this,t=this.len,e=this.chart,s=0,n=t,a=this.isXAxis,l=a?"xData":"yData",p=this.min,h={},c=Math.min(e.plotWidth,e.plotHeight),d=Number.MAX_VALUE,u=-Number.MAX_VALUE,m=this.max-p,f=t/m,o=[];this.series.forEach(function(t){var i=t.options;!t.bubblePadding||!t.visible&&e.options.chart.ignoreHiddenSeries||(r.allowZoomOutside=!0,o.push(t),a&&(["minSize","maxSize"].forEach(function(t){var e=i[t],o=/%$/.test(e),e=M(e);h[t]=o?c*e/100:e}),t.minPxSize=h.minSize,t.maxPxSize=Math.max(h.maxSize,h.minSize),(t=t.zData.filter(x)).length&&(d=v(i.zMin,b(g(t),!1===i.displayNegative?i.zThreshold:-Number.MAX_VALUE,d)),u=v(i.zMax,Math.max(u,y(t))))))}),o.forEach(function(t){var e,o=t[l],i=o.length;if(a&&t.getRadii(d,u,t),0<m)for(;i--;)x(o[i])&&r.dataMin<=o[i]&&o[i]<=r.max&&(e=t.radii?t.radii[i]:0,s=Math.min((o[i]-p)*f-e,s),n=Math.max((o[i]-p)*f+e,n))}),o.length&&0<m&&!this.logarithmic&&(n-=t,f*=(t+Math.max(0,s)-Math.min(n,t))/t,[["min","userMin",s],["max","userMax",n]].forEach(function(t){void 0===v(r.options[t[0]],r[t[1]])&&(r[t[0]]+=t[2]/f)}))},s.registerSeriesType("bubble",n),n}),e(t,"Series/MapBubble/MapBubblePoint.js",[t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=t.seriesTypes,s=r.map;t=e.extend;var n,a=e.merge;function l(){return null!==n&&n.apply(this,arguments)||this}return n=r.bubble.prototype.pointClass,o(l,n),l.prototype.applyOptions=function(t,e){return t&&void 0!==t.lat&&void 0!==t.lon?n.prototype.applyOptions.call(this,a(t,this.series.chart.fromLatLonToPoint(t)),e):s.prototype.pointClass.prototype.applyOptions.call(this,t,e)},l.prototype.isValid=function(){return"number"==typeof this.z},t((e=l).prototype,{ttBelow:!1}),e}),e(t,"Series/MapBubble/MapBubbleSeries.js",[t["Series/Bubble/BubbleSeries.js"],t["Series/MapBubble/MapBubblePoint.js"],t["Series/Map/MapSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o,i,r){var s,n,a=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=r.extend,p=r.merge;function h(){var t=null!==n&&n.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return a(h,n=t),h.defaultOptions=p(t.defaultOptions,{animationLimit:500,tooltip:{pointFormat:"{point.name}: {point.z}"}}),l((r=h).prototype,{type:"mapbubble",getBox:o.prototype.getBox,pointArrayMap:["z"],pointClass:e,setData:o.prototype.setData,setOptions:o.prototype.setOptions,xyFromShape:!0}),i.registerSeriesType("mapbubble",r),r}),e(t,"Series/Heatmap/HeatmapPoint.js",[t["Mixins/ColorMapSeries.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(t,e,o){var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});t=t.colorMapPointMixin;var s,n=o.clamp,a=o.extend,h=o.pick;function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.options=void 0,t.series=void 0,t.value=void 0,t.x=void 0,t.y=void 0,t}return s=e.seriesTypes.scatter.prototype.pointClass,r(l,s),l.prototype.applyOptions=function(t,e){return(t=s.prototype.applyOptions.call(this,t,e)).formatPrefix=t.isNull||null===t.value?"null":"point",t},l.prototype.getCellAttributes=function(){var t=(s=this.series).options,e=(t.colsize||1)/2,o=(t.rowsize||1)/2,i=s.xAxis,r=s.yAxis,a=this.options.marker||s.options.marker,s=s.pointPlacementToXValue(),l=h(this.pointPadding,t.pointPadding,0),p={x1:n(Math.round(i.len-(i.translate(this.x-e,!1,!0,!1,!0,-s)||0)),-i.len,2*i.len),x2:n(Math.round(i.len-(i.translate(this.x+e,!1,!0,!1,!0,-s)||0)),-i.len,2*i.len),y1:n(Math.round(r.translate(this.y-o,!1,!0,!1,!0)||0),-r.len,2*r.len),y2:n(Math.round(r.translate(this.y+o,!1,!0,!1,!0)||0),-r.len,2*r.len)};return[["width","x"],["height","y"]].forEach(function(t){var e=t[0],o=(t=t[1])+"1",i=t+"2",r=Math.abs(p[o]-p[i]),s=a&&a.lineWidth||0,n=Math.abs(p[o]+p[i])/2;a[e]&&a[e]<r&&(p[o]=n-a[e]/2-s/2,p[i]=n+a[e]/2+s/2),l&&("y"===t&&(o=i,i=t+"1"),p[o]+=l,p[i]-=l)}),p},l.prototype.haloPath=function(t){if(!t)return[];var e=this.shapeArgs;return["M",e.x-t,e.y-t,"L",e.x-t,e.y+e.height+t,e.x+e.width+t,e.y+e.height+t,e.x+e.width+t,e.y-t,"Z"]},l.prototype.isValid=function(){return 1/0!==this.value&&-1/0!==this.value},a((e=l).prototype,{dataLabelOnNull:t.dataLabelOnNull,moveToTopOnHover:t.moveToTopOnHover}),e}),e(t,"Series/Heatmap/HeatmapSeries.js",[t["Core/Color/Color.js"],t["Mixins/ColorMapSeries.js"],t["Series/Heatmap/HeatmapPoint.js"],t["Mixins/LegendSymbol.js"],t["Core/Color/Palette.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Renderer/SVG/SVGRenderer.js"],t["Core/Utilities.js"]],function(a,t,e,o,i,r,s,n){var l,p=this&&this.__extends||(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});t=t.colorMapSeriesMixin;var h,c=r.series,d=r.seriesTypes,u=d.column,d=d.scatter,m=s.prototype.symbols,f=n.extend,y=n.fireEvent,g=n.isNumber,b=n.merge,x=n.pick;function v(){var t=null!==h&&h.apply(this,arguments)||this;return t.colorAxis=void 0,t.data=void 0,t.options=void 0,t.points=void 0,t.valueMax=NaN,t.valueMin=NaN,t}return p(v,h=d),v.prototype.drawPoints=function(){var e=this;((this.options.marker||{}).enabled||this._hasPointMarkers)&&(c.prototype.drawPoints.call(this),this.points.forEach(function(t){t.graphic&&(t.graphic[e.chart.styledMode?"css":"animate"](e.colorAttribs(t)),e.options.borderRadius&&t.graphic.attr({r:e.options.borderRadius}),null===t.value&&t.graphic.addClass("highcharts-null-point"))}))},v.prototype.getExtremes=function(){var t=(e=c.prototype.getExtremes.call(this,this.valueData)).dataMin,e=e.dataMax;return g(t)&&(this.valueMin=t),g(e)&&(this.valueMax=e),c.prototype.getExtremes.call(this)},v.prototype.getValidPoints=function(t,e){return c.prototype.getValidPoints.call(this,t,e,!0)},v.prototype.hasData=function(){return!!this.processedXData.length},v.prototype.init=function(){c.prototype.init.apply(this,arguments);var t=this.options;t.pointRange=x(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1,m.ellipse=m.circle},v.prototype.markerAttribs=function(t,e){var o,i,r=t.marker||{},s=this.options.marker||{},n=t.shapeArgs||{},a={};return t.hasImage?{x:t.plotX,y:t.plotY}:(e&&(o=s.states[e]||{},i=r.states&&r.states[e]||{},[["width","x"],["height","y"]].forEach(function(t){a[t[0]]=(i[t[0]]||o[t[0]]||n[t[0]])+(i[t[0]+"Plus"]||o[t[0]+"Plus"]||0),a[t[1]]=n[t[1]]+(n[t[0]]-a[t[0]])/2})),e?a:n)},v.prototype.pointAttribs=function(t,e){var o=c.prototype.pointAttribs.call(this,t,e),i=this.options||{},r=(n=this.chart.options.plotOptions||{}).series||{},s=n.heatmap||{},n=i.borderColor||s.borderColor||r.borderColor,r=i.borderWidth||s.borderWidth||r.borderWidth||o["stroke-width"];return o.stroke=t&&t.marker&&t.marker.lineColor||i.marker&&i.marker.lineColor||n||this.color,o["stroke-width"]=r,e&&(e=(t=b(i.states[e],i.marker&&i.marker.states[e],t&&t.options.states&&t.options.states[e]||{})).brightness,o.fill=t.color||a.parse(o.fill).brighten(e||0).get(),o.stroke=t.lineColor),o},v.prototype.setClip=function(t){var e=this.chart;c.prototype.setClip.apply(this,arguments),!1===this.options.clip&&!t||this.markerGroup.clip((t||this.clipBox)&&this.sharedClipKey?e.sharedClips[this.sharedClipKey]:e.clipRect)},v.prototype.translate=function(){var t=this.options,s=t.marker&&t.marker.symbol||"rect",n=m[s]?s:"rect",a=-1!==["circle","square"].indexOf(n);this.generatePoints(),this.points.forEach(function(t){var e=t.getCellAttributes(),o={};o.x=Math.min(e.x1,e.x2),o.y=Math.min(e.y1,e.y2),o.width=Math.max(Math.abs(e.x2-e.x1),0),o.height=Math.max(Math.abs(e.y2-e.y1),0);var i,r=t.hasImage=0===(t.marker&&t.marker.symbol||s||"").indexOf("url");a&&(i=Math.abs(o.width-o.height),o.x=Math.min(e.x1,e.x2)+(o.width<o.height?0:i/2),o.y=Math.min(e.y1,e.y2)+(o.width<o.height?i/2:0),o.width=o.height=Math.min(o.width,o.height)),i={plotX:(e.x1+e.x2)/2,plotY:(e.y1+e.y2)/2,clientX:(e.x1+e.x2)/2,shapeType:"path",shapeArgs:b(!0,o,{d:m[n](o.x,o.y,o.width,o.height)})},r&&(t.marker={width:o.width,height:o.height}),f(t,i)}),y(this,"afterTranslate")},v.defaultOptions=b(d.defaultOptions,{animation:!1,borderRadius:0,borderWidth:0,nullColor:i.neutralColor3,dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:{symbol:"rect",radius:0,lineColor:void 0,states:{hover:{lineWidthPlus:0},select:{}}},clip:!0,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{hover:{halo:!1,brightness:.2}}}),f((s=v).prototype,{alignDataLabel:u.prototype.alignDataLabel,axisTypes:t.axisTypes,colorAttribs:t.colorAttribs,colorKey:t.colorKey,directTouch:!0,drawLegendSymbol:o.drawRectangle,getExtremesFromAll:!0,getSymbol:c.prototype.getSymbol,parallelArrays:t.parallelArrays,pointArrayMap:["y","value"],pointClass:e,trackerGroups:t.trackerGroups}),r.registerSeriesType("heatmap",s),s}),e(t,"Extensions/GeoJSON.js",[t["Core/Chart/Chart.js"],t["Core/FormatUtilities.js"],t["Core/Globals.js"],t["Core/Utilities.js"]],function(t,e,o,i){function r(t,e){var o,i=!1,r=t.x,s=t.y;for(t=0,o=e.length-1;t<e.length;o=t++)e[t][1]>s!=e[o][1]>s&&r<(e[o][0]-e[t][0])*(s-e[t][1])/(e[o][1]-e[t][1])+e[t][0]&&(i=!i);return i}var l=e.format,s=o.win,n=i.error,p=i.extend,a=i.merge;e=i.wrap,t.prototype.transformFromLatLon=function(t,e){if(!(o=this.userOptions.chart&&this.userOptions.chart.proj4||s.proj4))return n(21,!1,this),{x:0,y:null};t=o(e.crs,[t.lon,t.lat]);var o=e.cosAngle||e.rotation&&Math.cos(e.rotation),i=e.sinAngle||e.rotation&&Math.sin(e.rotation);return{x:(((t=e.rotation?[t[0]*o+t[1]*i,-t[0]*i+t[1]*o]:t)[0]-(e.xoffset||0))*(e.scale||1)+(e.xpan||0))*(e.jsonres||1)+(e.jsonmarginX||0),y:(((e.yoffset||0)-t[1])*(e.scale||1)+(e.ypan||0))*(e.jsonres||1)-(e.jsonmarginY||0)}},t.prototype.transformToLatLon=function(t,e){if(void 0!==s.proj4){t={x:((t.x-(e.jsonmarginX||0))/(e.jsonres||1)-(e.xpan||0))/(e.scale||1)+(e.xoffset||0),y:((-t.y-(e.jsonmarginY||0))/(e.jsonres||1)+(e.ypan||0))/(e.scale||1)+(e.yoffset||0)};var o=e.cosAngle||e.rotation&&Math.cos(e.rotation),i=e.sinAngle||e.rotation&&Math.sin(e.rotation);return{lat:(e=s.proj4(e.crs,"WGS84",e.rotation?{x:t.x*o+t.y*-i,y:t.x*i+t.y*o}:t)).y,lon:e.x}}n(21,!1,this)},t.prototype.fromPointToLatLon=function(t){var e,o=this.mapTransforms;if(o){for(e in o)if(Object.hasOwnProperty.call(o,e)&&o[e].hitZone&&r({x:t.x,y:-t.y},o[e].hitZone.coordinates[0]))return this.transformToLatLon(t,o[e]);return this.transformToLatLon(t,o.default)}n(22,!1,this)},t.prototype.fromLatLonToPoint=function(t){var e,o=this.mapTransforms;if(!o)return n(22,!1,this),{x:0,y:null};for(e in o)if(Object.hasOwnProperty.call(o,e)&&o[e].hitZone){var i=this.transformFromLatLon(t,o[e]);if(r({x:i.x,y:-i.y},o[e].hitZone.coordinates[0]))return i}return this.transformFromLatLon(t,o.default)},o.geojson=function(t,r,e){function s(t){t.forEach(function(t,e){0===e?a.push(["M",t[0],-t[1]]):a.push(["L",t[0],-t[1]])})}var n=[],a=[];return r=r||"map",t.features.forEach(function(t){var e,o=(i=t.geometry).type,i=i.coordinates;t=t.properties,a=[],"map"===r||"mapbubble"===r?("Polygon"===o?(i.forEach(s),a.push(["Z"])):"MultiPolygon"===o&&(i.forEach(function(t){t.forEach(s)}),a.push(["Z"])),a.length&&(e={path:a})):"mapline"===r?("LineString"===o?s(i):"MultiLineString"===o&&i.forEach(s),a.length&&(e={path:a})):"mappoint"===r&&"Point"===o&&(e={x:i[0],y:-i[1]}),e&&n.push(p(e,{name:t.name||t.NAME,properties:t}))}),e&&t.copyrightShort&&(e.chart.mapCredits=l(e.chart.options.credits.mapText,{geojson:t}),e.chart.mapCreditsFull=l(e.chart.options.credits.mapTextFull,{geojson:t})),n},e(t.prototype,"addCredits",function(t,e){e=a(!0,this.options.credits,e),this.mapCredits&&(e.href=null),t.call(this,e),this.credits&&this.mapCreditsFull&&this.credits.attr({title:this.mapCreditsFull})})}),e(t,"masters/modules/map.src.js",[t["Core/Globals.js"],t["Core/Chart/MapChart.js"]],function(t,e){t.MapChart=e,t.mapChart=t.Map=e.mapChart,t.maps=e.maps})});