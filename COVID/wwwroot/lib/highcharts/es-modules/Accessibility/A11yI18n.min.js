"use strict";import Chart from"../Core/Chart/Chart.js";import H from"../Core/Globals.js";import F from"../Core/FormatUtilities.js";var format=F.format;import U from"../Core/Utilities.js";var pick=U.pick;function stringTrim(t){return t.trim&&t.trim()||t.replace(/^\s+|\s+$/g,"")}function formatExtendedStatement(t,r){var e=t.indexOf("#each("),i=t.indexOf("#plural("),n=t.indexOf("["),s=t.indexOf("]");if(-1<e){var a,o=t.slice(e).indexOf(")")+e,u=t.substring(0,e),f=t.substring(o+1),e=t.substring(e+6,o).split(","),o=Number(e[1]),m="";if(a=r[e[0]])for(var l=(o=isNaN(o)?a.length:o)<0?a.length+o:Math.min(o,a.length),c=0;c<l;++c)m+=u+a[c]+f;return m.length?m:""}if(-1<i){var g=t.slice(i).indexOf(")")+i,p=t.substring(i+8,g).split(",");switch(Number(r[p[0]])){case 0:m=pick(p[4],p[1]);break;case 1:m=pick(p[2],p[1]);break;case 2:m=pick(p[3],p[1]);break;default:m=p[1]}return m?stringTrim(m):""}if(-1<n){g=t.substring(0,n),n=Number(t.substring(n+1,s)),s=void 0;return a=r[g],!isNaN(n)&&a&&(n<0?void 0===(s=a[a.length+n])&&(s=a[0]):void 0===(s=a[n])&&(s=a[a.length-1])),void 0!==s?s:""}return"{"+t+"}"}H.i18nFormat=function(t,r,e){for(var i,n,s=[],a=0;i=function(t,r){var e=t.slice(r||0),i=e.indexOf("{"),t=e.indexOf("}");if(-1<i&&i<t)return{statement:e.substring(i+1,t),begin:r+i+1,end:r+t}}(t,a),(n=t.substring(a,i&&i.begin-1)).length&&s.push({value:n,type:"constant"}),i&&s.push({value:i.statement,type:"statement"}),a=i?i.end+1:a+1,i;);return s.forEach(function(t){"statement"===t.type&&(t.value=formatExtendedStatement(t.value,r))}),format(s.reduce(function(t,r){return t+r.value},""),r,e)},Chart.prototype.langFormat=function(t,r){for(var e=t.split("."),i=this.options.lang,n=0;n<e.length;++n)i=i&&i[e[n]];return"string"==typeof i?H.i18nFormat(i,r,this):""};