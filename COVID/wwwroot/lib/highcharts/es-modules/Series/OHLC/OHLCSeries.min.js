"use strict";var __extends=this&&this.__extends||function(){var r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)};return function(t,o){function e(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}();import OHLCPoint from"./OHLCPoint.js";import SeriesRegistry from"../../Core/Series/SeriesRegistry.js";var ColumnSeries=SeriesRegistry.seriesTypes.column;import U from"../../Core/Utilities.js";var extend=U.extend,merge=U.merge,OHLCSeries=function(s){function t(){var t=null!==s&&s.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t.yData=void 0,t}return __extends(t,s),t.prototype.drawPoints=function(){function a(t,o,e){var r=t[0],t=t[1];"number"==typeof r[2]&&(r[2]=Math.max(e+o,r[2])),"number"==typeof t[2]&&(t[2]=Math.min(e-o,t[2]))}var u=this,t=u.points,h=u.chart;t.forEach(function(t){var o,e,r,i,n,p,s=t.graphic,l=!s;void 0!==t.plotY&&(s||(t.graphic=s=h.renderer.path().add(u.group)),h.styledMode||s.attr(u.pointAttribs(t,t.selected&&"select")),e=(p=s.strokeWidth())%2/2,n=Math.round(t.plotX)-e,r=Math.round(t.shapeArgs.width/2),i=[["M",n,Math.round(t.yBottom)],["L",n,Math.round(t.plotHigh)]],null!==t.open&&(o=Math.round(t.plotOpen)+e,i.push(["M",n,o],["L",n-r,o]),a(i,p/2,o)),null!==t.close&&(e=Math.round(t.plotClose)+e,i.push(["M",n,e],["L",n+r,e]),a(i,p/2,e)),s[l?"attr":"animate"]({d:i}).addClass(t.getClassName(),!0))})},t.prototype.init=function(){s.prototype.init.apply(this,arguments),this.options.stacking=void 0},t.prototype.pointAttribs=function(t,o){var e=s.prototype.pointAttribs.call(this,t,o),o=this.options;return delete e.fill,!t.options.color&&o.upColor&&t.open<t.close&&(e.stroke=o.upColor),e},t.prototype.toYData=function(t){return[t.open,t.high,t.low,t.close]},t.prototype.translate=function(){var r=this,i=r.yAxis,n=!!r.modifyValue,p=["plotOpen","plotHigh","plotLow","plotClose","yBottom"];s.prototype.translate.apply(r),r.points.forEach(function(e){[e.open,e.high,e.low,e.close,e.low].forEach(function(t,o){null!==t&&(n&&(t=r.modifyValue(t)),e[p[o]]=i.toPixels(t,!0))}),e.tooltipPos[1]=e.plotHigh+i.pos-r.chart.plotTop})},t.defaultOptions=merge(ColumnSeries.defaultOptions,{lineWidth:1,tooltip:{pointFormat:'<span style="color:{point.color}">‚óè</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},threshold:null,states:{hover:{lineWidth:3}},stickyTracking:!0}),t}(ColumnSeries);extend(OHLCSeries.prototype,{animate:null,directTouch:!1,pointArrayMap:["open","high","low","close"],pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},pointValKey:"close"}),OHLCSeries.prototype.pointClass=OHLCPoint,SeriesRegistry.registerSeriesType("ohlc",OHLCSeries);export default OHLCSeries;