"use strict";var __extends=this&&this.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};return function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();import A from"../../Core/Animation/AnimationUtilities.js";var setAnimation=A.setAnimation;import Point from"../../Core/Series/Point.js";import U from"../../Core/Utilities.js";var addEvent=U.addEvent,defined=U.defined,extend=U.extend,isNumber=U.isNumber,pick=U.pick,relativeLength=U.relativeLength,PiePoint=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelDistance=void 0,t.options=void 0,t.series=void 0,t}return __extends(t,e),t.prototype.getConnectorPath=function(){var t=this.labelPosition,e=this.series.options.dataLabels,i=e.connectorShape,n=this.connectorShapes;return(i=n[i]?n[i]:i).call(this,{x:t.final.x,y:t.final.y,alignment:t.alignment},t.connectorPosition,e)},t.prototype.getTranslate=function(){return this.sliced?this.slicedTranslation:{translateX:0,translateY:0}},t.prototype.haloPath=function(t){var e=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(e.x,e.y,e.r+t,e.r+t,{innerR:e.r-1,start:e.start,end:e.end})},t.prototype.init=function(){Point.prototype.init.apply(this,arguments);var t,e=this;return e.name=pick(e.name,"Slice"),t=function(t){e.slice("select"===t.type)},addEvent(e,"select",t),addEvent(e,"unselect",t),e},t.prototype.isValid=function(){return isNumber(this.y)&&0<=this.y},t.prototype.setVisible=function(e,t){var i=this,n=i.series,o=n.chart,r=n.options.ignoreHiddenPoint;t=pick(t,r),e!==i.visible&&(i.visible=i.options.visible=e=void 0===e?!i.visible:e,n.options.data[n.data.indexOf(i)]=i.options,["graphic","dataLabel","connector","shadowGroup"].forEach(function(t){i[t]&&i[t][e?"show":"hide"](e)}),i.legendItem&&o.legend.colorizeItem(i,e),e||"hover"!==i.state||i.setState(""),r&&(n.isDirty=!0),t&&o.redraw())},t.prototype.slice=function(t,e,i){var n=this,o=n.series,r=o.chart;setAnimation(i,r),e=pick(e,!0),n.sliced=n.options.sliced=t=defined(t)?t:!n.sliced,o.options.data[o.data.indexOf(n)]=n.options,n.graphic&&n.graphic.animate(this.getTranslate()),n.shadowGroup&&n.shadowGroup.animate(this.getTranslate())},t}(Point);extend(PiePoint.prototype,{connectorShapes:{fixedOffset:function(t,e,i){var n=e.breakAt,e=e.touchingSliceAt,n=i.softConnector?["C",t.x+("left"===t.alignment?-5:5),t.y,2*n.x-e.x,2*n.y-e.y,n.x,n.y]:["L",n.x,n.y];return[["M",t.x,t.y],n,["L",e.x,e.y]]},straight:function(t,e){e=e.touchingSliceAt;return[["M",t.x,t.y],["L",e.x,e.y]]},crookedLine:function(t,e,i){var n=e.touchingSliceAt,o=this.series,r=o.center[0],s=o.chart.plotWidth,a=o.chart.plotLeft,e=t.alignment,o=this.shapeArgs.r,i=relativeLength(i.crookDistance,1),r="left"===e?r+o+(s+a-r-o)*(1-i):a+(r-o)*i,o=["L",r,t.y],i=!0;("left"===e?r>t.x||r<n.x:r<t.x||r>n.x)&&(i=!1);t=[["M",t.x,t.y]];return i&&t.push(o),t.push(["L",n.x,n.y]),t}}});export default PiePoint;