"use strict";var __extends=this&&this.__extends||function(){var r=function(t,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(t,o)};return function(t,o){function e(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}();import ColumnSeries from"../Column/ColumnSeries.js";import H from"../../Core/Globals.js";var noop=H.noop;import palette from"../../Core/Color/Palette.js";import SeriesRegistry from"../../Core/Series/SeriesRegistry.js";import U from"../../Core/Utilities.js";var extend=U.extend,merge=U.merge,pick=U.pick,BoxPlotSeries=function(o){function t(){var t=null!==o&&o.apply(this,arguments)||this;return t.data=void 0,t.options=void 0,t.points=void 0,t}return __extends(t,o),t.prototype.pointAttribs=function(){return{}},t.prototype.translate=function(){var t=this,e=t.yAxis,r=t.pointArrayMap;o.prototype.translate.apply(t),t.points.forEach(function(o){r.forEach(function(t){null!==o[t]&&(o[t+"Plot"]=e.translate(o[t],0,1,0,1))}),o.plotHigh=o.highPlot})},t.prototype.drawPoints=function(){var h,d,p,m,u,c,f,y,k,w=this,t=w.points,S=w.options,b=w.chart,g=b.renderer,x=!1!==w.doQuartiles,C=w.options.whiskerLength;t.forEach(function(t){var o=t.graphic,e=o?"animate":"attr",r=t.shapeArgs,i={},s={},a={},n={},l=t.color||w.color;void 0!==t.plotY&&(c=Math.round(r.width),f=Math.floor(r.x),y=f+c,k=Math.round(c/2),h=Math.floor(x?t.q1Plot:t.lowPlot),d=Math.floor(x?t.q3Plot:t.lowPlot),p=Math.floor(t.highPlot),m=Math.floor(t.lowPlot),o||(t.graphic=o=g.g("point").add(w.group),t.stem=g.path().addClass("highcharts-boxplot-stem").add(o),C&&(t.whiskers=g.path().addClass("highcharts-boxplot-whisker").add(o)),x&&(t.box=g.path(void 0).addClass("highcharts-boxplot-box").add(o)),t.medianShape=g.path(void 0).addClass("highcharts-boxplot-median").add(o)),b.styledMode||(s.stroke=t.stemColor||S.stemColor||l,s["stroke-width"]=pick(t.stemWidth,S.stemWidth,S.lineWidth),s.dashstyle=t.stemDashStyle||S.stemDashStyle||S.dashStyle,t.stem.attr(s),C&&(a.stroke=t.whiskerColor||S.whiskerColor||l,a["stroke-width"]=pick(t.whiskerWidth,S.whiskerWidth,S.lineWidth),a.dashstyle=t.whiskerDashStyle||S.whiskerDashStyle||S.dashStyle,t.whiskers.attr(a)),x&&(i.fill=t.fillColor||S.fillColor||l,i.stroke=S.lineColor||l,i["stroke-width"]=S.lineWidth||0,i.dashstyle=t.boxDashStyle||S.boxDashStyle||S.dashStyle,t.box.attr(i)),n.stroke=t.medianColor||S.medianColor||l,n["stroke-width"]=pick(t.medianWidth,S.medianWidth,S.lineWidth),n.dashstyle=t.medianDashStyle||S.medianDashStyle||S.dashStyle,t.medianShape.attr(n)),n=void 0,c=t.stem.strokeWidth()%2/2,n=[["M",u=f+k+c,d],["L",u,p],["M",u,h],["L",u,m]],t.stem[e]({d:n}),x&&(c=t.box.strokeWidth()%2/2,h=Math.floor(h)+c,d=Math.floor(d)+c,n=[["M",f+=c,d],["L",f,h],["L",y+=c,h],["L",y,d],["L",f,d],["Z"]],t.box[e]({d:n})),C&&(c=t.whiskers.strokeWidth()%2/2,p+=c,m+=c,k=/%$/.test(C)?k*parseFloat(C)/100:C/2,n=[["M",u-k,p],["L",u+k,p],["M",u-k,m],["L",u+k,m]],t.whiskers[e]({d:n})),m=Math.round(t.medianPlot),c=t.medianShape.strokeWidth()%2/2,n=[["M",f,m+=c],["L",y,m]],t.medianShape[e]({d:n}))})},t.prototype.toYData=function(t){return[t.low,t.q1,t.median,t.q3,t.high]},t.defaultOptions=merge(ColumnSeries.defaultOptions,{threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">‚óè</span> <b> {series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",fillColor:palette.backgroundColor,lineWidth:1,medianWidth:2,whiskerWidth:2}),t}(ColumnSeries);extend(BoxPlotSeries.prototype,{pointArrayMap:["low","q1","median","q3","high"],pointValKey:"high",drawDataLabels:noop,setStackedPoints:noop}),SeriesRegistry.registerSeriesType("boxplot",BoxPlotSeries);export default BoxPlotSeries;