"use strict";import H from"../../Globals.js";var SVG_NS=H.SVG_NS;import U from"../../Utilities.js";var attr=U.attr,createElement=U.createElement,discardElement=U.discardElement,error=U.error,isString=U.isString,objectEach=U.objectEach,splat=U.splat,hasValidDOMParser=function(){try{return Boolean((new DOMParser).parseFromString("","text/html"))}catch(e){return!1}}(),AST=function(){function d(e){this.nodes="string"==typeof e?this.parseMarkup(e):e}return d.filterUserAttributes=function(a){return objectEach(a,function(t,e){var r=!0;-1===d.allowedAttributes.indexOf(e)&&(r=!1),(r=-1!==["background","dynsrc","href","lowsrc","src"].indexOf(e)?isString(t)&&d.allowedReferences.some(function(e){return 0===t.indexOf(e)}):r)||(error("Highcharts warning: Invalid attribute '"+e+"' in config"),delete a[e])}),a},d.setElementHTML=function(e,t){e.innerHTML="",t&&new d(t).addToDOM(e)},d.prototype.addToDOM=function(e){return function o(e,s){var l;return splat(e).forEach(function(e){var t,r,a,n=e.tagName,i=e.textContent?H.doc.createTextNode(e.textContent):void 0;n&&("#text"===n?t=i:-1!==d.allowedTags.indexOf(n)?(r="svg"!==n&&s.namespaceURI||SVG_NS,r=H.doc.createElementNS(r,n),a=e.attributes||{},objectEach(e,function(e,t){"tagName"!==t&&"attributes"!==t&&"children"!==t&&"textContent"!==t&&(a[t]=e)}),attr(r,d.filterUserAttributes(a)),i&&r.appendChild(i),o(e.children||[],r),t=r):error("Highcharts warning: Invalid tagName '"+n+"' in config")),t&&s.appendChild(t),l=t}),l}(this.nodes,e)},d.prototype.parseMarkup=function(e){var t,r=[],e=hasValidDOMParser?(new DOMParser).parseFromString(e,"text/html"):((t=createElement("div")).innerHTML=e,{body:t}),s=function(e,t){var r=e.nodeName.toLowerCase(),a={tagName:r};if("#text"===r){var n=e.textContent||"";if(/^[\s]*$/.test(n))return;a.textContent=n}var i,o,n=e.attributes;n&&(i={},[].forEach.call(n,function(e){i[e.name]=e.value}),a.attributes=i),e.childNodes.length&&(o=[],[].forEach.call(e.childNodes,function(e){s(e,o)}),o.length&&(a.children=o)),t.push(a)};return[].forEach.call(e.body.childNodes,function(e){return s(e,r)}),t&&discardElement(t),r},d.allowedTags=["a","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feOffset","feMerge","feMergeNode","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","text","thead","tbody","tspan","td","th","tr","u","ul","#text"],d.allowedAttributes=["aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","dx","dy","disabled","fill","height","href","id","in","markerHeight","markerWidth","offset","opacity","orient","padding","paddingLeft","paddingRight","patternUnits","r","refX","refY","role","scope","slope","src","startOffset","stdDeviation","stroke","stroke-linecap","stroke-width","style","tableValues","result","rowspan","summary","target","tabindex","text-align","textAnchor","textLength","type","valign","width","x","x1","x2","y","y1","y2","zIndex"],d.allowedReferences=["https://","http://","mailto:","/","../","./","#"],d}();export default AST;