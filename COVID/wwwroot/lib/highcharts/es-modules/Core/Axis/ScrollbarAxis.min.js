"use strict";import U from"../Utilities.js";var addEvent=U.addEvent,defined=U.defined,pick=U.pick,ScrollbarAxis=function(){function i(){}return i.compose=function(i,t){function a(i){var t=pick(i.options&&i.options.min,i.min),e=pick(i.options&&i.options.max,i.max);return{axisMin:t,axisMax:e,scrollMin:defined(i.dataMin)?Math.min(t,i.min,i.dataMin,pick(i.threshold,1/0)):t,scrollMax:defined(i.dataMax)?Math.max(e,i.max,i.dataMax,pick(i.threshold,-1/0)):e}}return addEvent(i,"afterInit",function(){var n=this;n.options&&n.options.scrollbar&&n.options.scrollbar.enabled&&(n.options.scrollbar.vertical=!n.horiz,n.options.startOnTick=n.options.endOnTick=!1,n.scrollbar=new t(n.chart.renderer,n.options.scrollbar,n.chart),addEvent(n.scrollbar,"changed",function(i){var t,e=a(n),o=e.axisMin,s=e.axisMax,r=e.scrollMin,e=e.scrollMax-r;defined(o)&&defined(s)&&(e=n.horiz&&!n.reversed||!n.horiz&&n.reversed?(t=r+e*this.to,r+e*this.from):(t=r+e*(1-this.from),r+e*(1-this.to)),this.shouldUpdateExtremes(i.DOMType)?n.setExtremes(e,t,!0,"mousemove"!==i.DOMType&&"touchmove"!==i.DOMType,i):this.setRange(this.from,this.to))}))}),addEvent(i,"afterRender",function(){var i=this,t=a(i),e=t.scrollMin,o=t.scrollMax,s=i.scrollbar,r=i.axisTitleMargin+(i.titleOffset||0),n=i.chart.scrollbarsOffsets,t=i.options.margin||0;s&&(t=i.horiz?(i.opposite||(n[1]+=r),s.position(i.left,i.top+i.height+2+n[1]-(i.opposite?t:0),i.width,i.height),i.opposite||(n[1]+=t),1):(i.opposite&&(n[0]+=r),s.position(i.left+i.width+2+n[0]-(i.opposite?0:t),i.top,i.width,i.height),i.opposite&&(n[0]+=t),0),n[t]+=s.size+s.options.margin,isNaN(e)||isNaN(o)||!defined(i.min)||!defined(i.max)||i.min===i.max?s.setRange(0,1):(t=(i.min-e)/(o-e),e=(i.max-e)/(o-e),i.horiz&&!i.reversed||!i.horiz&&i.reversed?s.setRange(t,e):s.setRange(1-e,1-t)))}),addEvent(i,"afterGetOffset",function(){var i=this,t=i.horiz?2:1,e=i.scrollbar;e&&(i.chart.scrollbarsOffsets=[0,0],i.chart.axisOffset[t]+=e.size+e.options.margin)}),i},i}();export default ScrollbarAxis;