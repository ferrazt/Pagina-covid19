"use strict";import A from"../Animation/AnimationUtilities.js";var getDeferredAnimation=A.getDeferredAnimation;import U from"../Utilities.js";var addEvent=U.addEvent,destroyObjectProperties=U.destroyObjectProperties,fireEvent=U.fireEvent,isNumber=U.isNumber,objectEach=U.objectEach,pick=U.pick,StackingAxisAdditions=function(){function t(t){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=t}return t.prototype.buildStacks=function(){var t,i,e=this.axis,s=e.series,o=e.options.reversedStacks,n=s.length;if(!e.isXAxis){for(this.usePercentage=!1,i=n;i--;)(t=s[o?i:n-i-1]).setStackedPoints(),t.setGroupedPoints();for(i=0;i<n;i++)s[i].modifyStacks();fireEvent(e,"afterBuildStacks")}},t.prototype.cleanStacks=function(){var t,i=this;i.axis.isXAxis||(i.oldStacks&&(t=i.stacks=i.oldStacks),objectEach(t,function(t){objectEach(t,function(t){t.cumulative=t.total})}))},t.prototype.resetStacks=function(){var s=this,t=this.axis,i=this.stacks;t.isXAxis||objectEach(i,function(e){objectEach(e,function(t,i){isNumber(t.touched)&&t.touched<s.stacksTouched?(t.destroy(),delete e[i]):(t.total=null,t.cumulative=null)})})},t.prototype.renderStackTotals=function(){var t=this,i=t.axis,e=i.chart,s=e.renderer,o=t.stacks,i=i.options.stackLabels&&i.options.stackLabels.animation,i=getDeferredAnimation(e,i||!1),n=t.stackTotalGroup=t.stackTotalGroup||s.g("stack-labels").attr({visibility:"visible",zIndex:6,opacity:0}).add();n.translate(e.plotLeft,e.plotTop),objectEach(o,function(t){objectEach(t,function(t){t.render(n)})}),n.animate({opacity:1},i)},t}(),StackingAxis=function(){function i(){}return i.compose=function(t){t.prototype;addEvent(t,"init",i.onInit),addEvent(t,"destroy",i.onDestroy)},i.onDestroy=function(){var e,t=this.stacking;t&&(e=t.stacks,objectEach(e,function(t,i){destroyObjectProperties(t),e[i]=null}),t&&t.stackTotalGroup&&t.stackTotalGroup.destroy())},i.onInit=function(){var t=this;t.stacking||(t.stacking=new StackingAxisAdditions(t))},i}();export default StackingAxis;