"use strict";import U from"./Utilities.js";var extend=U.extend,find=U.find,isArray=U.isArray,isObject=U.isObject,merge=U.merge,objectEach=U.objectEach,pick=U.pick,splat=U.splat,uniqueKey=U.uniqueKey,ResponsiveChart=function(){function t(){}return t.prototype.currentOptions=function(t){var p=this,i={};return function e(t,n,o,s){var r;objectEach(t,function(t,i){if(!s&&-1<p.collectionsWithUpdate.indexOf(i)&&n[i])for(t=splat(t),o[i]=[],r=0;r<Math.max(t.length,n[i].length);r++)n[i][r]&&(void 0===t[r]?o[i][r]=n[i][r]:(o[i][r]={},e(t[r],n[i][r],o[i][r],s+1)));else isObject(t)?(o[i]=isArray(t)?[]:{},e(t,n[i]||{},o[i],s+1)):void 0===n[i]?o[i]=null:o[i]=n[i]})}(t,this.options,i,0),i},t.prototype.matchResponsiveRule=function(t,i){var e=t.condition;(e.callback||function(){return this.chartWidth<=pick(e.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=pick(e.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=pick(e.minWidth,0)&&this.chartHeight>=pick(e.minHeight,0)}).call(this)&&i.push(t._id)},t.prototype.setResponsive=function(t,i){var e=this.options.responsive,n=this.currentResponsive,o=[];!i&&e&&e.rules&&e.rules.forEach(function(t){void 0===t._id&&(t._id=uniqueKey()),this.matchResponsiveRule(t,o)},this);var s=merge.apply(void 0,o.map(function(i){return find((e||{}).rules||[],function(t){return t._id===i})}).map(function(t){return t&&t.chartOptions}));s.isResponsiveOptions=!0;o=o.toString()||void 0,i=n&&n.ruleIds;o!==i&&(n&&this.update(n.undoOptions,t,!0),o?((n=this.currentOptions(s)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:o,mergedOptions:s,undoOptions:n},this.update(s,t,!0)):this.currentResponsive=void 0)},t}(),ResponsiveComposition=function(){function t(){}return t.compose=function(t){return extend(t.prototype,ResponsiveChart.prototype),t},t}();export default ResponsiveComposition;