"use strict";import H from"../Globals.js";import U from"../Utilities.js";var isNumber=U.isNumber,merge=U.merge,pInt=U.pInt,Color=function(){function i(t){this.parsers=[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(t){return[pInt(t[1]),pInt(t[2]),pInt(t[3]),parseFloat(t[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(t){return[pInt(t[1]),pInt(t[2]),pInt(t[3]),1]}}],this.rgba=[];var r=H.Color;return r&&r!==i?new r(t):this instanceof i?void this.init(t):new i(t)}return i.parse=function(t){return new i(t)},i.prototype.init=function(t){var r,s,e,n,o;if(this.input=t=i.names[t&&t.toLowerCase?t.toLowerCase():""]||t,t&&t.stops)this.stops=t.stops.map(function(t){return new i(t[1])});else if(t&&t.charAt&&"#"===t.charAt()&&(o=t.length,t=parseInt(t.substr(1),16),7===o?s=[(16711680&t)>>16,(65280&t)>>8,255&t,1]:4===o&&(s=[(3840&t)>>4|(3840&t)>>8,(240&t)>>4|240&t,(15&t)<<4|15&t,1])),!s)for(e=this.parsers.length;e--&&!s;)(r=(n=this.parsers[e]).regex.exec(t))&&(s=n.parse(r));this.rgba=s||[]},i.prototype.get=function(s){var e,t=this.input,r=this.rgba;return void 0!==this.stops?((e=merge(t)).stops=[].concat(e.stops),this.stops.forEach(function(t,r){e.stops[r]=[e.stops[r][0],t.get(s)]})):e=r&&isNumber(r[0])?"rgb"===s||!s&&1===r[3]?"rgb("+r[0]+","+r[1]+","+r[2]+")":"a"===s?r[3]:"rgba("+r.join(",")+")":t,e},i.prototype.brighten=function(r){var t,s=this.rgba;if(this.stops)this.stops.forEach(function(t){t.brighten(r)});else if(isNumber(r)&&0!==r)for(t=0;t<3;t++)s[t]+=pInt(255*r),s[t]<0&&(s[t]=0),255<s[t]&&(s[t]=255);return this},i.prototype.setOpacity=function(t){return this.rgba[3]=t,this},i.prototype.tweenTo=function(t,r){var s,e=this.rgba,n=t.rgba,t=n.length&&e&&e.length?((s=1!==n[3]||1!==e[3])?"rgba(":"rgb(")+Math.round(n[0]+(e[0]-n[0])*(1-r))+","+Math.round(n[1]+(e[1]-n[1])*(1-r))+","+Math.round(n[2]+(e[2]-n[2])*(1-r))+(s?","+(n[3]+(e[3]-n[3])*(1-r)):"")+")":t.input||"none";return t},i.names={white:"#ffffff",black:"#000000"},i}();export default Color;