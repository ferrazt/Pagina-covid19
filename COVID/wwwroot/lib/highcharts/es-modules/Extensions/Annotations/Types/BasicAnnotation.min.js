"use strict";var __extends=this&&this.__extends||function(){var i=function(t,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])})(t,o)};return function(t,o){function n(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();import Annotation from"../Annotations.js";import MockPoint from"../MockPoint.js";import U from"../../../Core/Utilities.js";var merge=U.merge,BasicAnnotation=function(n){function i(t,o){return n.call(this,t,o)||this}return __extends(i,n),i.prototype.addControlPoints=function(){var t=this.options,o=i.basicControlPoints,n=this.basicType;(t.labels||t.shapes).forEach(function(t){t.controlPoints=o[n]})},i.prototype.init=function(){var t=this.options;t.shapes?(delete t.labelOptions,"circle"===t.shapes[0].type?this.basicType="circle":this.basicType="rectangle"):(delete t.shapes,this.basicType="label"),Annotation.prototype.init.apply(this,arguments)},i.basicControlPoints={label:[{symbol:"triangle-down",positioner:function(t){if(!t.graphic.placed)return{x:0,y:-9e7};t=MockPoint.pointToPixels(t.points[0]);return{x:t.x-this.graphic.width/2,y:t.y-this.graphic.height/2}},events:{drag:function(t,o){t=this.mouseMoveToTranslation(t);o.translatePoint(t.x,t.y),o.annotation.userOptions.labels[0].point=o.options.point,o.redraw(!1)}}},{symbol:"square",positioner:function(t){return t.graphic.placed?{x:t.graphic.alignAttr.x-this.graphic.width/2,y:t.graphic.alignAttr.y-this.graphic.height/2}:{x:0,y:-9e7}},events:{drag:function(t,o){t=this.mouseMoveToTranslation(t);o.translate(t.x,t.y),o.annotation.userOptions.labels[0].point=o.options.point,o.redraw(!1)}}}],rectangle:[{positioner:function(t){t=MockPoint.pointToPixels(t.points[2]);return{x:t.x-4,y:t.y-4}},events:{drag:function(t,o){var n=o.annotation,i=this.chart.pointer.getCoordinates(t),s=i.xAxis[0].value,t=i.yAxis[0].value,i=o.options.points;i[1].x=s,i[2].x=s,i[2].y=t,i[3].y=t,n.userOptions.shapes[0].points=o.options.points,n.redraw(!1)}}}],circle:[{positioner:function(t){var o=MockPoint.pointToPixels(t.points[0]),t=t.options.r;return{x:o.x+t*Math.cos(Math.PI/4)-this.graphic.width/2,y:o.y+t*Math.sin(Math.PI/4)-this.graphic.height/2}},events:{drag:function(t,o){var n=o.annotation,t=this.mouseMoveToTranslation(t);o.setRadius(Math.max(o.options.r+t.y/Math.sin(Math.PI/4),5)),n.userOptions.shapes[0].r=o.options.r,n.userOptions.shapes[0].point=o.options.point,o.redraw(!1)}}}]},i}(Annotation);BasicAnnotation.prototype.defaultOptions=merge(Annotation.prototype.defaultOptions,{});export default Annotation.types.basicAnnotation=BasicAnnotation;