var getCentroid=function(n){function r(n,r){return n.sum+=r[n.i],n}for(var e=n.slice(0,-1),t=e.length,f=[],u=0;u<t;u++)f[u]=e.reduce(r,{sum:0,i:u}).sum/t;return f},nelderMead=function(u,n){function r(n,r){return n.fx-r.fx}function f(e,n,t,f){return n.map(function(n,r){return e*n+t*f[r]})}function e(n,r){return r.fx=u(r),n[n.length-1]=r,n}function t(n){var r=n[0];return n.map(function(n){n=f(.5,r,.5,n);return n.fx=u(n),n})}function i(n,r,e,t){return(r=f(e,n,t,r)).fx=u(r),r}for(var x=function(n){var r=n.length,e=new Array(r+1);e[0]=n,e[0].fx=u(n);for(var t=0;t<r;++t){var f=n.slice();f[t]=f[t]?1.05*f[t]:.001,f.fx=u(f),e[t+1]=f}return e}(n),o=0;o<100;o++){x.sort(r);var a,d=x[x.length-1],c=getCentroid(x),l=i(c,d,2,-1);x=l.fx<x[0].fx?e(x,(a=i(c,d,3,-2)).fx<l.fx?a:l):l.fx>=x[x.length-2].fx?(a=void 0,l.fx>d.fx?(a=i(c,d,.5,.5)).fx<d.fx?e(x,a):t(x):(a=i(c,d,1.5,-.5)).fx<l.fx?e(x,a):t(x)):e(x,l)}return x[0]},nelderMeadMixin={getCentroid:getCentroid,nelderMead:nelderMead};export default nelderMeadMixin;