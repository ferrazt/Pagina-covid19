"use strict";import H from"../Core/Globals.js";var noop=H.noop;import Series from"../Core/Series/Series.js";import U from"../Core/Utilities.js";var addEvent=U.addEvent,defined=U.defined,derivedSeriesMixin={hasDerivedData:!0,init:function(){Series.prototype.init.apply(this,arguments),this.initialised=!1,this.baseSeries=null,this.eventRemovers=[],this.addEvents()},setDerivedData:noop,setBaseSeries:function(){var e=this.chart,i=this.options.baseSeries,i=defined(i)&&(e.series[i]||e.get(i));this.baseSeries=i||null},addEvents:function(){var e=this,i=addEvent(this.chart,"afterLinkSeries",function(){e.setBaseSeries(),e.baseSeries&&!e.initialised&&(e.setDerivedData(),e.addBaseSeriesEvents(),e.initialised=!0)});this.eventRemovers.push(i)},addBaseSeriesEvents:function(){var e=this,i=addEvent(e.baseSeries,"updatedData",function(){e.setDerivedData()}),s=addEvent(e.baseSeries,"destroy",function(){e.baseSeries=null,e.initialised=!1});e.eventRemovers.push(i,s)},destroy:function(){this.eventRemovers.forEach(function(e){e()}),Series.prototype.destroy.apply(this,arguments)}};export default derivedSeriesMixin;