"use strict";import ColumnSeries from"../Series/Column/ColumnSeries.js";var columnProto=ColumnSeries.prototype;import Series from"../Core/Series/Series.js";var seriesProto=Series.prototype;import U from"../Core/Utilities.js";var defined=U.defined,stableSort=U.stableSort,onSeriesMixin={getPlotBox:function(){return seriesProto.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this)},translate:function(){columnProto.translate.apply(this);var t,i,e,o,s,r,n=this,l=n.options,p=n.chart,a=n.points,x=a.length-1,f=l.onSeries,f=f&&p.get(f),u=l.onKey||"y",S=f&&f.options.step,c=f&&f.points,d=c&&c.length,y=p.inverted,h=n.xAxis,m=n.yAxis,v=0;if(f&&f.visible&&d)for(v=(f.pointXOffset||0)+(f.barW||0)/2,p=f.currentDataGrouping,o=c[d-1].x+(p?p.totalRange:0),stableSort(a,function(t,e){return t.x-e.x}),u="plot"+u[0].toUpperCase()+u.substr(1);d--&&a[x]&&(e=c[d],(t=a[x]).y=e.y,!(e.x<=t.x&&void 0!==e[u]&&(t.x<=o&&(t.plotY=e[u],e.x<t.x&&!S&&(s=c[d+1])&&void 0!==s[u]&&(r=(t.x-e.x)/(s.x-e.x),t.plotY+=r*(s[u]-e[u]),t.y+=r*(s.y-e.y))),d++,--x<0))););a.forEach(function(t,e){var o;t.plotX+=v,void 0!==t.plotY&&!y||(0<=t.plotX&&t.plotX<=h.len?y?(t.plotY=h.translate(t.x,0,1,0,1),t.plotX=defined(t.y)?m.translate(t.y,0,0,0,1):0):t.plotY=(h.opposite?0:n.yAxis.len)+h.offset:t.shapeArgs={}),(i=a[e-1])&&i.plotX===t.plotX&&(void 0===i.stackIndex&&(i.stackIndex=0),o=i.stackIndex+1),t.stackIndex=o}),this.onSeries=f}};export default onSeriesMixin;