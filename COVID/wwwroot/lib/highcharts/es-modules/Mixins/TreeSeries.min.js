"use strict";import Color from"../Core/Color/Color.js";import U from"../Core/Utilities.js";var extend=U.extend,isArray=U.isArray,isNumber=U.isNumber,isObject=U.isObject,merge=U.merge,pick=U.pick,isBoolean=function(e){return"boolean"==typeof e},isFn=function(e){return"function"==typeof e},setTreeValues=function i(r,l){var e=l.before,o=l.idRoot,t=l.mapIdToNode[o],n=!isBoolean(l.levelIsConstant)||l.levelIsConstant,s=l.points[r.i],c=s&&s.options||{},a=0,u=[];return r.levelDynamic=r.level-(n?0:t.level),r.name=pick(s&&s.name,""),r.visible=o===r.id||!!isBoolean(l.visible)&&l.visible,(r=isFn(e)?e(r,l):r).children.forEach(function(e,o){var t=extend({},l);extend(t,{index:o,siblings:r.children.length,visible:r.visible}),e=i(e,t),u.push(e),e.visible&&(a+=e.val)}),r.visible=0<a||r.visible,c=pick(c.value,a),r.children=u,r.childrenTotal=a,r.isLeaf=r.visible&&!a,r.val=c,r},getColor=function(e,o){var t,i,r,l,n,s,c=o.index,a=o.mapOptionsToLevel,u=o.parentColor,d=o.parentColorIndex,v=o.series,p=o.colors,b=o.siblings,f=v.points,m=v.chart.options.chart;return e&&(f=f[e.i],t=a[e.level]||{},f&&t.colorByPoint&&(l=f.index%(p?p.length:m.colorCount),i=p&&p[l]),v.chart.styledMode||(r=pick(f&&f.options.color,t&&t.color,i,u&&(n=u,(s=t&&t.colorVariation)&&"brightness"===s.key?Color.parse(n).brighten(s.to*(c/b)).get():n),v.color)),l=pick(f&&f.options.colorIndex,t&&t.colorIndex,l,d,o.colorIndex)),{color:r,colorIndex:l}},getLevelOptions=function(e){var r,o,t,l,i,n,s=null;if(isObject(e))for(s={},l=isNumber(e.from)?e.from:1,n=e.levels,o={},r=isObject(e.defaults)?e.defaults:{},isArray(n)&&(o=n.reduce(function(e,o){var t,i;return isObject(o)&&isNumber(o.level)&&(i=merge({},o),t=(isBoolean(i.levelIsConstant)?i:r).levelIsConstant,delete i.levelIsConstant,delete i.level,t=o.level+(t?0:l-1),isObject(e[t])?extend(e[t],i):e[t]=i),e},{})),i=isNumber(e.to)?e.to:1,t=0;t<=i;t++)s[t]=merge({},r,isObject(o[t])?o[t]:{});return s},updateRootId=function(e){var o;return isObject(e)&&(o=isObject(e.options)?e.options:{},o=pick(e.rootNode,o.rootId,""),isObject(e.userOptions)&&(e.userOptions.rootId=o),e.rootNode=o),o},result={getColor:getColor,getLevelOptions:getLevelOptions,setTreeValues:setTreeValues,updateRootId:updateRootId};export default result;