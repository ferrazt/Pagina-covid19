"use strict";var __extends=this&&this.__extends||function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};return function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();import RequiredIndicatorMixin from"../../../Mixins/IndicatorRequired.js";import SeriesRegistry from"../../../Core/Series/SeriesRegistry.js";var EMAIndicator=SeriesRegistry.seriesTypes.ema;import U from"../../../Core/Utilities.js";var correctFloat=U.correctFloat,isArray=U.isArray,merge=U.merge,TEMAIndicator=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.EMApercent=void 0,e.data=void 0,e.options=void 0,e.points=void 0,e}return __extends(e,t),e.prototype.init=function(){var t=arguments,r=this;RequiredIndicatorMixin.isParentLoaded(EMAIndicator,"ema",r.type,function(e){e.prototype.init.apply(r,t)})},e.prototype.getEMA=function(e,t,r,i,o,n){return EMAIndicator.prototype.calculateEma(n||[],e,void 0===o?1:o,this.EMApercent,t,void 0===i?-1:i,r)},e.prototype.getTemaPoint=function(e,t,r,i){return[e[i-3],correctFloat(3*r.level1-3*r.level2+r.level3)]},e.prototype.getValues=function(e,t){var r,i,o,n,l=t.period,a=2*l,s=3*l,p=e.xData,c=e.yData,u=c?c.length:0,v=-1,d=0,y=0,f=[],h=[],A=[],M=[],E=[],g={};if(this.EMApercent=2/(l+1),!(u<3*l-2)){for(isArray(c[0])&&(v=t.index||0),y=(d=EMAIndicator.prototype.accumulatePeriodPoints(l,v,c))/l,d=0,o=l;o<u+3;o++)o<u+1&&(g.level1=this.getEMA(c,r,y,v,o)[1],M.push(g.level1)),r=g.level1,o<a?d+=g.level1:(o===a&&(y=d/l,d=0),g.level1=M[o-l-1],g.level2=this.getEMA([g.level1],i,y)[1],E.push(g.level2),i=g.level2,o<s?d+=g.level2:(o===s&&(y=d/l),o===u+1&&(g.level1=M[o-l-1],g.level2=this.getEMA([g.level1],i,y)[1],E.push(g.level2)),g.level1=M[o-l-2],g.level2=E[o-2*l-1],g.level3=this.getEMA([g.level2],g.prevLevel3,y)[1],(n=this.getTemaPoint(p,s,g,o))&&(f.push(n),h.push(n[0]),A.push(n[1])),g.prevLevel3=g.level3));return{values:f,xData:h,yData:A}}},e.defaultOptions=merge(EMAIndicator.defaultOptions),e}(EMAIndicator);SeriesRegistry.registerSeriesType("tema",TEMAIndicator);export default TEMAIndicator;