"use strict";var __extends=this&&this.__extends||function(){var i=function(t,r){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};return function(t,r){function e(){this.constructor=t}i(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();import RequiredIndicatorMixin from"../../../Mixins/IndicatorRequired.js";import SeriesRegistry from"../../../Core/Series/SeriesRegistry.js";var EMAIndicator=SeriesRegistry.seriesTypes.ema;import U from"../../../Core/Utilities.js";var correctFloat=U.correctFloat,isArray=U.isArray,merge=U.merge,DEMAIndicator=function(r){function t(){var t=null!==r&&r.apply(this,arguments)||this;return t.EMApercent=void 0,t.data=void 0,t.options=void 0,t.points=void 0,t}return __extends(t,r),t.prototype.init=function(){var r=arguments,e=this;RequiredIndicatorMixin.isParentLoaded(EMAIndicator,"ema",e.type,function(t){t.prototype.init.apply(e,r)})},t.prototype.getEMA=function(t,r,e,i,o,n){return EMAIndicator.prototype.calculateEma(n||[],t,void 0===o?1:o,this.EMApercent,r,void 0===i?-1:i,e)},t.prototype.getValues=function(t,r){var e,i,o,n,a,s=r.period,p=2*s,c=t.xData,u=t.yData,d=u?u.length:0,y=-1,f=0,l=0,A=[],M=[],h=[],E=0,v=[];if(this.EMApercent=2/(s+1),!(d<2*s-1)){for(isArray(u[0])&&(y=r.index||0),l=(f=EMAIndicator.prototype.accumulatePeriodPoints(s,y,u))/s,f=0,n=s;n<d+2;n++)n<d+1&&(E=this.getEMA(u,i,l,y,n)[1],v.push(E)),i=E,n<p?f+=E:(E=v[n-s-1],e=this.getEMA([E],o,l=n===p?f/s:l)[1],a=[c[n-2],correctFloat(2*E-e)],A.push(a),M.push(a[0]),h.push(a[1]),o=e);return{values:A,xData:M,yData:h}}},t.defaultOptions=merge(EMAIndicator.defaultOptions),t}(EMAIndicator);SeriesRegistry.registerSeriesType("dema",DEMAIndicator);export default DEMAIndicator;